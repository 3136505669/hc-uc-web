Ext.define("Hc_Framework.Application",{extend:"Ext.app.Application",name:"Hc_Framework",appFolder:"resources/app",controllers:["Root"],launch:function(){console.info("军情解码李金喜")}});
Ext.define("Hc_Framework.controller.Root",{extend:"Ext.app.Controller",onLaunch:function(){var b=this;var a=Ext.create("Hc_Framework.store.CurrentUser");console.info("这是我们jhg的ROOT1:"+a.data.length);a.load();console.info("这是我们的ROOT2:"+a.data.length);console.info("出错了没有2-----"+a.data.length);if(a.data.length<1){Ext.Ajax.request({url:Hc.basePath+"/getCurrentLoginUser.json",success:function(c){console.info("Root----执行了没有");console.info(c.responseText);var e=JSON.parse(c.responseText);if(e.result.resultCode==0){var d=Ext.create(a.model,{userId:e.entity.userId,userCode:e.entity.userCode,userName:e.entity.userName,deptName:e.entity.deptName,isAdminGroup:e.entity.isAdminGroup,email:e.entity.email,password:e.entity.password});d.save();a.add(d);a.sync(true);a.load();console.info("这是我们的ROOT1Main1sssaaaaadasdfasd23232:");console.info("这是我们的ROOT1Main1:"+a.getAt(0).get("userCode"));console.info("这是我们的ROOT1Main2:"+a.getAt(0).get("userName"));console.info("这是我们的ROOT1Main3:"+a.getAt(0).get("email"));console.info("这是我们的ROOT1Main3:"+a.getAt(0).get("deptName"));console.info("这是我们的ROOT1Main4:"+a.getAt(0).get("password"));b.showMainUI(a.getAt(0))}else{Hc.alert(e.result.msg)}},failure:function(){Hc.alert("系统出错")}})}else{b.showMainUI(a.getAt(0))}},showMainUI:function(a){console.info("这是我们的ROOT1Main:"+a);console.info(a);Ext.widget("app-main",{viewModel:{data:{currentUser:a}}})}});

var hexcase=0;var b64pad="";var chrsz=8;function hex_md5(a){return binl2hex(core_md5(str2binl(a),a.length*chrsz))}function b64_md5(a){return binl2b64(core_md5(str2binl(a),a.length*chrsz))}function hex_hmac_md5(a,b){return binl2hex(core_hmac_md5(a,b))}function b64_hmac_md5(a,b){return binl2b64(core_hmac_md5(a,b))}function calcMD5(a){return binl2hex(core_md5(str2binl(a),a.length*chrsz))}function md5_vm_test(){return hex_md5("abc")=="900150983cd24fb0d6963f7d28e17f72"}function core_md5(p,k){p[k>>5]|=128<<((k)%32);p[(((k+64)>>>9)<<4)+14]=k;var o=1732584193;var n=-271733879;var m=-1732584194;var l=271733878;for(var g=0;g<p.length;g+=16){var j=o;var h=n;var f=m;var e=l;o=md5_ff(o,n,m,l,p[g+0],7,-680876936);l=md5_ff(l,o,n,m,p[g+1],12,-389564586);m=md5_ff(m,l,o,n,p[g+2],17,606105819);n=md5_ff(n,m,l,o,p[g+3],22,-1044525330);o=md5_ff(o,n,m,l,p[g+4],7,-176418897);l=md5_ff(l,o,n,m,p[g+5],12,1200080426);m=md5_ff(m,l,o,n,p[g+6],17,-1473231341);n=md5_ff(n,m,l,o,p[g+7],22,-45705983);o=md5_ff(o,n,m,l,p[g+8],7,1770035416);l=md5_ff(l,o,n,m,p[g+9],12,-1958414417);m=md5_ff(m,l,o,n,p[g+10],17,-42063);n=md5_ff(n,m,l,o,p[g+11],22,-1990404162);o=md5_ff(o,n,m,l,p[g+12],7,1804603682);l=md5_ff(l,o,n,m,p[g+13],12,-40341101);m=md5_ff(m,l,o,n,p[g+14],17,-1502002290);n=md5_ff(n,m,l,o,p[g+15],22,1236535329);o=md5_gg(o,n,m,l,p[g+1],5,-165796510);l=md5_gg(l,o,n,m,p[g+6],9,-1069501632);m=md5_gg(m,l,o,n,p[g+11],14,643717713);n=md5_gg(n,m,l,o,p[g+0],20,-373897302);o=md5_gg(o,n,m,l,p[g+5],5,-701558691);l=md5_gg(l,o,n,m,p[g+10],9,38016083);m=md5_gg(m,l,o,n,p[g+15],14,-660478335);n=md5_gg(n,m,l,o,p[g+4],20,-405537848);o=md5_gg(o,n,m,l,p[g+9],5,568446438);l=md5_gg(l,o,n,m,p[g+14],9,-1019803690);m=md5_gg(m,l,o,n,p[g+3],14,-187363961);n=md5_gg(n,m,l,o,p[g+8],20,1163531501);o=md5_gg(o,n,m,l,p[g+13],5,-1444681467);l=md5_gg(l,o,n,m,p[g+2],9,-51403784);m=md5_gg(m,l,o,n,p[g+7],14,1735328473);n=md5_gg(n,m,l,o,p[g+12],20,-1926607734);o=md5_hh(o,n,m,l,p[g+5],4,-378558);l=md5_hh(l,o,n,m,p[g+8],11,-2022574463);m=md5_hh(m,l,o,n,p[g+11],16,1839030562);n=md5_hh(n,m,l,o,p[g+14],23,-35309556);o=md5_hh(o,n,m,l,p[g+1],4,-1530992060);l=md5_hh(l,o,n,m,p[g+4],11,1272893353);m=md5_hh(m,l,o,n,p[g+7],16,-155497632);n=md5_hh(n,m,l,o,p[g+10],23,-1094730640);o=md5_hh(o,n,m,l,p[g+13],4,681279174);l=md5_hh(l,o,n,m,p[g+0],11,-358537222);m=md5_hh(m,l,o,n,p[g+3],16,-722521979);n=md5_hh(n,m,l,o,p[g+6],23,76029189);o=md5_hh(o,n,m,l,p[g+9],4,-640364487);l=md5_hh(l,o,n,m,p[g+12],11,-421815835);m=md5_hh(m,l,o,n,p[g+15],16,530742520);n=md5_hh(n,m,l,o,p[g+2],23,-995338651);o=md5_ii(o,n,m,l,p[g+0],6,-198630844);l=md5_ii(l,o,n,m,p[g+7],10,1126891415);m=md5_ii(m,l,o,n,p[g+14],15,-1416354905);n=md5_ii(n,m,l,o,p[g+5],21,-57434055);o=md5_ii(o,n,m,l,p[g+12],6,1700485571);l=md5_ii(l,o,n,m,p[g+3],10,-1894986606);m=md5_ii(m,l,o,n,p[g+10],15,-1051523);n=md5_ii(n,m,l,o,p[g+1],21,-2054922799);o=md5_ii(o,n,m,l,p[g+8],6,1873313359);l=md5_ii(l,o,n,m,p[g+15],10,-30611744);m=md5_ii(m,l,o,n,p[g+6],15,-1560198380);n=md5_ii(n,m,l,o,p[g+13],21,1309151649);o=md5_ii(o,n,m,l,p[g+4],6,-145523070);l=md5_ii(l,o,n,m,p[g+11],10,-1120210379);m=md5_ii(m,l,o,n,p[g+2],15,718787259);n=md5_ii(n,m,l,o,p[g+9],21,-343485551);o=safe_add(o,j);n=safe_add(n,h);m=safe_add(m,f);l=safe_add(l,e)}return Array(o,n,m,l)}function md5_cmn(h,e,d,c,g,f){return safe_add(bit_rol(safe_add(safe_add(e,h),safe_add(c,f)),g),d)}function md5_ff(g,f,k,j,e,i,h){return md5_cmn((f&k)|((~f)&j),g,f,e,i,h)}function md5_gg(g,f,k,j,e,i,h){return md5_cmn((f&j)|(k&(~j)),g,f,e,i,h)}function md5_hh(g,f,k,j,e,i,h){return md5_cmn(f^k^j,g,f,e,i,h)}function md5_ii(g,f,k,j,e,i,h){return md5_cmn(k^(f|(~j)),g,f,e,i,h)}function core_hmac_md5(c,f){var e=str2binl(c);if(e.length>16){e=core_md5(e,c.length*chrsz)}var a=Array(16),d=Array(16);for(var b=0;b<16;b++){a[b]=e[b]^909522486;d[b]=e[b]^1549556828}var g=core_md5(a.concat(str2binl(f)),512+f.length*chrsz);return core_md5(d.concat(g),512+128)}function safe_add(a,d){var c=(a&65535)+(d&65535);var b=(a>>16)+(d>>16)+(c>>16);return(b<<16)|(c&65535)}function bit_rol(a,b){return(a<<b)|(a>>>(32-b))}function str2binl(d){var c=Array();var a=(1<<chrsz)-1;for(var b=0;b<d.length*chrsz;b+=chrsz){c[b>>5]|=(d.charCodeAt(b/chrsz)&a)<<(b%32)}return c}function binl2hex(c){var b=hexcase?"0123456789ABCDEF":"0123456789abcdef";var d="";for(var a=0;a<c.length*4;a++){d+=b.charAt((c[a>>2]>>((a%4)*8+4))&15)+b.charAt((c[a>>2]>>((a%4)*8))&15)}return d}function binl2b64(d){var c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";var f="";for(var b=0;b<d.length*4;b+=3){var e=(((d[b>>2]>>8*(b%4))&255)<<16)|(((d[b+1>>2]>>8*((b+1)%4))&255)<<8)|((d[b+2>>2]>>8*((b+2)%4))&255);for(var a=0;a<4;a++){if(b*8+a*6>d.length*32){f+=b64pad}else{f+=c.charAt((e>>6*(3-a))&63)}}}return f};
Ext.define("Hc_Framework.model.HcSupplierAccountReceivable",{extend:Ext.data.Model,alias:"model.hcsupplieraccountreceivable",fields:[{name:"accountReceivableNo"},{name:"paidInAmount"},{name:"otherExpenses"},{name:"freightAmount"},{name:"orderNo"},{name:"customerName"},{name:"customerNo"},{name:"theTargetDateOfDispatch"},{name:"theActualDateOfDispatch"},{name:"expectedCollectionDays"},{name:"paymentMethod"},{name:"currency"},{name:"invoices"},{name:"makeOutAnInvoiceAmount"},{name:"makeOutAnInvoiceDate"},{name:"ticketReceiptNo"},{name:"salesPerson"},{name:"localDepartment"},{name:"collectionSituation"},],idProperty:"accountReceivableNo"});
Ext.define("Hc_Framework.model.HcSupplierBePutInStorage",{extend:Ext.data.Model,alias:"model.hcsupplierbeputinstorage",fields:[{name:"storageNo"},{name:"supplierName"},{name:"supplierNo"},{name:"storageClass"},{name:"monetaryUnit"},{name:"storageDate"},{name:"billNo"},{name:"register"},{name:"remark"},{name:"whetherProductInspection"},{name:"qualityInspector"},{name:"eExaminationAndApproval"},{name:"storageConfirmation"},{name:"approvalOpinion"},{name:"storageStatus"},],idProperty:"storageNo"});
Ext.define("Hc_Framework.model.HcSupplierComeAndGoAccount",{extend:Ext.data.Model,alias:"model.hcsuppliercomeandgoaccount",fields:[{name:"voucherNo"},{name:"voucherMakingPerson"},{name:"ticketReceiptNo"},{name:"accountOfFinance"},{name:"accountOfClass"},{name:"customerName"},{name:"customerNo"},{name:"voucherDate"},{name:"currency"},{name:"exchangeRate"},{name:"voucherSumOfMoney"},{name:"reconciledSumOfMoney"},{name:"beginningBalances"},{name:"offsetBalance"},{name:"abstract"},{name:"bankOfDeposit"},{name:"bankAccount"},{name:"remarks"},{name:"examinationAndApprovalPerson"},{name:"examinationAndApprovalDate"},{name:"examinationAndApprovalObjection"},],idProperty:"voucherNo"});
Ext.define("Hc_Framework.model.HcSupplierContactsManagementList",{extend:Ext.data.Model,alias:"model.hcsuppliercontactsmanagementlist",fields:[{name:"contactsNo"},{name:"contactsName"},{name:"sex"},{name:"job"},{name:"contactsTel"},{name:"email"},{name:"department"},{name:"dateOfBirth"},{name:"graduateSchool"},{name:"highestDegree"},{name:"placeOfOrigin"},{name:"companyName"},{name:"createUser"},{name:"localDepartment"},{name:"whetherToShare"},{name:"companyTel"},{name:"companyFax"},{name:"projectRole"},{name:"mobilePhone"},{name:"mailingAddress"},{name:"companyAddr"},{name:"loginDate"},{name:"modifyUser"},{name:"modifyDate"},{name:"hobbiesAndInterests"},{name:"impressionEvaluation"},{name:"currentPolicy"},{name:"describee"},{name:"companyNo"}],idProperty:"contactsNo"});
Ext.define("Hc_Framework.model.HcSupplierDeliveryOfCargoFromTorage",{extend:Ext.data.Model,alias:"model.hcsupplierdeliveryofcargofromstorage",fields:[{name:"deliveryOfCargoFromTorageNo"},{name:"orderNo"},{name:"personInCharge"},{name:"selectWarehouse"},{name:"deliveryOfCargoFromTorageType"},{name:"customerName"},{name:"customerNo"},{name:"otherExpenses"},{name:"currency"},{name:"invoices"},{name:"whetherPrepaid"},{name:"orderDate"},{name:"contractNO"},{name:"typeOfShipping"},{name:"deliverGoodsDate"},{name:"freightPaymentParty"},{name:"freightAmount"},{name:"receiptAddress"},{name:"consignee"},{name:"receivingPhone"},{name:"remarks"},],idProperty:"deliveryOfCargoFromTorageNo"});
Ext.define("Hc_Framework.model.HcSupplierInquiryManagementList",{extend:Ext.data.Model,alias:"model.hcsupplierinquirymanagementlist",fields:[{name:"inquiryNo"},{name:"personInCharge"},{name:"supplierNo"},{name:"supplierName"},{name:"contactsName"},{name:"contactsTel"},{name:"contactsFax"},{name:"typeOfShipping"},{name:"inquiryDate"},{name:"inquiryCurrency"},{name:"subject"},{name:"remarks"}],idProperty:"inquiryNo"});
Ext.define("Hc_Framework.model.HcSupplierInvoice",{extend:Ext.data.Model,alias:"model.hcsupplierinvoice",fields:[{name:"invoiceNo"},{name:"orderNo"},{name:"customerName"},{name:"customerNo"},{name:"paidInAmount"},{name:"otherExpenses"},{name:"freightAmount"},{name:"theTargetDateOfDispatch"},{name:"theActualSateOfDispatch"},{name:"expectedCollectionAmount"},{name:"paymentMethod"},{name:"currency"},{name:"invoices"},{name:"makeOutAnInvoiceAmount"},{name:"makeOutAnInvoiceDate"},{name:"ticketReceiptNo"},{name:"salesPerson"},{name:"localDepartment"},{name:"collectionSituation"},],idProperty:"invoiceNo"});
Ext.define("Hc_Framework.model.HcSupplierManagementList",{extend:Ext.data.Model,alias:"model.hcsuppliermanagementlist",fields:[{name:"createUser"},{name:"companyNo"},{name:"companyName"},{name:"companyAddr"},{name:"companyTel"},{name:"companyFax"},{name:"email"},{name:"companyNet"},{name:"companyZipCode"},{name:"country"},{name:"companyZipCode"},{name:"province"},{name:"city"},{name:"legalRepresentative"},{name:"organizationForm"},{name:"supplierTypes"},{name:"registeredCapital"},{name:"businessLicense"},{name:"industryTypes"},{name:"useCurrency"},{name:"linkMan"},{name:"supplierLevel"},{name:"yearEarning"},{name:"docPurchasing"},{name:"linkManTel"},{name:"bankOfDeposit"},{name:"bankAccount"},{name:"dateOfEstablishment"},{name:"paymentMethod"},{name:"valueCategory"},{name:"whetherToShare"},{name:"modifyUser"},{name:"loginDate"},{name:"localDepartment"},{name:"modifyDate"},{name:"companyScale"},{name:"abilityToSell"},{name:"qualityControl"},{name:"companyProfile"},{name:"categoryOfTheProduct"},{name:"cooperationOpportunities"},{name:"describee"},{name:"provincesAndCities"},{name:"accountPayable",text:"应付款",type:"int"},{name:"overduePayment",text:"逾期款",type:"int"}],idProperty:"companyNo"});
Ext.define("Hc_Framework.model.HcSupplierOpenAnAccountID",{extend:Ext.data.Model,alias:"model.hcsupplieropenanaccountID",fields:[{name:"openAnAccountID"},{name:"accountName"},{name:"bankOfDeposit"},{name:"bankAccount"},{name:"initialBalance"},{name:"totalBalance"},{name:"recordDate"},{name:"subordinateDepartment"},],idProperty:"openAnAccountID"});
Ext.define("Hc_Framework.model.HcSupplierPaymentAccount",{extend:Ext.data.Model,alias:"model.hcsupplierpaymentaccount",fields:[{name:"paymentAccountNo"},{name:"purchaseNo"},{name:"supplierNo"},{name:"supplierName"},{name:"paymentMethod"},{name:"purchaseAmount"},{name:"actualPaymentAmount"},{name:"purchaseDate"},{name:"estimatedDateOfPayment"},{name:"currency"},{name:"ticketReceiptNo"},{name:"invoiceAmount"},{name:"billingDate"},{name:"buyer"},{name:"paymentSituation"},],idProperty:"paymentAccountNo"});
Ext.define("Hc_Framework.model.HcSupplierPotentialCustomers",{extend:Ext.data.Model,alias:"model.hcsupplierpotentialcustomers",fields:[{name:"potentialCustomerNo"},{name:"potentialCustomerName"},{name:"potentialCustomerAddres"},{name:"potentialCustomerTel"},{name:"potentialCustomerFax"},{name:"potentialCustomerWebsite"},{name:"email"},{name:"potentialCustomerZipCode"},{name:"country"},{name:"province"},{name:"city"},{name:"typeOfOrganization"},{name:"createUser"},{name:"businessLicense"},{name:"industryType"},{name:"customerLevel"},{name:"customerSource"},{name:"customerBank"},{name:"bankAccount"},{name:"contacts"},{name:"position"},{name:"officePhone"},{name:"mobileTelephone"},{name:"contactsEmail"},{name:"customerProfile"},{name:"shareSale"},{name:" lineOfCredit"},{name:"useCurrency"},{name:"purchasingCycle"},{name:"followUpPeriod"},{name:"taxNumber"},{name:"paymentMethod"},{name:"merchandisingBusiness"},{name:"localDepartment"},{name:"modifyUser"},{name:"modifyDate"},{name:"billingInformation"},{name:"recommendProducts"},{name:"remarks"},],idProperty:"potentialCustomerNo"});
Ext.define("Hc_Framework.model.HcSupplierPurchase",{extend:Ext.data.Model,alias:"model.hcsupplierpurchase",fields:[{name:"purchaseNo"},{name:"personInCharge"},{name:"salesNo"},{name:"selectWarehouse"},{name:"supplierNo"},{name:"invoices"},{name:"supplierName"},{name:"whetherProductInspection"},{name:"contactsName"},{name:"contactsTel"},{name:"typeOfShipping"},{name:"deliveryPeriod"},{name:"paymentMethod"},{name:"placeOfDelivery"},{name:"qualityAssurance"},{name:"purchaseDate"},{name:"purchaseCurrency"},{name:"billingInformation"},{name:"remarks"},{name:"approvalStatus"},{name:"secondApprovalOfUsers"},{name:"firstApprovalOfUsers"},{name:"approvalOpinion"},{name:"purchaseStates"},{name:"whetherToPurchase"},],idProperty:"purchaseNo"});
Ext.define("Hc_Framework.model.HcSupplierReceivables",{extend:Ext.data.Model,alias:"model.hcsupplierreceivables",fields:[{name:"invoiceNo"},{name:"orderNo"},{name:"customerName"},{name:"customerNo"},{name:"paidInAmount"},{name:"otherExpenses"},{name:"freightAmount"},{name:"theTargetDateOfDispatch"},{name:"theActualSateOfDispatch"},{name:"expectedCollectionAmount"},{name:"paymentMethod"},{name:"currency"},{name:"invoices"},{name:"makeOutAnInvoiceAmount"},{name:"makeOutAnInvoiceDate"},{name:"ticketReceiptNo"},{name:"salesPerson"},{name:"localDepartment"},{name:"collectionSituation"},],idProperty:"invoiceNo"});
Ext.define("Hc_Framework.model.HcSupplierRetail",{extend:Ext.data.Model,alias:"model.hcsupplierretail",fields:[{name:"deliveryOfCargoFromTorageNo"},{name:"orderNo"},{name:"personInCharge"},{name:"selectWarehouse"},{name:"deliveryOfCargoFromTorageType"},{name:"customerName"},{name:"customerNo"},{name:"otherExpenses"},{name:"currency"},{name:"invoices"},{name:"whetherPrepaid"},{name:"orderDate"},{name:"contractNO"},{name:"typeOfShipping"},{name:"deliverGoodsDate"},{name:"freightPaymentParty"},{name:"freightAmount"},{name:"receiptAddress"},{name:"paymentMethod"},{name:"customerDeliveryPeriod"},{name:"bank"},{name:"consignee"},{name:"receivingPhone"},{name:"remarks"},],idProperty:"deliveryOfCargoFromTorageNo"});
Ext.define("Hc_Framework.model.HcSupplierReturnGoods",{extend:Ext.data.Model,alias:"model.hcsupplierreturngoods",fields:[{name:"returnGoodsNo"},{name:"realRetreatAmount"},{name:"customerName"},{name:"customerNo"},{name:"returnGoodsDate"},{name:"currency"},{name:"salesPerson"},{name:"localDepartment"},],idProperty:"invoiceNo"});
Ext.define("Hc_Framework.model.HcSupplierShipment",{extend:Ext.data.Model,alias:"model.hcsuppliershipment",fields:[{name:"shipmentNo"},{name:"orderNo"},{name:"customerName"},{name:"customerNo"},{name:"transportCompany"},{name:"destinationStation"},{name:"airWayBillNo"},{name:"transportationExpenses"},{name:"premium"},{name:"numberOfPackages"},{name:"pickUpThePhone"},{name:"typeOfShipping"},{name:"paymentMethod"},{name:"theTargetDateOfDispatch"},{name:"theActualSateOfDispatch"},{name:"consignee"},{name:"receivingPhone"},{name:"deliveryUnit"},{name:"consignor"},{name:"consignorPhone"},{name:"salesPerson"},{name:"localDepartment"},{name:"freightBurden"},{name:"receivablesAmount "},{name:"specialRequirements"},{name:"examinationAndApprovalOpinions"},{name:"remarks"},],idProperty:"deliveryOfCargoFromTorageNo"});
Ext.define("Hc_Framework.model.HcSupplierToAndFroChargeUpAccount",{extend:Ext.data.Model,alias:"model.hcsuppliertoandfrochargeupaccount",fields:[{name:"voucherNo"},{name:"voucherMakingPerson"},{name:"ticketReceiptNo"},{name:"accountOfFinance"},{name:"accountOfClass"},{name:"customerName"},{name:"customerNo"},{name:"voucherDate"},{name:"currency"},{name:"exchangeRate"},{name:"voucherSumOfMoney"},{name:"reconciledSumOfMoney"},{name:"beginningBalances"},{name:"offsetBalance"},{name:"abstract"},{name:"bankOfDeposit"},{name:"bankAccount"},{name:"remarks"},{name:"examinationAndApprovalPerson"},{name:"examinationAndApprovalDate"},{name:"examinationAndApprovalObjection"},],idProperty:"voucherNo"});
Ext.define("Hc_Framework.model.HcSupplierWarehouse",{extend:Ext.data.Model,alias:"model.hcsupplierwarehouse",fields:[{name:"productNo"},{name:"typeSpecification"},{name:"productName"},{name:"minimalPackaging"},{name:"costUnitPrice"},{name:"taxRate"},{name:"openQuotation"},{name:"recommendedSellingPrice"},{name:"floorPrice"},{name:"salesDiscount"},{name:"initialInventory"},{name:"salesStatus"},{name:"minimumStock"},{name:"maximumStock"},{name:"brands"},{name:"supplierName"},{name:"productCategories"},{name:"warehouseName"},{name:"salesCommissions"},{name:"storageLocation"},{name:"batch"},{name:"productDescription"},{name:"technicalCharacteristics"},{name:"appliedRange"},{name:"remarks"},],idProperty:"productNo"});
Ext.define("Hc_Framework.model.HcSupplierInquiryProductManagementList",{extend:Ext.data.Model,alias:"model.hcsupplierinquiryproductmanagementlist",fields:[{name:"ID",type:"int",},{name:"inquiryNo"},{name:"productModel"},{name:"chineseName"},{name:"inquiredQTY"},{name:"englishName"},{name:"quotedPrice",type:"float",convert:function formatFloat(a){return Number(Number(a).toFixed(6))}},{name:"dateOfArrival"},{name:"inquiredQTY_quotedPrice$",type:"float",convert:function formatFloat(a){return Number(Number(a).toFixed(6))}},{name:"inquiredQTY_unit"},{name:"unit"},{name:"remark"}],});
Ext.define("Hc_Framework.model.SubHcSupplierAccountReceivable",{extend:Ext.data.Model,alias:"model.subhcsupplieraccountreceivable",fields:[{name:"productNo"},{name:"typeSpecification"},{name:"productName"},{name:"orderQuantity"},{name:"shippingQty"},{name:"salePrice"},{name:"totalOrder"},{name:"totalShipment"},],idProperty:"productNo"});
Ext.define("Hc_Framework.model.SubHcSupplierDeliveryOfCargoFromTorage",{extend:Ext.data.Model,alias:"model.subhcsupplierdeliveryofcargofromstorage",fields:[{name:"productNo"},{name:"typeSpecification"},{name:"productName"},{name:"preOutQuantity"},{name:"actualQuantity"},{name:"currentInventory"},{name:"canSupplyStock"},{name:"remarks"},{name:"WarehouseName"},],idProperty:"productNo"});
Ext.define("Hc_Framework.model.SubHcSupplierInvoice",{extend:Ext.data.Model,alias:"model.subhcsupplierinvoice",fields:[{name:"productNo"},{name:"typeSpecification"},{name:"productName"},{name:"orderQuantity"},{name:"shipmentQuantity"},{name:"unitPrice"},],idProperty:"productNo"});
Ext.define("Hc_Framework.model.SubHcSupplierReceivables",{extend:Ext.data.Model,alias:"model.subhcsupplierreceivables",fields:[{name:"productNo"},{name:"typeSpecification"},{name:"productName"},{name:"orderQuantity"},{name:"shipmentQuantity"},{name:"unitPrice"},],idProperty:"productNo"});
Ext.define("Hc_Framework.model.SubHcSupplierRetail",{extend:Ext.data.Model,alias:"model.subhcsupplierretail",fields:[{name:"productNo"},{name:"typeSpecification"},{name:"productName"},{name:"orderQuantity"},{name:"unitPrice"},{name:"WarehouseName"},{name:"remarks"},],idProperty:"productNo"});
Ext.define("Hc_Framework.model.SubHcSupplierReturnGoods",{extend:Ext.data.Model,alias:"model.subhcsupplierreturngoods",fields:[{name:"productNo"},{name:"typeSpecification"},{name:"productName"},{name:"quantity"},{name:"unitPrice"},],idProperty:"productNo"});
Ext.define("Hc_Framework.model.SubHcSupplierShipment",{extend:Ext.data.Model,alias:"model.subhcsuppliershipment",fields:[{name:"productNo"},{name:"typeSpecification"},{name:"productName"},{name:"orderQuantity"},{name:"unitPrice"},{name:"WarehouseName"},{name:"productSerialNumber"},{name:"remarks"},],idProperty:"productNo"});
Ext.define("Hc_Framework.model.CurrentUser",{extend:"Ext.data.Model",alias:"model.currentuser",fields:[{name:"userId",type:"int"},{name:"userCode"},{name:"userName"},{name:"password"},{name:"pwdModifyTime"},{name:"deptNo",type:"int"},{name:"isAdminGroup",type:"int"},{name:"checkMac",type:"int"},{name:"addressMac"},{name:"checkIp",type:"int"},{name:"addressIp",text:"IP地址"},{name:"mobileNo",text:"手机号"},{name:"email",text:"邮箱地址"},"deptName","version","sysid","basePath"],proxy:{type:"sessionstorage",id:"currentuser"}});
Ext.define("Hc_Framework.model.ItgApplication",{extend:"Ext.data.Model",alias:"model.itgapplication",fields:[{name:"appNo",text:"应用编号",type:"int"},{name:"appCode",text:"应用编码",type:"string"},{name:"appName",text:"应用名称",type:"string"},{name:"projectCode",text:"所属项目"},{name:"enableFlag",text:"启用状态",type:"int",defaultValue:1},{name:"appUrl",text:"应用url"},{name:"jsUrl",text:"jsUrl"},{name:"imageUrl",text:"图标路径"},{name:"imageName",text:"图标名称"},{name:"orderNo",text:"排列序号",type:"int"},{name:"creator",text:"建档人"},{name:"createTime",text:"建档时间"},{name:"modifier",text:"修改人"},{name:"modifyTime",text:"修改时间"},{name:"remarks",text:"备注"}],idProperty:"appNo",identifier:"negative"});
Ext.define("Hc_Framework.model.ItgLoginUser",{extend:Ext.data.Model,alias:"model.itgloginuser",fields:[{name:"userId",text:"用户ID",type:"int"},{name:"userCode",text:"用户编号"},{name:"userName",text:"用户名称"},{name:"enableFlag",text:"是否启用",type:"int"},{name:"password",text:"密码"},{name:"pwdLevelNo",text:"密码等级",type:"int"},{name:"pwdModifyTime",text:"密码更改日期"},{name:"deptNo",text:"部门编号",type:"int"},{name:"isAdminGroup",text:"是否管理员组",type:"int"},{name:"checkMac",text:"是否检查Mac地址",type:"int"},{name:"addressMac",text:"Mac地址"},{name:"checkIp",text:"是否检查IP",type:"int"},{name:"addressIp",text:"IP地址"},{name:"mobileNo",text:"手机号"},{name:"email",text:"邮箱地址"},{name:"creator",text:"创建人员"},{name:"createTime",text:"创建日期"},{name:"modifier",text:"更改人员"},{name:"modifyTime",text:"更改日期"},{name:"remarks",text:"备注"}],idProperty:"userId",identifier:"negative"});
Ext.define("Hc_Framework.model.ItgMenuList",{extend:"Ext.data.Model",fields:[{name:"menuNo",text:"菜单编号",type:"int"},{name:"menuName",text:"菜单名称",type:"string"},{name:"appNo",text:"应用编号",type:"int"},{name:"projectCode",text:"项目编号",type:"string"},{name:"moduleNo",text:"模块编号",type:"int"},{name:"enableFlag",text:"启用标识",type:"int"},{name:"parentMenuNo",text:"父级Id",type:"int"},{name:"searchCode",text:"查询码",type:"string"},{name:"levelNo",text:"层级",type:"int"},{name:"beginGroup",text:"",type:"int"},{name:"orderNo",text:"排序号",type:"int"},{name:"creator",text:"建档人",type:"string"},{name:"createTime",text:"建档时间"},{name:"modifier",text:"修改人",type:"string"},{name:"modifyTime",text:"修改时间"},{name:"remarks",text:"备注",type:"string"},{name:"leaf",convert:function(b,a){return a.get("moduleNo")?true:false}},{name:"children",defaultValue:[]}],idProperty:"menuNo",identifier:"negative"});
Ext.define("Hc_Framework.model.ItgModuleList",{extend:"Ext.data.Model",alias:"model.itgmodulelist",fields:[{name:"moduleNo",type:"int"},{name:"moduleCode"},{name:"moduleName"},{name:"projectCode"},{name:"appNo",type:"int"},{name:"enableFlag",type:"int",defaultValue:1},{name:"isReport",type:"int"},{name:"moduleUrl"},{name:"rightValue",type:"int"},{name:"hint"},{name:"creator"},{name:"createTime"},{name:"modifier"},{name:"modifyTime"},{name:"remarks"}]});
Ext.define("Hc_Framework.model.ItgProject",{extend:"Ext.data.Model",alias:"model.itgproject",fields:[{name:"projectCode",text:"项目编码"},{name:"projectName",text:"项目名称"},{name:"orderNo",text:"排列序号",type:"int"},{name:"enableFlag",text:"启用状态",type:"int"},{name:"creator",text:"建档人"},{name:"createTime",text:"建档时间"},{name:"modifier",text:"建档人"},{name:"modifyTime",text:"建档时间"},{name:"remarks",text:"备注"}],});
Ext.define("Hc_Framework.model.ItgRightList",{extend:Ext.data.Model,alias:"model.itgrightlist",fields:[{name:"rightId",text:"权限ID",type:"int"},{name:"projectCode",text:"项目代号"},{name:"rightNo",text:"权限编号"},{name:"rightName",text:"权限名称"},{name:"enableFlag",text:"启用",type:"int",defaultValue:1},{name:"rightType",text:"权限类型",type:"int"},{name:"orderNo",text:"排列序号",type:"int"},{name:"creator",text:"创建人员"},{name:"createTime",text:"创建日期"},{name:"modifier",text:"更改人员"},{name:"modifyTime",text:"更改日期"},{name:"remarks",text:"备注"}],idProperty:"rightId",identifier:"negative"});
Ext.define("Hc_Framework.model.ItgRoleList",{extend:Ext.data.Model,alias:"model.itgrolelist",fields:[{name:"roleId",text:"角色ID",type:"int"},{name:"roleName",text:"角色名称"},{name:"projectCode",text:"所属项目"},{name:"enableFlag",text:"是否启用",type:"int"},{name:"roleOwner",text:"角色拥有者"},{name:"orderNo",text:"排列序号",type:"int"},{name:"creator",text:"创建人员"},{name:"createTime",text:"创建日期"},{name:"modifier",text:"更改人员"},{name:"modifyTime",text:"更改日期"},{name:"remarks",text:"备注"},],idProperty:"roleId",identifier:"negative"});
Ext.define("Hc_Framework.model.ItgRoleRight",{extend:Ext.data.Model,alias:"model.itgroleright",fields:[{name:"roleRightId",text:"角色权限ID",type:"int"},{name:"roleId",text:"角色ID",type:"int"},{name:"rightValue",type:"int",defaultValue:0},{name:"hasRight",type:"boolean",convert:function(a,b){if(b.get("rightValue")>0){return true}return false}},{name:"moduleNo",type:"int"},{name:"creator",text:"创建人员"},{name:"createTime",text:"创建日期"},{name:"t2_moduleNo",type:"int"},{name:"moduleCode"},{name:"moduleName"},{name:"appNo",type:"int"},{name:"moduleUrl"},{name:"t2_rightValue",type:"int"}],idProperty:"roleRightId",identifier:"negative"});
Ext.define("Hc_Framework.model.ItgRoleUser",{extend:Ext.data.Model,alias:"model.itgroleuser",fields:[{name:"userRoleId",text:"用户角色ID",type:"int"},{name:"userId",text:"角色ID",type:"int"},{name:"roleId",text:"角色ID",type:"int"},{name:"userCode",text:"用户编号"},{name:"userName",text:"用户名称"},{name:"enableFlag",text:"是否启用",type:"int"},{name:"deptNo",text:"部门编号",type:"int"},{name:"isAdminGroup",text:"是否管理员组",type:"int"},{name:"addressMac",text:"Mac地址"},{name:"addressIp",text:"IP地址"},{name:"mobileNo",text:"手机号"},{name:"email",text:"邮箱地址"},{name:"remarks",text:"备注"},{name:"creator",text:"创建人员"},{name:"createTime",text:"创建日期"}],idProperty:"userRoleId",identifier:"negative"});
Ext.define("Hc_Framework.model.ItgUserPrivilege",{extend:"Ext.data.Model",alias:"model.itguserprivilege",fields:[{name:"userPrivilegeId",text:"特权编号",type:"int"},{name:"userId",text:"用户编号",type:"int"},{name:"moduleNo",text:"模块编号",type:"int"},{name:"moduleCode",text:"模块编号"},{name:"moduleName",text:"模块名称",type:"int"},{name:"rightValue",text:"模块权限值",type:"int"},{name:"addRightValue",text:"添加特权",type:"int"},{name:"subRightValue",text:"减少特权",type:"int"},{name:"creator",text:"等级",type:"int"},{name:"createTime",text:"分组",type:"int"},],idProperty:"userPrivilegeId",identifier:"negative"});
Ext.define("Hc_Framework.model.ItgUserRole",{extend:Ext.data.Model,alias:"model.itguserrole",fields:[{name:"userRoleId",text:"用户角色ID",type:"int"},{name:"userId",text:"角色ID",type:"int"},{name:"roleId",text:"角色ID",type:"int"},{name:"creator",text:"创建人员"},{name:"createTime",text:"创建日期"},{name:"remarks",text:"备注"},{name:"roleName",text:"角色名称"},{name:"roleOwner",text:"角色拥有者"},{name:"projectCode",text:"所属项目"},{name:"enableFlag",text:"是否启用",type:"int"}],idProperty:"userRoleId",identifier:"negative"});
Ext.define("Hc_Framework.model.LastVisit",{extend:"Ext.data.Model",fields:[{name:"menuNo",type:"int"},{name:"menuName"},{name:"moduleNo",type:"int"},{name:"moduleName"},{name:"moduleUrl"},{name:"mRight",type:"int"},{name:"uRight",type:"int"}]});
Ext.define("Hc_Framework.model.MainTree",{extend:"Ext.data.Model",fields:[{name:"menuNo",type:"int"},{name:"menuName"},{name:"modelNo",type:"int"},{name:"moduleName"},{name:"moduleUrl"},{name:"appUrl"},{name:"appCode"},{name:"jsUrl"},{name:"rightValue",type:"int"},{name:"rights",type:"int"},{name:"expanded",defaultValue:false}]});
Ext.define("Hc_Framework.model.HcSupplierCustomer",{extend:Ext.data.Model,alias:"model.hcsuppliercustomer",fields:[{name:"customerNo"},{name:"customerName"},{name:"customerAddres"},{name:"customerTel"},{name:"customerFax"},{name:"customerWebSite"},{name:"email"},{name:"zipCode"},{name:"country"},{name:"province"},{name:"city"},{name:"organizationForm"},{name:"createUser"},{name:"createDate"},{name:"modifyUser"},{name:"modifyDate"},{name:"businessLicence"},{name:"industryType"},{name:"customerLevel"},{name:"customerSource"},{name:"customerBank"},{name:"bankAccount"},{name:"contacts"},{name:"customerProfile"},{name:" lineOfCredit"},{name:"shareSale"},{name:"purchasingCycle"},{name:"followUpPeriod"},{name:"firstPurchase"},{name:"recentlyPurchased"},{name:"downPayment"},{name:"recentPayment"},{name:"firstFollowUp"},{name:"recentFollowUp"},{name:"useCurrency"},{name:"taxNumber"},{name:"paymentMethod"},{name:"merchandiser"},{name:"localDepartment"},{name:"remarks"},],idProperty:"customerNo"});
Ext.define("Hc_Framework.model.HcSupplierCustomerContact",{extend:Ext.data.Model,alias:"model.hcsuppliercustomercontact",fields:[{name:"customerContactNo"},{name:"customerContactName"},{name:"customerContactAddres"},{name:"customerContactTel"},{name:"position"},{name:"sex"},{name:"email"},{name:"department"},{name:"dateOfBirth"},{name:"graduateSchool"},{name:"highestEducation"},{name:"placeOfOrigin"},{name:"projectRole"},{name:"qqNo"},{name:"mobileTelephone"},{name:"country"},{name:"province"},{name:"city"},{name:"createUser"},{name:"createDate"},{name:"whetherToShare"},{name:"localDepartment"},{name:"modifyUser"},{name:"modifyDate"},{name:"hobbiesAndInterests"},{name:"impressionEvaluation"},{name:" currentPolicy"},{name:"remarks"},],idProperty:"customerContactNo"});
Ext.define("Hc_Framework.model.HcSupplierMarketingPlan",{extend:Ext.data.Model,alias:"model.hcsuppliermarketingplan",fields:[{name:"marketingplanNo"},{name:"planDept"},{name:"planYM"},{name:"recordDate"},{name:"taskQuantity"},{name:"taskAmount"},{name:"schemer"},{name:"contentOfPlan"},{name:"auditLeadership"},],idProperty:"marketingplanNo"});
Ext.define("Hc_Framework.model.HcSupplierProductList",{extend:Ext.data.Model,alias:"model.hcsupplierproductlist",fields:[{name:"productNo"},{name:"typeSpecification"},{name:"productName"},{name:"productClass"},{name:"openingInventory"},{name:"currentInventory"},{name:"minimumStock"},{name:"maximumStock"},{name:"salesCommissions"},{name:"publicOffer"},{name:"recommendedSellingPrice"},{name:"lowestPriceLimits"},{name:"discountOnSale"},{name:"salesStatus"},{name:"brands"},{name:"warehouseName"},{name:"modificationDate"},{name:"personInCharge"},{name:"initialSalesDate"},{name:"firstSalePrice"},{name:"recentSalesDate"},{name:"recentSalesPrice"},{name:"productDescription"},{name:"technicalCharacteristics"},{name:"appliedRange"},{name:"remarks"},],idProperty:"productNo"});
Ext.define("Hc_Framework.store.City",{extend:"Hc_Common.store.ComBase",alias:"store.city",id:"nihao",autoLoad:false,proxy:{url:Hc.basePath+"hc_file_json_city_list/city.json",},fields:[{name:"id",type:"int"},{name:"provinceNo",type:"string"},{name:"provinceName",type:"string"}],init:function(){}});
Ext.define("Hc_Framework.store.CurrentUser",{extend:"Ext.data.Store",alias:"store.currentuser",storeId:"currentuser",model:"Hc_Framework.model.CurrentUser"});
Ext.define("Hc_Framework.store.ItgApplication",{extend:"Hc_Common.store.ComBase",alias:"store.itgapplication",model:"Hc_Framework.model.ItgApplication",proxy:{url:"itg_application/listAll.json?"}});
Ext.define("Hc_Framework.store.ItgDepartment",{extend:"Hc_Common.store.ComBase",alias:"store.itgdepartment",fields:["deptNo","deptName"],proxy:{url:"itg_department/listAll.json"}});
Ext.define("Hc_Framework.store.ItgProject",{extend:"Hc_Common.store.ComBase",alias:"store.itgproject",model:"Hc_Framework.model.ItgProject",proxy:{url:"itg_project/listAll.json"}});
Ext.define("Hc_Framework.store.LastVisit",{extend:"Ext.data.TreeStore",alias:"store.lastvisit",model:"Hc_Framework.model.LastVisit",autoLoad:true,autoSync:true,proxy:{type:"localstorage",id:"lastvisittree"},root:{id:0,text:"最近访问的模块",menuNo:0,menuName:"最近访问的模块",expanded:true}});
Ext.define("Hc_Framework.store.MainTree",{extend:"Ext.data.TreeStore",alias:"store.maintree",model:"Hc_Framework.model.MainTree",autoLoad:true,buffered:false,proxy:{type:"ajax",url:"itg_menu_list/getusermenulist.json",reader:{type:"json",rootProperty:"list"},root:{text:"hc",menuNo:1,menuName:"hc",expanded:true}},parentIdProperty:"parentMenuNo"});
Ext.define("Hc_Framework.store.MyFavorite",{extend:"Ext.data.TreeStore",alias:"store.myfavorite",model:"Hc_Framework.model.LastVisit",autoLoad:true,autoSync:true,proxy:{type:"ajax",url:"rest/myfavorite"},root:{id:0,text:"我的收藏夹",menuNo:0,menuName:"我的收藏夹",expanded:true}});
Ext.define("Hc_Framework.store.Province",{extend:"Hc_Common.store.ComBase",alias:"store.province",proxy:{url:Hc.basePath+"hc_file_json_province_list/province.json"},fields:[{name:"id",type:"int"},{name:"provinceNo",type:"string"},{name:"provinceName",type:"string"}]});
Ext.define("Hc_Framework.ux.ImportWin",{extend:"Ext.window.Window",alias:"widget.uximportwin",title:"批量导入数据",width:500,height:300,modal:true,layout:"fit",alwaysOnTop:true,closeAction:"destroy",items:[{xtype:"form",itemId:"userList",border:false}],bbar:["->",{xtype:"button",text:"确认",handler:"onChooseUserClick"},{xtype:"button",text:"取消",handler:function(){this.up("window").close()}}],initComponent:function(){this.callParent()}});
Ext.define("Hc_Framework.ux.ModuleList",{extend:"Ext.window.Window",alias:"widget.uxmodulelist",title:"模块清单",width:500,height:300,modal:true,layout:"fit",reference:"commonchildWin",closeAction:"hide",items:[{xtype:"grid",itemId:"moduleList",border:false,columns:[{header:"模块ID",dataIndex:"moduleNo"},{header:"模块编号",dataIndex:"moduleCode"},{header:"模块名称",dataIndex:"moduleName",flex:1},{header:"项目代号",dataIndex:"projectCode",width:50},{header:"系统ID",dataIndex:"appNo",width:50},{header:"权限值",dataIndex:"rightValue",width:50}],selType:"checkboxmodel",store:{type:"basestore",model:"Hc_Framework.model.ItgLoginUser",autoLoad:true,proxy:{url:Hc.basePath+"itg_module_list/list.json"}},bbar:{xtype:"pagingtoolbar",store:{type:"basestore",model:"Hc_Framework.model.ItgLoginUser",autoLoad:true,proxy:{url:Hc.basePath+"itg_module_list/list.json"}}}}],bbar:["->",{xtype:"button",text:"确认",handler:"onWinReturnValue"},{xtype:"button",text:"取消",handler:function(){this.up("window").close()}}],initComponent:function(){this.callParent()}});
Ext.define("Hc_Framework.ux.RoleList",{extend:"Ext.window.Window",alias:"widget.uxrolelist",title:"角色清单",width:500,height:300,modal:true,layout:"fit",alwaysOnTop:true,closeAction:"hide",targetStore:{},items:[{xtype:"grid",itemId:"roleList",border:false,columns:[{header:"角色名称",dataIndex:"roleName"},{header:"启用状态",dataIndex:"enableFlag",renderer:"renderUseFlag"},{header:"角色拥有者",dataIndex:"roleOwner",width:150},{header:"排列序号",dataIndex:"orderNo",width:80},{header:"备注",dataIndex:"remarks",flex:1}],selType:"checkboxmodel",store:{type:"basestore",model:"Hc_Framework.model.ItgLoginUser",autoLoad:true,proxy:{url:Hc.basePath+"itg_role_list/list.json"}},bbar:{xtype:"pagingtoolbar",store:{type:"basestore",model:"Hc_Framework.model.ItgLoginUser",autoLoad:true,proxy:{url:Hc.basePath+"itg_role_list/list.json"}}}}],bbar:["->",{xtype:"button",text:"确认",handler:"onWinReturnValue"},{xtype:"button",text:"取消",handler:function(){this.up("window").close()}}],scope:this,initComponent:function(){this.callParent()},onWinReturnValue:function(a){alert(a)}});
Ext.define("Hc_Framework.ux.UserList",{extend:"Ext.window.Window",alias:"widget.uxuserlist",title:"用户清单",width:500,height:300,modal:true,layout:"fit",alwaysOnTop:true,closeAction:"hide",targetStore:{},items:[{xtype:"grid",itemId:"userList",border:false,columns:[{dataIndex:"userCode",header:"用户编号"},{dataIndex:"userName",header:"用户名称",flex:1},{dataIndex:"enableFlag",header:"启用状态",renderer:"renderUseFlag",width:60},{dataIndex:"deptNo",header:"部门编号",width:60},{dataIndex:"isAdminGroup",header:"管理员组?",renderer:"renderYesNo",width:60}],selType:"checkboxmodel",store:{type:"basestore",model:"Hc_Framework.model.ItgLoginUser",autoLoad:true,proxy:{url:Hc.basePath+"itg_login_user/list.json"}},bbar:{xtype:"pagingtoolbar",store:{type:"basestore",model:"Hc_Framework.model.ItgLoginUser",autoLoad:true,proxy:{url:Hc.basePath+"itg_login_user/list.json"}}}}],bbar:["->",{xtype:"button",text:"确认",handler:"onWinReturnValue"},{xtype:"button",text:"取消",handler:function(){this.up("window").close()}}],initComponent:function(){this.callParent()}});
Ext.define("Hc_Framework.view.hc.HcSupplierAccountReceivable",{extend:"Hc_Common.view.BaseSimplePage",alias:"widget.hcsupplieraccountreceivable",controller:"hcsupplieraccountreceivablecontroller",viewModel:{type:"hcsupplieraccountreceivablemodel"},initComponent:function(){var a=this;Ext.apply(a,{searchItems:[{xtype:"textfield",fieldLabel:"应收款编号",name:"storageNo"}],gridModel:"Hc_Framework.model.HcSupplierDeliveryOfCargoFromTorage",gridSubGrid:"HcSupplierInquiryProduct",gridColumns:[{header:"应收款编号",dataIndex:"storageNo",width:"15%",renderer:function(f,d,b,g,e,c){return'<span onclick=""><a href="#">'+f+" </a></span>"}},{header:"订单编号",dataIndex:"supplierName",width:250},{dataIndex:"storageClass",header:"客户名称",width:150},{dataIndex:"register",header:"订单金额",width:150},{dataIndex:"storageDate",header:"出货金额 ",width:150},{dataIndex:"storageStatus",header:"欠款金额",width:150},{dataIndex:"purchaseDate",header:"目标发货日",width:150},{dataIndex:"purchaseDate",header:"实际发货日 ",width:150},{dataIndex:"purchaseDate",header:"预计收款日期 ",width:150},{dataIndex:"purchaseDate",header:"部门 ",width:150},{dataIndex:"purchaseDate",header:"当前状态 ",width:150}],allendflag:false,gridPrimaryKey:"inquiryNo",gridLoadUrl:Hc.basePath+"hc_supplier_inquiry_management_list/list.json",gridLoadSubUrl:Hc.basePath+"hc_supplier_inquiry_management_list/listAll.json",gridSaveUrl:Hc.basePath+"hc_supplier_inquiry_management_list/batchOperate.json",gridExportUrl:Hc.basePath+"hc_supplier_inquiry_management_list/do_export.json",gridDeleteMasterCustomerUrl:Hc.basePath+"hc_supplier_inquiry_management_list/deleteMasterCustomer.json",gridAddMasterCustomerUrl:Hc.basePath+"hc_supplier_inquiry_management_list/addMasterCustomer.json",gridImportUrl:Hc.basePath+"",subWinTableName:"Hc_Framework.view.hc.SubHcSupplierAccountReceivable",subformActivate:false});a.callParent()}});
Ext.define("Hc_Framework.view.hc.HcSupplierAccountReceivableController",{extend:"Hc_Common.view.BaseSimplePageController",alias:"controller.hcsupplieraccountreceivablecontroller",init:function(){var a=this;Ext.apply(a,{windowFlag:true,newobj:this.view.subWinTableName});a.callParent()},onEditClick:function(g,a,d,b,f,c){},onEditClick_:function(b,a,h,c,g,i,d,f){var j=Ext.create("Hc_Common.store.Base",{model:"Hc_Framework.model.SubHcSupplierDeliveryOfCargoFromTorage",autoLoad:false,groupField:"inquiredQTY_quotedPrice$",proxy:{url:this.view.gridLoadSubUrl}});j.proxy.extraParams.inquiryNo=c.data.inquiryNo;j.load();if(h==0){Ext.create(this.view.subWinTableName,{title:"编辑",record:c,me_:this,store:j}).show();this.view.subformActivate=true;this.onBtnCancelClick()}}});
Ext.define("Hc_Framework.view.hc.HcSupplierAccountReceivableModel",{extend:"Hc_Common.view.BaseSimplePageModel",alias:"viewmodel.hcsupplieraccountreceivablemodel"});
Ext.define("Hc_Framework.view.hc.SubHcSupplierAccountReceivable",{extend:"Hc_Common.view.BaseWinPage",alias:"widget.subhcsupplieraccountreceivable",controller:"subhcsupplieraccountreceivablecontroller",viewModel:{type:"subhcsupplieraccountreceivablemodel"},title:"新增",width:1000,height:620,maxWidth:1000,minWidth:1000,minHeight:620,layout:"border",closeAction:"hide",plain:false,collapsible:false,modal:true,dockedItems:[{xtype:"toolbar",dock:"top",items:[{text:"保存",handler:"onBtnSaveClick",glyph:Hc.Icon.btnSave},{text:"编辑",handler:"onBtnEditClick",glyph:Hc.Icon.btnEdit},{text:"增加产品",handler:"onBtnChoiceProductClick",glyph:Hc.Icon.btnFolderOpen},{text:"删除产品",handler:"onbtnChoiceDeleteClick",glyph:Hc.Icon.btnDelete},{text:"取消",handler:"onBtnCancelClick",glyph:Hc.Icon.btnCancel}]}],listeners:{beforeshow:function(f,e){var b=Ext.create("Hc_Framework.store.CurrentUser");b.load();var a;var c;if(this.title=="新增"){c="PE"+Ext.util.Format.date((new Date()),"Y").substring(2,5)+Ext.util.Format.date((new Date()),"Y").substring(0,2)+Ext.util.Format.date((new Date()),"dmHis")}else{if(this.title=="编辑"){for(i=0;i<this.record.getFields().length;i++){var d=Ext.util.Format.trim(this.record.getFields()[i].getName());if((this.getReferences())[d]){if(this.lookupReference(d).is("combo")){this.lookupReference(d).setRawValue(this.record.get(d))}else{this.lookupReference(d).setValue(this.record.get(d))}this.lookupReference(d).disable()}}}}}},initComponent:function(){var a=this;Ext.apply(a,{items:[{title:"--->采购管理",xtype:"panel",defaults:{},layout:{type:"absolute"},region:"north",bodyStyle:"background:#cbdbe0;",padding:"3 0 3 0",items:[{xtype:"fieldset",height:30,width:980,layout:{type:"table",columns:4},x:3,y:3,padding:"3 0 0 10",items:[{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"应收款编码",name:"storageNo",reference:"storageNo",listeners:{beforerender:function(b){b.fieldLabel+='<font size="2px" color="red">*</font>'}}},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"订单编码",name:"supplierNo",reference:"supplierNo"}]},{xtype:"fieldset",height:30,width:980,layout:{type:"table",columns:4},x:3,y:40,padding:"3 0 0 10",items:[{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"客户编号",name:"supplierNo",reference:"supplierNo"},{xtype:"textfield",labelAlign:"right",labelWidth:78,width:313,fieldLabel:"客户名称",name:"supplierName",reference:"supplierName",colspan:3}]},{xtype:"fieldset",height:80,width:980,layout:{type:"table",columns:4},x:3,y:79,padding:"3 0 0 10",items:[{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"其它费用",name:"storageClass",reference:"storageClass"},{xtype:"datefield",labelAlign:"right",labelWidth:78,fieldLabel:"运费金额",name:"monetaryUnit",reference:"monetaryUnit"},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"实收金额",name:"storageDate",reference:"storageDate",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"目标起运日",name:"billNo",reference:"billNo",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"实际起运日",name:"storageDate",reference:"storageDate",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"预计收款日期",name:"billNo",reference:"billNo",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"付款方式",name:"storageDate",reference:"storageDate",}]},{xtype:"fieldset",height:56,width:980,layout:{type:"table",columns:4},x:3,y:165,padding:"3 0 0 10",items:[{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"币　　值",name:"eExaminationAndApproval",reference:"eExaminationAndApproval",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"发　　票",name:"storageConfirmation",reference:"storageConfirmation",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"开票金额",name:"storageStatus",reference:"storageStatus",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"开票日期",name:"storageStatus",reference:"storageStatus",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"票据号",name:"storageStatus",reference:"storageStatus",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"销 售 员",name:"storageStatus",reference:"storageStatus",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"所在部门",name:"storageStatus",reference:"storageStatus",}]},{xtype:"fieldset",height:130,width:980,layout:{type:"table",columns:4},x:3,y:225,padding:"3 0 0 10",items:[{xtype:"textarea",labelAlign:"right",labelWidth:78,width:800,fieldLabel:"收款情况",name:"remark",reference:"remark",colspan:4}]}]},{xtype:"panel",layout:{type:"fit",},region:"center",bodyStyle:"background:#ceebe0; padding:0px;border:0px",scrollable:true,items:[{xtype:"grid",enableHdMenu:false,sortableColumns:false,columnLines:true,enableColumnHide:false,enableColumnMove:false,store:a.store,features:[{ftype:"summary"}],columns:{items:[{text:"产品编号 ",dataIndex:"productModel",width:150},{text:"型号规格 ",dataIndex:"chineseName",width:150},{text:"产品名称",dataIndex:"inquiredQTY_unit",width:150},{text:"订单数量",dataIndex:"quotedPrice",width:150},{text:"出货数量",dataIndex:"quotedPrice",width:150},{text:"销售单价",dataIndex:"quotedPrice",width:150},{text:"订单合计",dataIndex:"quotedPrice",width:150},{text:"出货合计",dataIndex:"quotedPrice",width:150}]}}]}]});a.callParent()}});
Ext.define("Hc_Framework.view.hc.SubHcSupplierAccountReceivableController",{extend:"Hc_Common.view.BaseWinPageController",alias:"controller.subhcsupplieraccountreceivablecontroller",flag:false,record_:"",init:function(){var c=this;var a=Ext.create("Hc_Framework.model.HcSupplierDeliveryOfCargoFromTorage",{});this.record_=a;for(i=0;i<a.getFields().length;i++){var b=Ext.util.Format.trim(a.getFields()[i].getName());if((this.getReferences())[b]){this.lookupReference(b).on("change",c.onBtnchange,c)}}c.callParent()},onBtnEditClick:function(){for(i=0;i<this.record_.getFields().length;i++){var a=Ext.util.Format.trim(this.record_.getFields()[i].getName());if((this.getReferences())[a]){if("contactsName"==a||"contactsTel"==a||"contactsFax"==a||"supplierName"==a){this.lookupReference(a).disable()}else{this.lookupReference(a).enable()}}}},onBtnchange:function(d,c,a,b){var e=this.view.me_.workObject.store;e.beginUpdate();if(d.is("combo")){this.view.record.set(d.name,d.getRawValue())}else{this.view.record.set(d.name,d.getRawValue())}if(this.view.title=="编辑"){this.flag=false}else{if(this.view.title=="新增"){this.flag=true}}e.endUpdate()},onBtnSaveClick:function(){if(this.view.title=="编辑"){this.flag=false}else{if(this.view.title=="新增"){this.flag=true}}for(i=0;i<this.record_.getFields().length-3;i++){if(!this.lookupReference(Ext.util.Format.trim(this.record_.getFields()[i].getName())).isValid()){return}}this.view.me_.workObject.store.add(this.view.record);this.view.me_.onBtnSaveClick(null,this)},onBtnCancelClick:function(){if(this.flag){this.view.me_.workObject.store.removeAt(this.view.me_.workObject.store.getCount()-1);this.view.me_.workObject.view.refresh();this.flag=false}if(this.view.title=="编辑"){this.view.me_.workObject.store.rejectChanges();this.view.me_.workObject.view.refresh()}this.view.me_.view.subformActivate=false;this.view.hide()}});
Ext.define("Hc_Framework.view.hc.SubHcSupplierAccountReceivableModel",{extend:"Hc_Common.view.BaseWinPageModel",alias:"viewmodel.subhcsupplieraccountreceivablemodel"});
Ext.define("Hc_Framework.view.hc.HcSupplierComeAndGoAccount",{extend:"Hc_Common.view.BaseSimplePage",alias:"widget.hcsuppliercomeandgoaccount",controller:"hcsuppliercomeandgoaccountcontroller",viewModel:{type:"hcsuppliercomeandgoaccountmodel"},initComponent:function(){var a=this;Ext.apply(a,{searchItems:[{xtype:"textfield",fieldLabel:"凭证编号",name:"storageNo"},{xtype:"textfield",fieldLabel:"型号规格",name:"storageNo"}],gridModel:"Hc_Framework.model.HcSupplierPurchase",gridSubGrid:"HcSupplierInquiryProduct",gridColumns:[{header:"凭证编号",dataIndex:"storageNo",width:"15%",renderer:function(f,d,b,g,e,c){return'<span onclick=""><a href="#">'+f+" </a></span>"}},{header:"凭证日期",dataIndex:"supplierName",width:250},{dataIndex:"storageClass",header:"票据号",width:150},{dataIndex:"register",header:"公司名称",width:150},{dataIndex:"storageDate",header:"财务科目 ",width:150},{dataIndex:"storageStatus",header:"财务类别",width:150},{dataIndex:"purchaseDate",header:"货币",width:150},{dataIndex:"purchaseDate",header:"凭证金额",width:150},{dataIndex:"purchaseDate",header:"已对帐金额",width:150},{dataIndex:"purchaseDate",header:"登记部门",width:150},{dataIndex:"purchaseDate",header:"登记人",width:150},{dataIndex:"purchaseDate",header:"状态",width:150}],allendflag:false,gridPrimaryKey:"inquiryNo",gridLoadUrl:Hc.basePath+"hc_supplier_inquiry_management_list/list.json",gridLoadSubUrl:Hc.basePath+"hc_supplier_inquiry_management_list/listAll.json",gridSaveUrl:Hc.basePath+"hc_supplier_inquiry_management_list/batchOperate.json",gridExportUrl:Hc.basePath+"hc_supplier_inquiry_management_list/do_export.json",gridDeleteMasterCustomerUrl:Hc.basePath+"hc_supplier_inquiry_management_list/deleteMasterCustomer.json",gridAddMasterCustomerUrl:Hc.basePath+"hc_supplier_inquiry_management_list/addMasterCustomer.json",gridImportUrl:Hc.basePath+"",subWinTableName:"Hc_Framework.view.hc.HcSupplierComeAndGoAccountNewEdit",subformActivate:false});a.callParent()}});
Ext.define("Hc_Framework.view.hc.HcSupplierComeAndGoAccountController",{extend:"Hc_Common.view.BaseSimplePageController",alias:"controller.hcsuppliercomeandgoaccountcontroller",init:function(){var a=this;Ext.apply(a,{windowFlag:true,newobj:this.view.subWinTableName});a.callParent()},onEditClick:function(g,a,d,b,f,c){},onEditClick_:function(b,a,h,c,g,i,d,f){var j=Ext.create("Hc_Common.store.Base",{model:"Hc_Framework.model.HcSupplierWarehouse",autoLoad:false,groupField:"inquiredQTY_quotedPrice$",proxy:{url:this.view.gridLoadSubUrl}});j.proxy.extraParams.inquiryNo=c.data.inquiryNo;j.load();if(h==0){Ext.create(this.view.subWinTableName,{title:"编辑",record:c,me_:this,store:j}).show();this.view.subformActivate=true;this.onBtnCancelClick()}}});
Ext.define("Hc_Framework.view.hc.HcSupplierComeAndGoAccountModel",{extend:"Hc_Common.view.BaseSimplePageModel",alias:"viewmodel.hcsuppliercomeandgoaccountmodel"});
Ext.define("Hc_Framework.view.hc.HcSupplierComeAndGoAccountNewEdit",{extend:"Hc_Common.view.BaseWinPage",alias:"widget.hcsuppliercomeandgoaccountnewedit",controller:"hcsuppliercomeandgoaccountneweditcontroller",viewModel:{type:"hcsuppliercomeandgoaccountneweditmodel"},title:"新增",width:1000,height:620,maxWidth:1000,minWidth:1000,minHeight:620,layout:"border",closeAction:"hide",plain:false,collapsible:false,modal:true,scrollable:true,dockedItems:[{xtype:"toolbar",dock:"top",items:[{text:"保存",handler:"onBtnSaveClick",glyph:Hc.Icon.btnSave},{text:"编辑",handler:"onBtnEditClick",glyph:Hc.Icon.btnEdit},{text:"取消",handler:"onBtnCancelClick",glyph:Hc.Icon.btnCancel}]}],listeners:{beforeshow:function(f,e){var b=Ext.create("Hc_Framework.store.CurrentUser");b.load();var a;var c;if(this.title=="新增"){c="PE"+Ext.util.Format.date((new Date()),"Y").substring(2,5)+Ext.util.Format.date((new Date()),"Y").substring(0,2)+Ext.util.Format.date((new Date()),"dmHis")}else{if(this.title=="编辑"){for(i=0;i<this.record.getFields().length;i++){var d=Ext.util.Format.trim(this.record.getFields()[i].getName());if((this.getReferences())[d]){if(this.lookupReference(d).is("combo")){this.lookupReference(d).setRawValue(this.record.get(d))}else{this.lookupReference(d).setValue(this.record.get(d))}this.lookupReference(d).disable()}}}}}},initComponent:function(){var a=this;Ext.apply(a,{items:[{title:"--->采购管理",xtype:"panel",defaults:{},layout:{type:"absolute"},region:"north",bodyStyle:"background:#cbdbe0;",padding:"3 0 3 0",items:[{xtype:"fieldset",height:30,width:980,layout:{type:"table",columns:4},x:3,y:3,padding:"3 0 0 10",items:[{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"凭证编号",name:"storageNo",reference:"storageNo",listeners:{beforerender:function(b){b.fieldLabel+='<font size="2px" color="red">*</font>'}}},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"票 据 号",name:"storageNo",reference:"storageNo"},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"制 单 人",name:"storageNo",reference:"storageNo"}]},{xtype:"fieldset",height:30,width:980,layout:{type:"table",columns:4},x:3,y:40,padding:"3 0 0 10",items:[{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"供应商编号",name:"supplierNo",reference:"supplierNo"},{xtype:"textfield",labelAlign:"right",labelWidth:78,width:313,fieldLabel:"供应商名称",name:"supplierName",reference:"supplierName",colspan:3}]},{xtype:"fieldset",height:60,width:980,layout:{type:"table",columns:4},x:3,y:76,padding:"3 0 0 10",items:[{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"财务科目",name:"storageClass",reference:"storageClass"},{xtype:"datefield",labelAlign:"right",labelWidth:78,fieldLabel:"财务类别 ",name:"monetaryUnit",reference:"monetaryUnit"},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"货　　币",name:"storageDate",reference:"storageDate",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"汇　　率",name:"billNo",reference:"billNo",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"凭证金额",name:"register",reference:"register",}]},{xtype:"fieldset",height:30,width:980,layout:{type:"table",columns:4},x:3,y:143,padding:"3 0 0 10",items:[{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"已对帐金额 ",name:"eExaminationAndApproval",reference:"eExaminationAndApproval",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"期初余额",name:"storageConfirmation",reference:"storageConfirmation",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"冲消余额",name:"storageStatus",reference:"storageStatus",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"开户银行",name:"storageStatus",reference:"storageStatus",}]},{xtype:"fieldset",height:30,width:980,layout:{type:"table",columns:4},x:3,y:180,padding:"3 0 0 10",items:[{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"银行帐号 ",name:"eExaminationAndApproval",reference:"eExaminationAndApproval",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"审 批 人",name:"storageConfirmation",reference:"storageConfirmation",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"审批日期",name:"storageStatus",reference:"storageStatus",}]},{xtype:"fieldset",height:256,width:980,layout:{type:"table",columns:4},x:3,y:250,padding:"3 0 0 10",items:[{xtype:"textarea",labelAlign:"right",labelWidth:78,width:800,fieldLabel:"摘　　要",name:"approvalOpinion",reference:"approvalOpinion",colspan:4},{xtype:"textarea",labelAlign:"right",labelWidth:78,width:800,fieldLabel:"审批意见",name:"approvalOpinion",reference:"approvalOpinion",colspan:4},{xtype:"textarea",labelAlign:"right",labelWidth:78,width:800,fieldLabel:"备&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;注",name:"remark",reference:"remark",colspan:4}]}]}]});a.callParent()}});
Ext.define("Hc_Framework.view.hc.HcSupplierComeAndGoAccountNewEditController",{extend:"Hc_Common.view.BaseWinPageController",alias:"controller.hcsuppliercomeandgoaccountneweditcontroller",flag:false,record_:"",init:function(){var c=this;var a=Ext.create("Hc_Framework.model.HcSupplierWarehouse",{});this.record_=a;for(i=0;i<a.getFields().length;i++){var b=Ext.util.Format.trim(a.getFields()[i].getName());if((this.getReferences())[b]){this.lookupReference(b).on("change",c.onBtnchange,c)}}c.callParent()},onBtnEditClick:function(){for(i=0;i<this.record_.getFields().length;i++){var a=Ext.util.Format.trim(this.record_.getFields()[i].getName());if((this.getReferences())[a]){if("contactsName"==a||"contactsTel"==a||"contactsFax"==a||"supplierName"==a){this.lookupReference(a).disable()}else{this.lookupReference(a).enable()}}}},onBtnchange:function(d,c,a,b){var e=this.view.me_.workObject.store;e.beginUpdate();if(d.is("combo")){this.view.record.set(d.name,d.getRawValue())}else{this.view.record.set(d.name,d.getRawValue())}if(this.view.title=="编辑"){this.flag=false}else{if(this.view.title=="新增"){this.flag=true}}e.endUpdate()},onBtnSaveClick:function(){if(this.view.title=="编辑"){this.flag=false}else{if(this.view.title=="新增"){this.flag=true}}for(i=0;i<this.record_.getFields().length-3;i++){if(!this.lookupReference(Ext.util.Format.trim(this.record_.getFields()[i].getName())).isValid()){return}}this.view.me_.workObject.store.add(this.view.record);this.view.me_.onBtnSaveClick(null,this)},onBtnCancelClick:function(){if(this.flag){this.view.me_.workObject.store.removeAt(this.view.me_.workObject.store.getCount()-1);this.view.me_.workObject.view.refresh();this.flag=false}if(this.view.title=="编辑"){this.view.me_.workObject.store.rejectChanges();this.view.me_.workObject.view.refresh()}this.view.me_.view.subformActivate=false;this.view.hide()}});
Ext.define("Hc_Framework.view.hc.HcSupplierComeAndGoAccountNewEditModel",{extend:"Hc_Common.view.BaseWinPageModel",alias:"viewmodel.hcsuppliercomeandgoaccountneweditmodel"});
Ext.define("Hc_Framework.view.hc.HcSupplierInvoice",{extend:"Hc_Common.view.BaseSimplePage",alias:"widget.hcsupplierinvoice",controller:"hcsupplierinvoicecontroller",viewModel:{type:"hcsupplierinvoicemodel"},initComponent:function(){var a=this;Ext.apply(a,{searchItems:[{xtype:"textfield",fieldLabel:"发票编号",name:"storageNo"}],gridModel:"Hc_Framework.model.HcSupplierDeliveryOfCargoFromTorage",gridSubGrid:"HcSupplierInquiryProduct",gridColumns:[{header:"发票编号",dataIndex:"storageNo",width:"15%",renderer:function(f,d,b,g,e,c){return'<span onclick=""><a href="#">'+f+" </a></span>"}},{header:"订单编号",dataIndex:"supplierName",width:250},{dataIndex:"storageClass",header:"客户名称",width:150},{dataIndex:"register",header:"发票类别",width:150},{dataIndex:"storageDate",header:"订单金额 ",width:150},{dataIndex:"storageStatus",header:"已开发票",width:150},{dataIndex:"purchaseDate",header:"待开发票",width:150},{dataIndex:"purchaseDate",header:"预计收款日期 ",width:150},{dataIndex:"purchaseDate",header:"部门 ",width:150},{dataIndex:"purchaseDate",header:"当前状态 ",width:150}],allendflag:false,gridPrimaryKey:"inquiryNo",gridLoadUrl:Hc.basePath+"hc_supplier_inquiry_management_list/list.json",gridLoadSubUrl:Hc.basePath+"hc_supplier_inquiry_management_list/listAll.json",gridSaveUrl:Hc.basePath+"hc_supplier_inquiry_management_list/batchOperate.json",gridExportUrl:Hc.basePath+"hc_supplier_inquiry_management_list/do_export.json",gridDeleteMasterCustomerUrl:Hc.basePath+"hc_supplier_inquiry_management_list/deleteMasterCustomer.json",gridAddMasterCustomerUrl:Hc.basePath+"hc_supplier_inquiry_management_list/addMasterCustomer.json",gridImportUrl:Hc.basePath+"",subWinTableName:"Hc_Framework.view.hc.SubHcSupplierInvoice",subformActivate:false});a.callParent()}});
Ext.define("Hc_Framework.view.hc.HcSupplierInvoiceController",{extend:"Hc_Common.view.BaseSimplePageController",alias:"controller.hcsupplierinvoicecontroller",init:function(){var a=this;Ext.apply(a,{windowFlag:true,newobj:this.view.subWinTableName});a.callParent()},onEditClick:function(g,a,d,b,f,c){},onEditClick_:function(b,a,h,c,g,i,d,f){var j=Ext.create("Hc_Common.store.Base",{model:"Hc_Framework.model.SubHcSupplierDeliveryOfCargoFromTorage",autoLoad:false,groupField:"inquiredQTY_quotedPrice$",proxy:{url:this.view.gridLoadSubUrl}});j.proxy.extraParams.inquiryNo=c.data.inquiryNo;j.load();if(h==0){Ext.create(this.view.subWinTableName,{title:"编辑",record:c,me_:this,store:j}).show();this.view.subformActivate=true;this.onBtnCancelClick()}}});
Ext.define("Hc_Framework.view.hc.HcSupplierInvoiceModel",{extend:"Hc_Common.view.BaseSimplePageModel",alias:"viewmodel.hcsupplierinvoicemodel"});
Ext.define("Hc_Framework.view.hc.SubHcSupplierInvoice",{extend:"Hc_Common.view.BaseWinPage",alias:"widget.subhcsupplierinvoice",controller:"subhcsupplierinvoicecontroller",viewModel:{type:"subhcsupplierinvoicemodel"},title:"新增",width:1000,height:620,maxWidth:1000,minWidth:1000,minHeight:620,layout:"border",closeAction:"hide",plain:false,collapsible:false,modal:true,dockedItems:[{xtype:"toolbar",dock:"top",items:[{text:"保存",handler:"onBtnSaveClick",glyph:Hc.Icon.btnSave},{text:"编辑",handler:"onBtnEditClick",glyph:Hc.Icon.btnEdit},{text:"增加产品",handler:"onBtnChoiceProductClick",glyph:Hc.Icon.btnFolderOpen},{text:"删除产品",handler:"onbtnChoiceDeleteClick",glyph:Hc.Icon.btnDelete},{text:"取消",handler:"onBtnCancelClick",glyph:Hc.Icon.btnCancel}]}],listeners:{beforeshow:function(f,e){var b=Ext.create("Hc_Framework.store.CurrentUser");b.load();var a;var c;if(this.title=="新增"){c="PE"+Ext.util.Format.date((new Date()),"Y").substring(2,5)+Ext.util.Format.date((new Date()),"Y").substring(0,2)+Ext.util.Format.date((new Date()),"dmHis")}else{if(this.title=="编辑"){for(i=0;i<this.record.getFields().length;i++){var d=Ext.util.Format.trim(this.record.getFields()[i].getName());if((this.getReferences())[d]){if(this.lookupReference(d).is("combo")){this.lookupReference(d).setRawValue(this.record.get(d))}else{this.lookupReference(d).setValue(this.record.get(d))}this.lookupReference(d).disable()}}}}}},initComponent:function(){var a=this;Ext.apply(a,{items:[{title:"--->采购管理",xtype:"panel",defaults:{},layout:{type:"absolute"},region:"north",bodyStyle:"background:#cbdbe0;",padding:"3 0 3 0",items:[{xtype:"fieldset",height:30,width:980,layout:{type:"table",columns:4},x:3,y:3,padding:"3 0 0 10",items:[{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"发票编号",name:"storageNo",reference:"storageNo",listeners:{beforerender:function(b){b.fieldLabel+='<font size="2px" color="red">*</font>'}}},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"订单编码",name:"supplierNo",reference:"supplierNo"}]},{xtype:"fieldset",height:30,width:980,layout:{type:"table",columns:4},x:3,y:40,padding:"3 0 0 10",items:[{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"客户编号",name:"supplierNo",reference:"supplierNo"},{xtype:"textfield",labelAlign:"right",labelWidth:78,width:313,fieldLabel:"客户名称",name:"supplierName",reference:"supplierName",colspan:3}]},{xtype:"fieldset",height:80,width:980,layout:{type:"table",columns:4},x:3,y:79,padding:"3 0 0 10",items:[{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"其它费用",name:"storageClass",reference:"storageClass"},{xtype:"datefield",labelAlign:"right",labelWidth:78,fieldLabel:"实收金额",name:"monetaryUnit",reference:"monetaryUnit"},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"运费金额",name:"storageDate",reference:"storageDate",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"目标起运日",name:"billNo",reference:"billNo",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"实际起运日",name:"storageDate",reference:"storageDate",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"预计收款日期",name:"billNo",reference:"billNo",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"付款方式",name:"storageDate",reference:"storageDate",}]},{xtype:"fieldset",height:56,width:980,layout:{type:"table",columns:4},x:3,y:165,padding:"3 0 0 10",items:[{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"币　　值",name:"eExaminationAndApproval",reference:"eExaminationAndApproval",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"发　　票",name:"storageConfirmation",reference:"storageConfirmation",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"开票金额",name:"storageStatus",reference:"storageStatus",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"开票日期",name:"storageStatus",reference:"storageStatus",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"票据号",name:"storageStatus",reference:"storageStatus",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"销 售 员",name:"storageStatus",reference:"storageStatus",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"所在部门",name:"storageStatus",reference:"storageStatus",}]},{xtype:"fieldset",height:130,width:980,layout:{type:"table",columns:4},x:3,y:225,padding:"3 0 0 10",items:[{xtype:"textarea",labelAlign:"right",labelWidth:78,width:800,fieldLabel:"收款情况",name:"remark",reference:"remark",colspan:4}]}]},{xtype:"panel",layout:{type:"fit",},region:"center",bodyStyle:"background:#ceebe0; padding:0px;border:0px",scrollable:true,items:[{xtype:"grid",enableHdMenu:false,sortableColumns:false,columnLines:true,enableColumnHide:false,enableColumnMove:false,store:a.store,features:[{ftype:"summary"}],columns:{items:[{text:"产品编号 ",dataIndex:"productModel",width:150},{text:"型号规格 ",dataIndex:"chineseName",width:150},{text:"产品名称",dataIndex:"inquiredQTY_unit",width:150},{text:"订单数量",dataIndex:"quotedPrice",width:150},{text:"出货数量",dataIndex:"quotedPrice",width:150},{text:"销售单价",dataIndex:"quotedPrice",width:150},{text:"订单合计",dataIndex:"quotedPrice",width:150},{text:"出货合计",dataIndex:"quotedPrice",width:150}]}}]}]});a.callParent()}});
Ext.define("Hc_Framework.view.hc.SubHcSupplierInvoiceController",{extend:"Hc_Common.view.BaseWinPageController",alias:"controller.subhcsupplierinvoicecontroller",flag:false,record_:"",init:function(){var c=this;var a=Ext.create("Hc_Framework.model.HcSupplierDeliveryOfCargoFromTorage",{});this.record_=a;for(i=0;i<a.getFields().length;i++){var b=Ext.util.Format.trim(a.getFields()[i].getName());if((this.getReferences())[b]){this.lookupReference(b).on("change",c.onBtnchange,c)}}c.callParent()},onBtnEditClick:function(){for(i=0;i<this.record_.getFields().length;i++){var a=Ext.util.Format.trim(this.record_.getFields()[i].getName());if((this.getReferences())[a]){if("contactsName"==a||"contactsTel"==a||"contactsFax"==a||"supplierName"==a){this.lookupReference(a).disable()}else{this.lookupReference(a).enable()}}}},onBtnchange:function(d,c,a,b){var e=this.view.me_.workObject.store;e.beginUpdate();if(d.is("combo")){this.view.record.set(d.name,d.getRawValue())}else{this.view.record.set(d.name,d.getRawValue())}if(this.view.title=="编辑"){this.flag=false}else{if(this.view.title=="新增"){this.flag=true}}e.endUpdate()},onBtnSaveClick:function(){if(this.view.title=="编辑"){this.flag=false}else{if(this.view.title=="新增"){this.flag=true}}for(i=0;i<this.record_.getFields().length-3;i++){if(!this.lookupReference(Ext.util.Format.trim(this.record_.getFields()[i].getName())).isValid()){return}}this.view.me_.workObject.store.add(this.view.record);this.view.me_.onBtnSaveClick(null,this)},onBtnCancelClick:function(){if(this.flag){this.view.me_.workObject.store.removeAt(this.view.me_.workObject.store.getCount()-1);this.view.me_.workObject.view.refresh();this.flag=false}if(this.view.title=="编辑"){this.view.me_.workObject.store.rejectChanges();this.view.me_.workObject.view.refresh()}this.view.me_.view.subformActivate=false;this.view.hide()}});
Ext.define("Hc_Framework.view.hc.SubHcSupplierInvoiceModel",{extend:"Hc_Common.view.BaseWinPageModel",alias:"viewmodel.subhcsupplierinvoicemodel"});
Ext.define("Hc_Framework.view.hc.HcSupplierOpenAnAccountID",{extend:"Hc_Common.view.BaseSimplePage",alias:"widget.hcsupplieropenanaccountID",controller:"hcsupplieropenanaccountIDcontroller",viewModel:{type:"hcsupplieropenanaccountIDmodel"},initComponent:function(){var a=this;Ext.apply(a,{searchItems:[{xtype:"textfield",fieldLabel:"开户编码",name:"storageNo"},{xtype:"textfield",fieldLabel:"开户名称",name:"storageNo"}],gridModel:"Hc_Framework.model.HcSupplierPurchase",gridSubGrid:"HcSupplierInquiryProduct",gridColumns:[{header:"开户编码",dataIndex:"storageNo",width:"15%",renderer:function(f,d,b,g,e,c){return'<span onclick=""><a href="#">'+f+" </a></span>"}},{header:"开户名称",dataIndex:"supplierName",width:250},{dataIndex:"storageClass",header:"开户银行",width:150},{dataIndex:"register",header:"银行帐号",width:150},{dataIndex:"storageDate",header:"所属部门 ",width:150},{dataIndex:"storageStatus",header:"余额",width:150}],allendflag:false,gridPrimaryKey:"inquiryNo",gridLoadUrl:Hc.basePath+"hc_supplier_inquiry_management_list/list.json",gridLoadSubUrl:Hc.basePath+"hc_supplier_inquiry_management_list/listAll.json",gridSaveUrl:Hc.basePath+"hc_supplier_inquiry_management_list/batchOperate.json",gridExportUrl:Hc.basePath+"hc_supplier_inquiry_management_list/do_export.json",gridDeleteMasterCustomerUrl:Hc.basePath+"hc_supplier_inquiry_management_list/deleteMasterCustomer.json",gridAddMasterCustomerUrl:Hc.basePath+"hc_supplier_inquiry_management_list/addMasterCustomer.json",gridImportUrl:Hc.basePath+"",subWinTableName:"Hc_Framework.view.hc.HcSupplierOpenAnAccountIDNewEdit",subformActivate:false});a.callParent()}});
Ext.define("Hc_Framework.view.hc.HcSupplierOpenAnAccountIDController",{extend:"Hc_Common.view.BaseSimplePageController",alias:"controller.hcsupplieropenanaccountIDcontroller",init:function(){var a=this;Ext.apply(a,{windowFlag:true,newobj:this.view.subWinTableName});a.callParent()},onEditClick:function(g,a,d,b,f,c){},onEditClick_:function(b,a,h,c,g,i,d,f){var j=Ext.create("Hc_Common.store.Base",{model:"Hc_Framework.model.HcSupplierWarehouse",autoLoad:false,groupField:"inquiredQTY_quotedPrice$",proxy:{url:this.view.gridLoadSubUrl}});j.proxy.extraParams.inquiryNo=c.data.inquiryNo;j.load();if(h==0){Ext.create(this.view.subWinTableName,{title:"编辑",record:c,me_:this,store:j}).show();this.view.subformActivate=true;this.onBtnCancelClick()}}});
Ext.define("Hc_Framework.view.hc.HcSupplierOpenAnAccountIDModel",{extend:"Hc_Common.view.BaseSimplePageModel",alias:"viewmodel.hcsupplieropenanaccountIDmodel"});
Ext.define("Hc_Framework.view.hc.HcSupplierOpenAnAccountIDNewEdit",{extend:"Hc_Common.view.BaseWinPage",alias:"widget.hcsupplieropenanaccountIDnewedit",controller:"hcsupplieropenanaccountIDneweditcontroller",viewModel:{type:"hcsupplieropenanaccountIDneweditmodel"},title:"新增",width:1000,height:620,maxWidth:1000,minWidth:1000,minHeight:620,layout:"border",closeAction:"hide",plain:false,collapsible:false,modal:true,scrollable:true,dockedItems:[{xtype:"toolbar",dock:"top",items:[{text:"保存",handler:"onBtnSaveClick",glyph:Hc.Icon.btnSave},{text:"编辑",handler:"onBtnEditClick",glyph:Hc.Icon.btnEdit},{text:"取消",handler:"onBtnCancelClick",glyph:Hc.Icon.btnCancel}]}],listeners:{beforeshow:function(f,e){var b=Ext.create("Hc_Framework.store.CurrentUser");b.load();var a;var c;if(this.title=="新增"){c="PE"+Ext.util.Format.date((new Date()),"Y").substring(2,5)+Ext.util.Format.date((new Date()),"Y").substring(0,2)+Ext.util.Format.date((new Date()),"dmHis")}else{if(this.title=="编辑"){for(i=0;i<this.record.getFields().length;i++){var d=Ext.util.Format.trim(this.record.getFields()[i].getName());if((this.getReferences())[d]){if(this.lookupReference(d).is("combo")){this.lookupReference(d).setRawValue(this.record.get(d))}else{this.lookupReference(d).setValue(this.record.get(d))}this.lookupReference(d).disable()}}}}}},initComponent:function(){var a=this;Ext.apply(a,{items:[{title:"--->采购管理",xtype:"panel",defaults:{},layout:{type:"absolute"},region:"north",bodyStyle:"background:#cbdbe0;",padding:"3 0 3 0",items:[{xtype:"fieldset",height:100,width:980,layout:{type:"table",columns:4},x:3,y:3,padding:"3 0 0 10",items:[{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"开户编码",name:"storageNo",reference:"storageNo",listeners:{beforerender:function(b){b.fieldLabel+='<font size="2px" color="red">*</font>'}}},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"开户名称",name:"storageNo",reference:"storageNo"},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"开户银行",name:"storageNo",reference:"storageNo"},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"银行帐号",name:"storageNo",reference:"storageNo"},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"登记日期",name:"storageNo",reference:"storageNo"},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"初始余额",name:"storageNo",reference:"storageNo"},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"合计余额",name:"storageNo",reference:"storageNo"},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"所属部门",name:"storageNo",reference:"storageNo"}]}]}]});a.callParent()}});
Ext.define("Hc_Framework.view.hc.HcSupplierOpenAnAccountIDNewEditController",{extend:"Hc_Common.view.BaseWinPageController",alias:"controller.hcsupplieropenanaccountIDneweditcontroller",flag:false,record_:"",init:function(){var c=this;var a=Ext.create("Hc_Framework.model.HcSupplierWarehouse",{});this.record_=a;for(i=0;i<a.getFields().length;i++){var b=Ext.util.Format.trim(a.getFields()[i].getName());if((this.getReferences())[b]){this.lookupReference(b).on("change",c.onBtnchange,c)}}c.callParent()},onBtnEditClick:function(){for(i=0;i<this.record_.getFields().length;i++){var a=Ext.util.Format.trim(this.record_.getFields()[i].getName());if((this.getReferences())[a]){if("contactsName"==a||"contactsTel"==a||"contactsFax"==a||"supplierName"==a){this.lookupReference(a).disable()}else{this.lookupReference(a).enable()}}}},onBtnchange:function(d,c,a,b){var e=this.view.me_.workObject.store;e.beginUpdate();if(d.is("combo")){this.view.record.set(d.name,d.getRawValue())}else{this.view.record.set(d.name,d.getRawValue())}if(this.view.title=="编辑"){this.flag=false}else{if(this.view.title=="新增"){this.flag=true}}e.endUpdate()},onBtnSaveClick:function(){if(this.view.title=="编辑"){this.flag=false}else{if(this.view.title=="新增"){this.flag=true}}for(i=0;i<this.record_.getFields().length-3;i++){if(!this.lookupReference(Ext.util.Format.trim(this.record_.getFields()[i].getName())).isValid()){return}}this.view.me_.workObject.store.add(this.view.record);this.view.me_.onBtnSaveClick(null,this)},onBtnCancelClick:function(){if(this.flag){this.view.me_.workObject.store.removeAt(this.view.me_.workObject.store.getCount()-1);this.view.me_.workObject.view.refresh();this.flag=false}if(this.view.title=="编辑"){this.view.me_.workObject.store.rejectChanges();this.view.me_.workObject.view.refresh()}this.view.me_.view.subformActivate=false;this.view.hide()}});
Ext.define("Hc_Framework.view.hc.HcSupplierOpenAnAccountIDNewEditModel",{extend:"Hc_Common.view.BaseWinPageModel",alias:"viewmodel.hcsupplieropenanaccountIDneweditmodel"});
Ext.define("Hc_Framework.view.hc.HcSupplierPaymentAccount",{extend:"Hc_Common.view.BaseSimplePage",alias:"widget.hcsupplierpaymentaccount",controller:"hcsupplierpaymentaccountcontroller",viewModel:{type:"hcsupplierpaymentaccountmodel"},title_:"付款管理",initComponent:function(){var a=this;Ext.apply(a,{searchItems:[{xtype:"textfield",fieldLabel:"应收款编号",name:"storageNo"}],gridModel:"Hc_Framework.model.HcSupplierDeliveryOfCargoFromTorage",gridSubGrid:"HcSupplierInquiryProduct",gridColumns:[{header:"付款编号",dataIndex:"storageNo",width:"15%",renderer:function(f,d,b,g,e,c){return'<span onclick=""><a href="#">'+f+" </a></span>"}},{header:"采购单号",dataIndex:"supplierName",width:250},{dataIndex:"storageClass",header:"供应商",width:150},{dataIndex:"register",header:"订单金额",width:150},{dataIndex:"storageDate",header:"入库金额 ",width:150},{dataIndex:"storageStatus",header:"实付金额",width:150},{dataIndex:"purchaseDate",header:"待付金额",width:150},{dataIndex:"purchaseDate",header:"付款日期 ",width:150},{dataIndex:"purchaseDate",header:"当前状态 ",width:150}],allendflag:false,gridPrimaryKey:"inquiryNo",gridLoadUrl:Hc.basePath+"hc_supplier_inquiry_management_list/list.json",gridLoadSubUrl:Hc.basePath+"hc_supplier_inquiry_management_list/listAll.json",gridSaveUrl:Hc.basePath+"hc_supplier_inquiry_management_list/batchOperate.json",gridExportUrl:Hc.basePath+"hc_supplier_inquiry_management_list/do_export.json",gridDeleteMasterCustomerUrl:Hc.basePath+"hc_supplier_inquiry_management_list/deleteMasterCustomer.json",gridAddMasterCustomerUrl:Hc.basePath+"hc_supplier_inquiry_management_list/addMasterCustomer.json",gridImportUrl:Hc.basePath+"",subWinTableName:"Hc_Framework.view.hc.SubHcSupplierPaymentAccount",subformActivate:false});a.callParent()}});
Ext.define("Hc_Framework.view.hc.HcSupplierPaymentAccountController",{extend:"Hc_Common.view.BaseSimplePageController",alias:"controller.hcsupplierpaymentaccountcontroller",init:function(){var a=this;Ext.apply(a,{windowFlag:true,newobj:this.view.subWinTableName});a.callParent()},onEditClick:function(g,a,d,b,f,c){},onEditClick_:function(b,a,h,c,g,i,d,f){var j=Ext.create("Hc_Common.store.Base",{model:"Hc_Framework.model.SubHcSupplierDeliveryOfCargoFromTorage",autoLoad:false,groupField:"inquiredQTY_quotedPrice$",proxy:{url:this.view.gridLoadSubUrl}});j.proxy.extraParams.inquiryNo=c.data.inquiryNo;j.load();if(h==0){Ext.create(this.view.subWinTableName,{title:"编辑",record:c,me_:this,store:j}).show();this.view.subformActivate=true;this.onBtnCancelClick()}}});
Ext.define("Hc_Framework.view.hc.HcSupplierPaymentAccountModel",{extend:"Hc_Common.view.BaseSimplePageModel",alias:"viewmodel.hcsupplierpaymentaccountmodel"});
Ext.define("Hc_Framework.view.hc.SubHcSupplierPaymentAccount",{extend:"Hc_Common.view.BaseWinPage",alias:"widget.subhcsupplierpaymentaccount",controller:"subhcsupplierpaymentaccountcontroller",viewModel:{type:"subhcsupplierpaymentaccountmodel"},title:"新增",width:1000,height:620,maxWidth:1000,minWidth:1000,minHeight:620,layout:"border",closeAction:"hide",plain:false,collapsible:false,modal:true,dockedItems:[{xtype:"toolbar",dock:"top",items:[{text:"保存",handler:"onBtnSaveClick",glyph:Hc.Icon.btnSave},{text:"编辑",handler:"onBtnEditClick",glyph:Hc.Icon.btnEdit},{text:"增加产品",handler:"onBtnChoiceProductClick",glyph:Hc.Icon.btnFolderOpen},{text:"删除产品",handler:"onbtnChoiceDeleteClick",glyph:Hc.Icon.btnDelete},{text:"取消",handler:"onBtnCancelClick",glyph:Hc.Icon.btnCancel}]}],listeners:{beforeshow:function(f,e){var b=Ext.create("Hc_Framework.store.CurrentUser");b.load();var a;var c;if(this.title=="新增"){c="PE"+Ext.util.Format.date((new Date()),"Y").substring(2,5)+Ext.util.Format.date((new Date()),"Y").substring(0,2)+Ext.util.Format.date((new Date()),"dmHis")}else{if(this.title=="编辑"){for(i=0;i<this.record.getFields().length;i++){var d=Ext.util.Format.trim(this.record.getFields()[i].getName());if((this.getReferences())[d]){if(this.lookupReference(d).is("combo")){this.lookupReference(d).setRawValue(this.record.get(d))}else{this.lookupReference(d).setValue(this.record.get(d))}this.lookupReference(d).disable()}}}}this.lookupReference("subhcsupplierpaymentaccount").title=">>>>"+this.me_.view.title_}},initComponent:function(){var a=this;Ext.apply(a,{items:[{title:"--->采购管理",xtype:"panel",defaults:{},layout:{type:"absolute"},reference:"subhcsupplierpaymentaccount",region:"north",bodyStyle:"background:#cbdbe0;",padding:"3 0 3 0",items:[{xtype:"fieldset",height:30,width:980,layout:{type:"table",columns:4},x:3,y:3,padding:"3 0 0 10",items:[{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"付款编码",name:"storageNo",reference:"storageNo",listeners:{beforerender:function(b){b.fieldLabel+='<font size="2px" color="red">*</font>'}}},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"采购编号",name:"supplierNo",reference:"supplierNo"}]},{xtype:"fieldset",height:30,width:980,layout:{type:"table",columns:4},x:3,y:40,padding:"3 0 0 10",items:[{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"供应商编号",name:"supplierNo",reference:"supplierNo"},{xtype:"textfield",labelAlign:"right",labelWidth:78,width:313,fieldLabel:"供应商名称",name:"supplierName",reference:"supplierName",colspan:3}]},{xtype:"fieldset",height:80,width:980,layout:{type:"table",columns:4},x:3,y:79,padding:"3 0 0 10",items:[{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"票据号",name:"storageClass",reference:"storageClass"},{xtype:"datefield",labelAlign:"right",labelWidth:78,fieldLabel:"付款方式",name:"monetaryUnit",reference:"monetaryUnit"},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"采购日期",name:"storageDate",reference:"storageDate",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"币　　值",name:"billNo",reference:"billNo",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"采 购 员",name:"storageDate",reference:"storageDate",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"开票日期",name:"billNo",reference:"billNo",}]},{xtype:"fieldset",height:56,width:980,layout:{type:"table",columns:4},x:3,y:165,padding:"3 0 0 10",items:[{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"采购金额",name:"eExaminationAndApproval",reference:"eExaminationAndApproval",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"实付金额",name:"storageConfirmation",reference:"storageConfirmation",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"发票金额",name:"storageStatus",reference:"storageStatus",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"预计付款日期",name:"storageStatus",reference:"storageStatus",}]},{xtype:"fieldset",height:130,width:980,layout:{type:"table",columns:4},x:3,y:225,padding:"3 0 0 10",items:[{xtype:"textarea",labelAlign:"right",labelWidth:78,width:800,fieldLabel:"付款情况",name:"remark",reference:"remark",colspan:4}]}]},{xtype:"panel",layout:{type:"fit",},region:"center",bodyStyle:"background:#ceebe0; padding:0px;border:0px",scrollable:true,items:[{xtype:"grid",enableHdMenu:false,sortableColumns:false,columnLines:true,enableColumnHide:false,enableColumnMove:false,store:a.store,features:[{ftype:"summary"}],columns:{items:[{text:"产品编号 ",dataIndex:"productModel",width:150},{text:"型号规格 ",dataIndex:"chineseName",width:150},{text:"产品名称",dataIndex:"inquiredQTY_unit",width:150},{text:"采购数量",dataIndex:"quotedPrice",width:150},{text:"到货数量",dataIndex:"quotedPrice",width:150},{text:"采购单价",dataIndex:"quotedPrice",width:150},{text:"到货日期",dataIndex:"quotedPrice",width:150},{text:"订单合计",dataIndex:"quotedPrice",width:150},{text:"入库合计",dataIndex:"quotedPrice",width:150}]}}]}]});a.callParent()}});
Ext.define("Hc_Framework.view.hc.SubHcSupplierPaymentAccountController",{extend:"Hc_Common.view.BaseWinPageController",alias:"controller.subhcsupplierpaymentaccountcontroller",flag:false,record_:"",init:function(){var c=this;var a=Ext.create("Hc_Framework.model.HcSupplierDeliveryOfCargoFromTorage",{});this.record_=a;for(i=0;i<a.getFields().length;i++){var b=Ext.util.Format.trim(a.getFields()[i].getName());if((this.getReferences())[b]){this.lookupReference(b).on("change",c.onBtnchange,c)}}c.callParent()},onBtnEditClick:function(){for(i=0;i<this.record_.getFields().length;i++){var a=Ext.util.Format.trim(this.record_.getFields()[i].getName());if((this.getReferences())[a]){if("contactsName"==a||"contactsTel"==a||"contactsFax"==a||"supplierName"==a){this.lookupReference(a).disable()}else{this.lookupReference(a).enable()}}}},onBtnchange:function(d,c,a,b){var e=this.view.me_.workObject.store;e.beginUpdate();if(d.is("combo")){this.view.record.set(d.name,d.getRawValue())}else{this.view.record.set(d.name,d.getRawValue())}if(this.view.title=="编辑"){this.flag=false}else{if(this.view.title=="新增"){this.flag=true}}e.endUpdate()},onBtnSaveClick:function(){if(this.view.title=="编辑"){this.flag=false}else{if(this.view.title=="新增"){this.flag=true}}for(i=0;i<this.record_.getFields().length-3;i++){if(!this.lookupReference(Ext.util.Format.trim(this.record_.getFields()[i].getName())).isValid()){return}}this.view.me_.workObject.store.add(this.view.record);this.view.me_.onBtnSaveClick(null,this)},onBtnCancelClick:function(){if(this.flag){this.view.me_.workObject.store.removeAt(this.view.me_.workObject.store.getCount()-1);this.view.me_.workObject.view.refresh();this.flag=false}if(this.view.title=="编辑"){this.view.me_.workObject.store.rejectChanges();this.view.me_.workObject.view.refresh()}this.view.me_.view.subformActivate=false;this.view.hide()}});
Ext.define("Hc_Framework.view.hc.SubHcSupplierPaymentAccountModel",{extend:"Hc_Common.view.BaseWinPageModel",alias:"viewmodel.subhcsupplierpaymentaccountmodel"});
Ext.define("Hc_Framework.view.hc.HcSupplierReceivables",{extend:"Hc_Common.view.BaseSimplePage",alias:"widget.hcsupplierreceivables",controller:"hcsupplierreceivablescontroller",viewModel:{type:"hcsupplierreceivablesmodel"},initComponent:function(){var a=this;Ext.apply(a,{searchItems:[{xtype:"textfield",fieldLabel:"发票编号",name:"storageNo"}],gridModel:"Hc_Framework.model.HcSupplierDeliveryOfCargoFromTorage",gridSubGrid:"HcSupplierInquiryProduct",gridColumns:[{header:"发票编号",dataIndex:"storageNo",width:"15%",renderer:function(f,d,b,g,e,c){return'<span onclick=""><a href="#">'+f+" </a></span>"}},{header:"订单编号",dataIndex:"supplierName",width:250},{dataIndex:"storageClass",header:"客户名称",width:150},{dataIndex:"register",header:"票据号",width:150},{dataIndex:"storageDate",header:"订单金额 ",width:150},{dataIndex:"storageStatus",header:"出货金额",width:150},{dataIndex:"purchaseDate",header:"欠款金额",width:150},{dataIndex:"purchaseDate",header:"收款日期 ",width:150},{dataIndex:"purchaseDate",header:"部门 ",width:150}],allendflag:false,gridPrimaryKey:"inquiryNo",gridLoadUrl:Hc.basePath+"hc_supplier_inquiry_management_list/list.json",gridLoadSubUrl:Hc.basePath+"hc_supplier_inquiry_management_list/listAll.json",gridSaveUrl:Hc.basePath+"hc_supplier_inquiry_management_list/batchOperate.json",gridExportUrl:Hc.basePath+"hc_supplier_inquiry_management_list/do_export.json",gridDeleteMasterCustomerUrl:Hc.basePath+"hc_supplier_inquiry_management_list/deleteMasterCustomer.json",gridAddMasterCustomerUrl:Hc.basePath+"hc_supplier_inquiry_management_list/addMasterCustomer.json",gridImportUrl:Hc.basePath+"",subWinTableName:"Hc_Framework.view.hc.SubHcSupplierReceivables",subformActivate:false});a.callParent()}});
Ext.define("Hc_Framework.view.hc.HcSupplierReceivablesController",{extend:"Hc_Common.view.BaseSimplePageController",alias:"controller.hcsupplierreceivablescontroller",init:function(){var a=this;Ext.apply(a,{windowFlag:true,newobj:this.view.subWinTableName});a.callParent()},onEditClick:function(g,a,d,b,f,c){},onEditClick_:function(b,a,h,c,g,i,d,f){var j=Ext.create("Hc_Common.store.Base",{model:"Hc_Framework.model.SubHcSupplierDeliveryOfCargoFromTorage",autoLoad:false,groupField:"inquiredQTY_quotedPrice$",proxy:{url:this.view.gridLoadSubUrl}});j.proxy.extraParams.inquiryNo=c.data.inquiryNo;j.load();if(h==0){Ext.create(this.view.subWinTableName,{title:"编辑",record:c,me_:this,store:j}).show();this.view.subformActivate=true;this.onBtnCancelClick()}}});
Ext.define("Hc_Framework.view.hc.HcSupplierReceivablesModel",{extend:"Hc_Common.view.BaseSimplePageModel",alias:"viewmodel.hcsupplierreceivablesmodel"});
Ext.define("Hc_Framework.view.hc.SubHcSupplierReceivables",{extend:"Hc_Common.view.BaseWinPage",alias:"widget.subhcsupplierreceivables",controller:"subhcsupplierreceivablescontroller",viewModel:{type:"subhcsupplierreceivablesmodel"},title:"新增",width:1000,height:620,maxWidth:1000,minWidth:1000,minHeight:620,layout:"border",closeAction:"hide",plain:false,collapsible:false,modal:true,dockedItems:[{xtype:"toolbar",dock:"top",items:[{text:"保存",handler:"onBtnSaveClick",glyph:Hc.Icon.btnSave},{text:"编辑",handler:"onBtnEditClick",glyph:Hc.Icon.btnEdit},{text:"增加产品",handler:"onBtnChoiceProductClick",glyph:Hc.Icon.btnFolderOpen},{text:"删除产品",handler:"onbtnChoiceDeleteClick",glyph:Hc.Icon.btnDelete},{text:"取消",handler:"onBtnCancelClick",glyph:Hc.Icon.btnCancel}]}],listeners:{beforeshow:function(f,e){var b=Ext.create("Hc_Framework.store.CurrentUser");b.load();var a;var c;if(this.title=="新增"){c="PE"+Ext.util.Format.date((new Date()),"Y").substring(2,5)+Ext.util.Format.date((new Date()),"Y").substring(0,2)+Ext.util.Format.date((new Date()),"dmHis")}else{if(this.title=="编辑"){for(i=0;i<this.record.getFields().length;i++){var d=Ext.util.Format.trim(this.record.getFields()[i].getName());if((this.getReferences())[d]){if(this.lookupReference(d).is("combo")){this.lookupReference(d).setRawValue(this.record.get(d))}else{this.lookupReference(d).setValue(this.record.get(d))}this.lookupReference(d).disable()}}}}}},initComponent:function(){var a=this;Ext.apply(a,{items:[{title:"--->采购管理",xtype:"panel",defaults:{},layout:{type:"absolute"},region:"north",bodyStyle:"background:#cbdbe0;",padding:"3 0 3 0",items:[{xtype:"fieldset",height:30,width:980,layout:{type:"table",columns:4},x:3,y:3,padding:"3 0 0 10",items:[{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"发票编号",name:"storageNo",reference:"storageNo",listeners:{beforerender:function(b){b.fieldLabel+='<font size="2px" color="red">*</font>'}}},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"订单编码",name:"supplierNo",reference:"supplierNo"}]},{xtype:"fieldset",height:30,width:980,layout:{type:"table",columns:4},x:3,y:40,padding:"3 0 0 10",items:[{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"客户编号",name:"supplierNo",reference:"supplierNo"},{xtype:"textfield",labelAlign:"right",labelWidth:78,width:313,fieldLabel:"客户名称",name:"supplierName",reference:"supplierName",colspan:3}]},{xtype:"fieldset",height:80,width:980,layout:{type:"table",columns:4},x:3,y:79,padding:"3 0 0 10",items:[{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"其它费用",name:"storageClass",reference:"storageClass"},{xtype:"datefield",labelAlign:"right",labelWidth:78,fieldLabel:"实收金额",name:"monetaryUnit",reference:"monetaryUnit"},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"运费金额",name:"storageDate",reference:"storageDate",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"目标起运日",name:"billNo",reference:"billNo",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"实际起运日",name:"storageDate",reference:"storageDate",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"预计收款日期",name:"billNo",reference:"billNo",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"付款方式",name:"storageDate",reference:"storageDate",}]},{xtype:"fieldset",height:56,width:980,layout:{type:"table",columns:4},x:3,y:165,padding:"3 0 0 10",items:[{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"币　　值",name:"eExaminationAndApproval",reference:"eExaminationAndApproval",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"发　　票",name:"storageConfirmation",reference:"storageConfirmation",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"开票金额",name:"storageStatus",reference:"storageStatus",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"开票日期",name:"storageStatus",reference:"storageStatus",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"票据号",name:"storageStatus",reference:"storageStatus",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"销 售 员",name:"storageStatus",reference:"storageStatus",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"所在部门",name:"storageStatus",reference:"storageStatus",}]},{xtype:"fieldset",height:130,width:980,layout:{type:"table",columns:4},x:3,y:225,padding:"3 0 0 10",items:[{xtype:"textarea",labelAlign:"right",labelWidth:78,width:800,fieldLabel:"收款情况",name:"remark",reference:"remark",colspan:4}]}]},{xtype:"panel",layout:{type:"fit",},region:"center",bodyStyle:"background:#ceebe0; padding:0px;border:0px",scrollable:true,items:[{xtype:"grid",enableHdMenu:false,sortableColumns:false,columnLines:true,enableColumnHide:false,enableColumnMove:false,store:a.store,features:[{ftype:"summary"}],columns:{items:[{text:"产品编号 ",dataIndex:"productModel",width:150},{text:"型号规格 ",dataIndex:"chineseName",width:150},{text:"产品名称",dataIndex:"inquiredQTY_unit",width:150},{text:"订单数量",dataIndex:"quotedPrice",width:150},{text:"出货数量",dataIndex:"quotedPrice",width:150},{text:"销售单价",dataIndex:"quotedPrice",width:150},{text:"订单合计",dataIndex:"quotedPrice",width:150},{text:"出货合计",dataIndex:"quotedPrice",width:150}]}}]}]});a.callParent()}});
Ext.define("Hc_Framework.view.hc.SubHcSupplierReceivablesController",{extend:"Hc_Common.view.BaseWinPageController",alias:"controller.subhcsupplierreceivablescontroller",flag:false,record_:"",init:function(){var c=this;var a=Ext.create("Hc_Framework.model.HcSupplierDeliveryOfCargoFromTorage",{});this.record_=a;for(i=0;i<a.getFields().length;i++){var b=Ext.util.Format.trim(a.getFields()[i].getName());if((this.getReferences())[b]){this.lookupReference(b).on("change",c.onBtnchange,c)}}c.callParent()},onBtnEditClick:function(){for(i=0;i<this.record_.getFields().length;i++){var a=Ext.util.Format.trim(this.record_.getFields()[i].getName());if((this.getReferences())[a]){if("contactsName"==a||"contactsTel"==a||"contactsFax"==a||"supplierName"==a){this.lookupReference(a).disable()}else{this.lookupReference(a).enable()}}}},onBtnchange:function(d,c,a,b){var e=this.view.me_.workObject.store;e.beginUpdate();if(d.is("combo")){this.view.record.set(d.name,d.getRawValue())}else{this.view.record.set(d.name,d.getRawValue())}if(this.view.title=="编辑"){this.flag=false}else{if(this.view.title=="新增"){this.flag=true}}e.endUpdate()},onBtnSaveClick:function(){if(this.view.title=="编辑"){this.flag=false}else{if(this.view.title=="新增"){this.flag=true}}for(i=0;i<this.record_.getFields().length-3;i++){if(!this.lookupReference(Ext.util.Format.trim(this.record_.getFields()[i].getName())).isValid()){return}}this.view.me_.workObject.store.add(this.view.record);this.view.me_.onBtnSaveClick(null,this)},onBtnCancelClick:function(){if(this.flag){this.view.me_.workObject.store.removeAt(this.view.me_.workObject.store.getCount()-1);this.view.me_.workObject.view.refresh();this.flag=false}if(this.view.title=="编辑"){this.view.me_.workObject.store.rejectChanges();this.view.me_.workObject.view.refresh()}this.view.me_.view.subformActivate=false;this.view.hide()}});
Ext.define("Hc_Framework.view.hc.SubHcSupplierReceivablesModel",{extend:"Hc_Common.view.BaseWinPageModel",alias:"viewmodel.subhcsupplierreceivablesmodel"});
Ext.define("Hc_Framework.view.hc.HcSupplierReturnGoods",{extend:"Hc_Common.view.BaseSimplePage",alias:"widget.hcsupplierreturngoods",controller:"hcsupplierreturngoodscontroller",viewModel:{type:"hcsupplierreturngoodsmodel"},initComponent:function(){var a=this;Ext.apply(a,{searchItems:[{xtype:"textfield",fieldLabel:"退货编号",name:"storageNo"}],gridModel:"Hc_Framework.model.HcSupplierDeliveryOfCargoFromTorage",gridSubGrid:"HcSupplierInquiryProduct",gridColumns:[{header:"退货编号",dataIndex:"storageNo",width:"15%",renderer:function(f,d,b,g,e,c){return'<span onclick=""><a href="#">'+f+" </a></span>"}},{dataIndex:"storageClass",header:"客户名称",width:150},{dataIndex:"register",header:"应退金额",width:150},{dataIndex:"storageDate",header:"实退金额 ",width:150},{dataIndex:"storageStatus",header:"退货日期",width:150},{dataIndex:"purchaseDate",header:"当前状态",width:150}],allendflag:false,gridPrimaryKey:"inquiryNo",gridLoadUrl:Hc.basePath+"hc_supplier_inquiry_management_list/list.json",gridLoadSubUrl:Hc.basePath+"hc_supplier_inquiry_management_list/listAll.json",gridSaveUrl:Hc.basePath+"hc_supplier_inquiry_management_list/batchOperate.json",gridExportUrl:Hc.basePath+"hc_supplier_inquiry_management_list/do_export.json",gridDeleteMasterCustomerUrl:Hc.basePath+"hc_supplier_inquiry_management_list/deleteMasterCustomer.json",gridAddMasterCustomerUrl:Hc.basePath+"hc_supplier_inquiry_management_list/addMasterCustomer.json",gridImportUrl:Hc.basePath+"",subWinTableName:"Hc_Framework.view.hc.SubHcSupplierReturnGoods",subformActivate:false});a.callParent()}});
Ext.define("Hc_Framework.view.hc.HcSupplierReturnGoodsController",{extend:"Hc_Common.view.BaseSimplePageController",alias:"controller.hcsupplierreturngoodscontroller",init:function(){var a=this;Ext.apply(a,{windowFlag:true,newobj:this.view.subWinTableName});a.callParent()},onEditClick:function(g,a,d,b,f,c){},onEditClick_:function(b,a,h,c,g,i,d,f){var j=Ext.create("Hc_Common.store.Base",{model:"Hc_Framework.model.SubHcSupplierDeliveryOfCargoFromTorage",autoLoad:false,groupField:"inquiredQTY_quotedPrice$",proxy:{url:this.view.gridLoadSubUrl}});j.proxy.extraParams.inquiryNo=c.data.inquiryNo;j.load();if(h==0){Ext.create(this.view.subWinTableName,{title:"编辑",record:c,me_:this,store:j}).show();this.view.subformActivate=true;this.onBtnCancelClick()}}});
Ext.define("Hc_Framework.view.hc.HcSupplierReturnGoodsModel",{extend:"Hc_Common.view.BaseSimplePageModel",alias:"viewmodel.hcsupplierreturngoodsmodel"});
Ext.define("Hc_Framework.view.hc.SubHcSupplierReturnGoods",{extend:"Hc_Common.view.BaseWinPage",alias:"widget.subhcsupplierreturngoods",controller:"subhcsupplierreturngoodscontroller",viewModel:{type:"subhcsupplierreturngoodsmodel"},title:"新增",width:1000,height:620,maxWidth:1000,minWidth:1000,minHeight:620,layout:"border",closeAction:"hide",plain:false,collapsible:false,modal:true,dockedItems:[{xtype:"toolbar",dock:"top",items:[{text:"保存",handler:"onBtnSaveClick",glyph:Hc.Icon.btnSave},{text:"编辑",handler:"onBtnEditClick",glyph:Hc.Icon.btnEdit},{text:"增加产品",handler:"onBtnChoiceProductClick",glyph:Hc.Icon.btnFolderOpen},{text:"删除产品",handler:"onbtnChoiceDeleteClick",glyph:Hc.Icon.btnDelete},{text:"取消",handler:"onBtnCancelClick",glyph:Hc.Icon.btnCancel}]}],listeners:{beforeshow:function(f,e){var b=Ext.create("Hc_Framework.store.CurrentUser");b.load();var a;var c;if(this.title=="新增"){c="PE"+Ext.util.Format.date((new Date()),"Y").substring(2,5)+Ext.util.Format.date((new Date()),"Y").substring(0,2)+Ext.util.Format.date((new Date()),"dmHis")}else{if(this.title=="编辑"){for(i=0;i<this.record.getFields().length;i++){var d=Ext.util.Format.trim(this.record.getFields()[i].getName());if((this.getReferences())[d]){if(this.lookupReference(d).is("combo")){this.lookupReference(d).setRawValue(this.record.get(d))}else{this.lookupReference(d).setValue(this.record.get(d))}this.lookupReference(d).disable()}}}}}},initComponent:function(){var a=this;Ext.apply(a,{items:[{title:"--->采购管理",xtype:"panel",defaults:{},layout:{type:"absolute"},region:"north",bodyStyle:"background:#cbdbe0;",padding:"3 0 3 0",items:[{xtype:"fieldset",height:30,width:980,layout:{type:"table",columns:4},x:3,y:3,padding:"3 0 0 10",items:[{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"退货编号",name:"storageNo",reference:"storageNo",listeners:{beforerender:function(b){b.fieldLabel+='<font size="2px" color="red">*</font>'}}}]},{xtype:"fieldset",height:30,width:980,layout:{type:"table",columns:4},x:3,y:40,padding:"3 0 0 10",items:[{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"客户编号",name:"supplierNo",reference:"supplierNo"},{xtype:"textfield",labelAlign:"right",labelWidth:78,width:313,fieldLabel:"客户名称",name:"supplierName",reference:"supplierName",colspan:3}]},{xtype:"fieldset",height:30,width:980,layout:{type:"table",columns:4},x:3,y:80,padding:"3 0 0 10",items:[{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"实退金额",name:"supplierNo",reference:"supplierNo"},{xtype:"textfield",labelAlign:"right",labelWidth:78,width:313,fieldLabel:"退货日期",name:"supplierName",reference:"supplierName",colspan:3},{xtype:"textfield",labelAlign:"right",labelWidth:78,width:313,fieldLabel:"币　　值",name:"supplierName",reference:"supplierName",colspan:3},{xtype:"textfield",labelAlign:"right",labelWidth:78,width:313,fieldLabel:"销 售 员",name:"supplierName",reference:"supplierName",colspan:3},{xtype:"textfield",labelAlign:"right",labelWidth:78,width:313,fieldLabel:"所在部门",name:"supplierName",reference:"supplierName",colspan:3}]}]},{xtype:"panel",layout:{type:"fit",},region:"center",bodyStyle:"background:#ceebe0; padding:0px;border:0px",scrollable:true,items:[{xtype:"grid",enableHdMenu:false,sortableColumns:false,columnLines:true,enableColumnHide:false,enableColumnMove:false,store:a.store,features:[{ftype:"summary"}],columns:{items:[{text:"产品编号 ",dataIndex:"productModel",width:150},{text:"型号规格 ",dataIndex:"chineseName",width:150},{text:"产品名称",dataIndex:"inquiredQTY_unit",width:150},{text:"数量",dataIndex:"quotedPrice",width:150},{text:"单价",dataIndex:"quotedPrice",width:150},{text:"合计",dataIndex:"quotedPrice",width:150}]}}]}]});a.callParent()}});
Ext.define("Hc_Framework.view.hc.SubHcSupplierReturnGoodsController",{extend:"Hc_Common.view.BaseWinPageController",alias:"controller.subhcsupplierreturngoodscontroller",flag:false,record_:"",init:function(){var c=this;var a=Ext.create("Hc_Framework.model.HcSupplierDeliveryOfCargoFromTorage",{});this.record_=a;for(i=0;i<a.getFields().length;i++){var b=Ext.util.Format.trim(a.getFields()[i].getName());if((this.getReferences())[b]){this.lookupReference(b).on("change",c.onBtnchange,c)}}c.callParent()},onBtnEditClick:function(){for(i=0;i<this.record_.getFields().length;i++){var a=Ext.util.Format.trim(this.record_.getFields()[i].getName());if((this.getReferences())[a]){if("contactsName"==a||"contactsTel"==a||"contactsFax"==a||"supplierName"==a){this.lookupReference(a).disable()}else{this.lookupReference(a).enable()}}}},onBtnchange:function(d,c,a,b){var e=this.view.me_.workObject.store;e.beginUpdate();if(d.is("combo")){this.view.record.set(d.name,d.getRawValue())}else{this.view.record.set(d.name,d.getRawValue())}if(this.view.title=="编辑"){this.flag=false}else{if(this.view.title=="新增"){this.flag=true}}e.endUpdate()},onBtnSaveClick:function(){if(this.view.title=="编辑"){this.flag=false}else{if(this.view.title=="新增"){this.flag=true}}for(i=0;i<this.record_.getFields().length-3;i++){if(!this.lookupReference(Ext.util.Format.trim(this.record_.getFields()[i].getName())).isValid()){return}}this.view.me_.workObject.store.add(this.view.record);this.view.me_.onBtnSaveClick(null,this)},onBtnCancelClick:function(){if(this.flag){this.view.me_.workObject.store.removeAt(this.view.me_.workObject.store.getCount()-1);this.view.me_.workObject.view.refresh();this.flag=false}if(this.view.title=="编辑"){this.view.me_.workObject.store.rejectChanges();this.view.me_.workObject.view.refresh()}this.view.me_.view.subformActivate=false;this.view.hide()}});
Ext.define("Hc_Framework.view.hc.SubHcSupplierReturnGoodsModel",{extend:"Hc_Common.view.BaseWinPageModel",alias:"viewmodel.subhcsupplierreturngoodsmodel"});
Ext.define("Hc_Framework.view.hc.HcSupplierToAndFroChargeUpAccount",{extend:"Hc_Common.view.BaseSimplePage",alias:"widget.hcsuppliertoandfrochargeupaccount",controller:"hcsuppliertoandfrochargeupaccountcontroller",viewModel:{type:"hcsuppliertoandfrochargeupaccountmodel"},title_:"资金日记账",initComponent:function(){var a=this;Ext.apply(a,{searchItems:[{xtype:"textfield",fieldLabel:"凭证编号",name:"storageNo"},{xtype:"textfield",fieldLabel:"票据号",name:"storageNo"}],gridModel:"Hc_Framework.model.HcSupplierPurchase",gridSubGrid:"HcSupplierInquiryProduct",gridColumns:[{header:"凭证编号",dataIndex:"storageNo",width:"15%",renderer:function(f,d,b,g,e,c){return'<span onclick=""><a href="#">'+f+" </a></span>"}},{header:"票据号",dataIndex:"supplierName",width:250},{dataIndex:"storageClass",header:"制单人",width:150},{dataIndex:"register",header:"摘要",width:150},{dataIndex:"storageDate",header:"公司名称 ",width:150},{dataIndex:"storageStatus",header:"贷方/借方",width:150},{dataIndex:"purchaseDate",header:"货币",width:150},{dataIndex:"purchaseDate",header:"凭证金额",width:150},{dataIndex:"purchaseDate",header:"已对帐金额",width:150},{dataIndex:"purchaseDate",header:"科目名称",width:150},{dataIndex:"purchaseDate",header:"科目明细",width:150},{dataIndex:"purchaseDate",header:"开户银行",width:150},{dataIndex:"purchaseDate",header:"银行帐号",width:150}],allendflag:false,gridPrimaryKey:"inquiryNo",gridLoadUrl:Hc.basePath+"hc_supplier_inquiry_management_list/list.json",gridLoadSubUrl:Hc.basePath+"hc_supplier_inquiry_management_list/listAll.json",gridSaveUrl:Hc.basePath+"hc_supplier_inquiry_management_list/batchOperate.json",gridExportUrl:Hc.basePath+"hc_supplier_inquiry_management_list/do_export.json",gridDeleteMasterCustomerUrl:Hc.basePath+"hc_supplier_inquiry_management_list/deleteMasterCustomer.json",gridAddMasterCustomerUrl:Hc.basePath+"hc_supplier_inquiry_management_list/addMasterCustomer.json",gridImportUrl:Hc.basePath+"",subWinTableName:"Hc_Framework.view.hc.HcSupplierToAndFroChargeUpAccountNewEdit",subformActivate:false});a.callParent()}});
Ext.define("Hc_Framework.view.hc.HcSupplierToAndFroChargeUpAccountController",{extend:"Hc_Common.view.BaseSimplePageController",alias:"controller.hcsuppliertoandfrochargeupaccountcontroller",init:function(){var a=this;Ext.apply(a,{windowFlag:true,newobj:this.view.subWinTableName});a.callParent()},onEditClick:function(g,a,d,b,f,c){},onEditClick_:function(b,a,h,c,g,i,d,f){var j=Ext.create("Hc_Common.store.Base",{model:"Hc_Framework.model.HcSupplierWarehouse",autoLoad:false,groupField:"inquiredQTY_quotedPrice$",proxy:{url:this.view.gridLoadSubUrl}});j.proxy.extraParams.inquiryNo=c.data.inquiryNo;j.load();if(h==0){Ext.create(this.view.subWinTableName,{title:"编辑",record:c,me_:this,store:j}).show();this.view.subformActivate=true;this.onBtnCancelClick()}}});
Ext.define("Hc_Framework.view.hc.HcSupplierToAndFroChargeUpAccountModel",{extend:"Hc_Common.view.BaseSimplePageModel",alias:"viewmodel.hcsuppliertoandfrochargeupaccountmodel"});
Ext.define("Hc_Framework.view.hc.HcSupplierToAndFroChargeUpAccountNewEdit",{extend:"Hc_Common.view.BaseWinPage",alias:"widget.hcsuppliertoandfrochargeupaccountnewedit",controller:"hcsuppliertoandfrochargeupaccountneweditcontroller",viewModel:{type:"hcsuppliertoandfrochargeupaccountneweditmodel"},title:"新增",width:1000,height:620,maxWidth:1000,minWidth:1000,minHeight:620,layout:"border",closeAction:"hide",plain:false,collapsible:false,modal:true,scrollable:true,dockedItems:[{xtype:"toolbar",dock:"top",items:[{text:"保存",handler:"onBtnSaveClick",glyph:Hc.Icon.btnSave},{text:"编辑",handler:"onBtnEditClick",glyph:Hc.Icon.btnEdit},{text:"取消",handler:"onBtnCancelClick",glyph:Hc.Icon.btnCancel}]}],listeners:{beforeshow:function(f,e){var b=Ext.create("Hc_Framework.store.CurrentUser");b.load();var a;var c;if(this.title=="新增"){c="PE"+Ext.util.Format.date((new Date()),"Y").substring(2,5)+Ext.util.Format.date((new Date()),"Y").substring(0,2)+Ext.util.Format.date((new Date()),"dmHis")}else{if(this.title=="编辑"){for(i=0;i<this.record.getFields().length;i++){var d=Ext.util.Format.trim(this.record.getFields()[i].getName());if((this.getReferences())[d]){if(this.lookupReference(d).is("combo")){this.lookupReference(d).setRawValue(this.record.get(d))}else{this.lookupReference(d).setValue(this.record.get(d))}this.lookupReference(d).disable()}}}}this.lookupReference("toandfrochargeupaccountnewedit").title=">>>>"+this.me_.view.title_}},initComponent:function(){var a=this;Ext.apply(a,{items:[{title:">采购管理",xtype:"panel",defaults:{},layout:{type:"absolute"},region:"north",bodyStyle:"background:#cbdbe0;",reference:"toandfrochargeupaccountnewedit",padding:"3 0 3 0",items:[{xtype:"fieldset",height:30,width:980,layout:{type:"table",columns:4},x:3,y:3,padding:"3 0 0 10",items:[{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"凭证编号",name:"storageNo",reference:"storageNo",listeners:{beforerender:function(b){b.fieldLabel+='<font size="2px" color="red">*</font>'}}},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"票 据 号",name:"storageNo",reference:"storageNo"},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"制 单 人",name:"storageNo",reference:"storageNo"}]},{xtype:"fieldset",height:30,width:980,layout:{type:"table",columns:4},x:3,y:40,padding:"3 0 0 10",items:[{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"供应商编号",name:"supplierNo",reference:"supplierNo"},{xtype:"textfield",labelAlign:"right",labelWidth:78,width:313,fieldLabel:"供应商名称",name:"supplierName",reference:"supplierName",colspan:3}]},{xtype:"fieldset",height:60,width:980,layout:{type:"table",columns:4},x:3,y:76,padding:"3 0 0 10",items:[{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"财务科目",name:"storageClass",reference:"storageClass"},{xtype:"datefield",labelAlign:"right",labelWidth:78,fieldLabel:"财务类别 ",name:"monetaryUnit",reference:"monetaryUnit"},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"货　　币",name:"storageDate",reference:"storageDate",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"汇　　率",name:"billNo",reference:"billNo",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"凭证金额",name:"register",reference:"register",}]},{xtype:"fieldset",height:30,width:980,layout:{type:"table",columns:4},x:3,y:143,padding:"3 0 0 10",items:[{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"已对帐金额 ",name:"eExaminationAndApproval",reference:"eExaminationAndApproval",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"期初余额",name:"storageConfirmation",reference:"storageConfirmation",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"冲消余额",name:"storageStatus",reference:"storageStatus",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"开户银行",name:"storageStatus",reference:"storageStatus",}]},{xtype:"fieldset",height:30,width:980,layout:{type:"table",columns:4},x:3,y:180,padding:"3 0 0 10",items:[{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"银行帐号 ",name:"eExaminationAndApproval",reference:"eExaminationAndApproval",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"审 批 人",name:"storageConfirmation",reference:"storageConfirmation",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"审批日期",name:"storageStatus",reference:"storageStatus",}]},{xtype:"fieldset",height:256,width:980,layout:{type:"table",columns:4},x:3,y:250,padding:"3 0 0 10",items:[{xtype:"textarea",labelAlign:"right",labelWidth:78,width:800,fieldLabel:"摘　　要",name:"approvalOpinion",reference:"approvalOpinion",colspan:4},{xtype:"textarea",labelAlign:"right",labelWidth:78,width:800,fieldLabel:"审批意见",name:"approvalOpinion",reference:"approvalOpinion",colspan:4},{xtype:"textarea",labelAlign:"right",labelWidth:78,width:800,fieldLabel:"备&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;注",name:"remark",reference:"remark",colspan:4}]}]}]});a.callParent()}});
Ext.define("Hc_Framework.view.hc.HcSupplierToAndFroChargeUpAccountNewEditController",{extend:"Hc_Common.view.BaseWinPageController",alias:"controller.hcsuppliertoandfrochargeupaccountneweditcontroller",flag:false,record_:"",init:function(){var c=this;var a=Ext.create("Hc_Framework.model.HcSupplierWarehouse",{});this.record_=a;for(i=0;i<a.getFields().length;i++){var b=Ext.util.Format.trim(a.getFields()[i].getName());if((this.getReferences())[b]){this.lookupReference(b).on("change",c.onBtnchange,c)}}c.callParent()},onBtnEditClick:function(){for(i=0;i<this.record_.getFields().length;i++){var a=Ext.util.Format.trim(this.record_.getFields()[i].getName());if((this.getReferences())[a]){if("contactsName"==a||"contactsTel"==a||"contactsFax"==a||"supplierName"==a){this.lookupReference(a).disable()}else{this.lookupReference(a).enable()}}}},onBtnchange:function(d,c,a,b){var e=this.view.me_.workObject.store;e.beginUpdate();if(d.is("combo")){this.view.record.set(d.name,d.getRawValue())}else{this.view.record.set(d.name,d.getRawValue())}if(this.view.title=="编辑"){this.flag=false}else{if(this.view.title=="新增"){this.flag=true}}e.endUpdate()},onBtnSaveClick:function(){if(this.view.title=="编辑"){this.flag=false}else{if(this.view.title=="新增"){this.flag=true}}for(i=0;i<this.record_.getFields().length-3;i++){if(!this.lookupReference(Ext.util.Format.trim(this.record_.getFields()[i].getName())).isValid()){return}}this.view.me_.workObject.store.add(this.view.record);this.view.me_.onBtnSaveClick(null,this)},onBtnCancelClick:function(){if(this.flag){this.view.me_.workObject.store.removeAt(this.view.me_.workObject.store.getCount()-1);this.view.me_.workObject.view.refresh();this.flag=false}if(this.view.title=="编辑"){this.view.me_.workObject.store.rejectChanges();this.view.me_.workObject.view.refresh()}this.view.me_.view.subformActivate=false;this.view.hide()}});
Ext.define("Hc_Framework.view.hc.HcSupplierToAndFroChargeUpAccountNewEditModel",{extend:"Hc_Common.view.BaseWinPageModel",alias:"viewmodel.hcsuppliertoandfrochargeupaccountneweditmodel"});
Ext.define("Hc_Framework.view.hc.HcSupplierRetail",{extend:"Hc_Common.view.BaseSimplePage",alias:"widget.hcsupplierretail",controller:"hcsupplierretailcontroller",viewModel:{type:"hcsupplierretailmodel"},initComponent:function(){var a=this;Ext.apply(a,{searchItems:[{xtype:"textfield",fieldLabel:"出库编码",name:"storageNo"}],gridModel:"Hc_Framework.model.HcSupplierDeliveryOfCargoFromTorage",gridSubGrid:"HcSupplierInquiryProduct",gridColumns:[{header:"出库编码",dataIndex:"storageNo",width:"15%",renderer:function(f,d,b,g,e,c){return'<span onclick=""><a href="#">'+f+" </a></span>"}},{header:"订单编号",dataIndex:"supplierName",width:250},{dataIndex:"storageClass",header:"出库类型",width:150},{dataIndex:"register",header:"客户名称",width:150},{dataIndex:"storageDate",header:"付款方式 ",width:150},{dataIndex:"storageStatus",header:"责任人",width:150},{dataIndex:"purchaseDate",header:"审批状态 ",width:150}],allendflag:false,gridPrimaryKey:"inquiryNo",gridLoadUrl:Hc.basePath+"hc_supplier_inquiry_management_list/list.json",gridLoadSubUrl:Hc.basePath+"hc_supplier_inquiry_management_list/listAll.json",gridSaveUrl:Hc.basePath+"hc_supplier_inquiry_management_list/batchOperate.json",gridExportUrl:Hc.basePath+"hc_supplier_inquiry_management_list/do_export.json",gridDeleteMasterCustomerUrl:Hc.basePath+"hc_supplier_inquiry_management_list/deleteMasterCustomer.json",gridAddMasterCustomerUrl:Hc.basePath+"hc_supplier_inquiry_management_list/addMasterCustomer.json",gridImportUrl:Hc.basePath+"",subWinTableName:"Hc_Framework.view.hc.SubHcSupplierRetail",subformActivate:false});a.callParent()}});
Ext.define("Hc_Framework.view.hc.HcSupplierRetailController",{extend:"Hc_Common.view.BaseSimplePageController",alias:"controller.hcsupplierretailcontroller",init:function(){var a=this;Ext.apply(a,{windowFlag:true,newobj:this.view.subWinTableName});a.callParent()},onEditClick:function(g,a,d,b,f,c){},onEditClick_:function(b,a,h,c,g,i,d,f){var j=Ext.create("Hc_Common.store.Base",{model:"Hc_Framework.model.SubHcSupplierDeliveryOfCargoFromTorage",autoLoad:false,groupField:"inquiredQTY_quotedPrice$",proxy:{url:this.view.gridLoadSubUrl}});j.proxy.extraParams.inquiryNo=c.data.inquiryNo;j.load();if(h==0){Ext.create(this.view.subWinTableName,{title:"编辑",record:c,me_:this,store:j}).show();this.view.subformActivate=true;this.onBtnCancelClick()}}});
Ext.define("Hc_Framework.view.hc.HcSupplierRetailModel",{extend:"Hc_Common.view.BaseSimplePageModel",alias:"viewmodel.hcsupplierretailmodel"});
Ext.define("Hc_Framework.view.hc.SubHcSupplierRetail",{extend:"Hc_Common.view.BaseWinPage",alias:"widget.subhcsupplierretail",controller:"subhcsupplierretailcontroller",viewModel:{type:"subhcsupplierretailmodel"},title:"新增",width:1000,height:620,maxWidth:1000,minWidth:1000,minHeight:620,layout:"border",closeAction:"hide",plain:false,collapsible:false,modal:true,dockedItems:[{xtype:"toolbar",dock:"top",items:[{text:"保存",handler:"onBtnSaveClick",glyph:Hc.Icon.btnSave},{text:"编辑",handler:"onBtnEditClick",glyph:Hc.Icon.btnEdit},{text:"增加产品",handler:"onBtnChoiceProductClick",glyph:Hc.Icon.btnFolderOpen},{text:"删除产品",handler:"onbtnChoiceDeleteClick",glyph:Hc.Icon.btnDelete},{text:"取消",handler:"onBtnCancelClick",glyph:Hc.Icon.btnCancel}]}],listeners:{beforeshow:function(f,e){var b=Ext.create("Hc_Framework.store.CurrentUser");b.load();var a;var c;if(this.title=="新增"){c="PE"+Ext.util.Format.date((new Date()),"Y").substring(2,5)+Ext.util.Format.date((new Date()),"Y").substring(0,2)+Ext.util.Format.date((new Date()),"dmHis")}else{if(this.title=="编辑"){for(i=0;i<this.record.getFields().length;i++){var d=Ext.util.Format.trim(this.record.getFields()[i].getName());if((this.getReferences())[d]){if(this.lookupReference(d).is("combo")){this.lookupReference(d).setRawValue(this.record.get(d))}else{this.lookupReference(d).setValue(this.record.get(d))}this.lookupReference(d).disable()}}}}}},initComponent:function(){var a=this;Ext.apply(a,{items:[{title:"--->采购管理",xtype:"panel",defaults:{},layout:{type:"absolute"},region:"north",bodyStyle:"background:#cbdbe0;",padding:"3 0 3 0",items:[{xtype:"fieldset",height:30,width:980,layout:{type:"table",columns:4},x:3,y:3,padding:"3 0 0 10",items:[{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"出库编码",name:"storageNo",reference:"storageNo",listeners:{beforerender:function(b){b.fieldLabel+='<font size="2px" color="red">*</font>'}}},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"订单编码",name:"supplierNo",reference:"supplierNo"}]},{xtype:"fieldset",height:30,width:980,layout:{type:"table",columns:4},x:3,y:40,padding:"3 0 0 10",items:[{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"客户编号",name:"supplierNo",reference:"supplierNo"},{xtype:"textfield",labelAlign:"right",labelWidth:78,width:313,fieldLabel:"客户名称",name:"supplierName",reference:"supplierName",colspan:3}]},{xtype:"fieldset",height:80,width:980,layout:{type:"table",columns:4},x:3,y:79,padding:"3 0 0 10",items:[{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"选择仓库",name:"storageClass",reference:"storageClass"},{xtype:"datefield",labelAlign:"right",labelWidth:78,fieldLabel:"出库类型 ",name:"monetaryUnit",reference:"monetaryUnit"},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"其它费用",name:"storageDate",reference:"storageDate",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"货　　币",name:"billNo",reference:"billNo",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"发　　票",name:"storageDate",reference:"storageDate",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"是否预付",name:"billNo",reference:"billNo",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"合同编号",name:"storageDate",reference:"storageDate",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"发货日期",name:"billNo",reference:"billNo",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"付款方式",name:"billNo",reference:"billNo",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"客户交期",name:"billNo",reference:"billNo",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"银　　行",name:"billNo",reference:"billNo",}]},{xtype:"fieldset",height:56,width:980,layout:{type:"table",columns:4},x:3,y:165,padding:"3 0 0 10",items:[{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"运输方式",name:"eExaminationAndApproval",reference:"eExaminationAndApproval",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"运费支付方",name:"storageConfirmation",reference:"storageConfirmation",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"运费金额",name:"storageStatus",reference:"storageStatus",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"收 货 人",name:"storageStatus",reference:"storageStatus",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"收货电话",name:"storageStatus",reference:"storageStatus",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"收货地址",name:"storageStatus",reference:"storageStatus",}]},{xtype:"fieldset",height:130,width:980,layout:{type:"table",columns:4},x:3,y:225,padding:"3 0 0 10",items:[{xtype:"textarea",labelAlign:"right",labelWidth:78,width:800,fieldLabel:"备&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;注",name:"remark",reference:"remark",colspan:4}]}]},{xtype:"panel",layout:{type:"fit",},region:"center",bodyStyle:"background:#ceebe0; padding:0px;border:0px",scrollable:true,items:[{xtype:"grid",enableHdMenu:false,sortableColumns:false,columnLines:true,enableColumnHide:false,enableColumnMove:false,store:a.store,features:[{ftype:"summary"}],columns:{items:[{text:"产品编号 ",dataIndex:"productModel",width:150},{text:"型号规格 ",dataIndex:"chineseName",width:150},{text:"产品名称",dataIndex:"inquiredQTY_unit",width:150},{text:"订单数量",dataIndex:"quotedPrice",width:150},{text:"仓库名称",dataIndex:"quotedPrice",width:150},{text:"单价",dataIndex:"quotedPrice",width:150},{text:"合计",dataIndex:"quotedPrice",width:150}]}}]}]});a.callParent()}});
Ext.define("Hc_Framework.view.hc.SubHcSupplierRetailController",{extend:"Hc_Common.view.BaseWinPageController",alias:"controller.subhcsupplierretailcontroller",flag:false,record_:"",init:function(){var c=this;var a=Ext.create("Hc_Framework.model.HcSupplierDeliveryOfCargoFromTorage",{});this.record_=a;for(i=0;i<a.getFields().length;i++){var b=Ext.util.Format.trim(a.getFields()[i].getName());if((this.getReferences())[b]){this.lookupReference(b).on("change",c.onBtnchange,c)}}c.callParent()},onBtnEditClick:function(){for(i=0;i<this.record_.getFields().length;i++){var a=Ext.util.Format.trim(this.record_.getFields()[i].getName());if((this.getReferences())[a]){if("contactsName"==a||"contactsTel"==a||"contactsFax"==a||"supplierName"==a){this.lookupReference(a).disable()}else{this.lookupReference(a).enable()}}}},onBtnchange:function(d,c,a,b){var e=this.view.me_.workObject.store;e.beginUpdate();if(d.is("combo")){this.view.record.set(d.name,d.getRawValue())}else{this.view.record.set(d.name,d.getRawValue())}if(this.view.title=="编辑"){this.flag=false}else{if(this.view.title=="新增"){this.flag=true}}e.endUpdate()},onBtnSaveClick:function(){if(this.view.title=="编辑"){this.flag=false}else{if(this.view.title=="新增"){this.flag=true}}for(i=0;i<this.record_.getFields().length-3;i++){if(!this.lookupReference(Ext.util.Format.trim(this.record_.getFields()[i].getName())).isValid()){return}}this.view.me_.workObject.store.add(this.view.record);this.view.me_.onBtnSaveClick(null,this)},onBtnCancelClick:function(){if(this.flag){this.view.me_.workObject.store.removeAt(this.view.me_.workObject.store.getCount()-1);this.view.me_.workObject.view.refresh();this.flag=false}if(this.view.title=="编辑"){this.view.me_.workObject.store.rejectChanges();this.view.me_.workObject.view.refresh()}this.view.me_.view.subformActivate=false;this.view.hide()}});
Ext.define("Hc_Framework.view.hc.SubHcSupplierRetailModel",{extend:"Hc_Common.view.BaseWinPageModel",alias:"viewmodel.subhcsupplierretailmodel"});
Ext.define("Hc_Framework.view.hc.HcSupplierBePutInStorage",{extend:"Hc_Common.view.BaseSimplePage",alias:"widget.hcsupplierbeputinstorage",controller:"hcsupplierbeputinstoragecontroller",viewModel:{type:"hcsupplierbeputinstoragemodel"},initComponent:function(){var a=this;Ext.apply(a,{searchItems:[{xtype:"textfield",fieldLabel:"入库编号",name:"storageNo"}],gridModel:"Hc_Framework.model.HcSupplierPurchase",gridSubGrid:"HcSupplierInquiryProduct",gridColumns:[{header:"入库编号",dataIndex:"storageNo",width:"15%",renderer:function(f,d,b,g,e,c){return'<span onclick=""><a href="#">'+f+" </a></span>"}},{header:"供 应 商名称",dataIndex:"supplierName",width:250},{dataIndex:"storageClass",header:"入库类别",width:150},{dataIndex:"register",header:"登记者",width:150},{dataIndex:"storageDate",header:"入库日期 ",width:150},{dataIndex:"storageStatus",header:"入库状态",width:150},{dataIndex:"purchaseDate",header:"采购日期",width:150}],allendflag:false,gridPrimaryKey:"inquiryNo",gridLoadUrl:Hc.basePath+"hc_supplier_inquiry_management_list/list.json",gridLoadSubUrl:Hc.basePath+"hc_supplier_inquiry_management_list/listAll.json",gridSaveUrl:Hc.basePath+"hc_supplier_inquiry_management_list/batchOperate.json",gridExportUrl:Hc.basePath+"hc_supplier_inquiry_management_list/do_export.json",gridDeleteMasterCustomerUrl:Hc.basePath+"hc_supplier_inquiry_management_list/deleteMasterCustomer.json",gridAddMasterCustomerUrl:Hc.basePath+"hc_supplier_inquiry_management_list/addMasterCustomer.json",gridImportUrl:Hc.basePath+"",subWinTableName:"Hc_Framework.view.hc.HcSupplierBePutInStorageProduct",subformActivate:false});a.callParent()}});
Ext.define("Hc_Framework.view.hc.HcSupplierBePutInStorageController",{extend:"Hc_Common.view.BaseSimplePageController",alias:"controller.hcsupplierbeputinstoragecontroller",init:function(){var a=this;Ext.apply(a,{windowFlag:true,newobj:this.view.subWinTableName});a.callParent()},onEditClick:function(g,a,d,b,f,c){},onEditClick_:function(b,a,h,c,g,i,d,f){var j=Ext.create("Hc_Common.store.Base",{model:"Hc_Framework.model.HcSupplierPurchase",autoLoad:false,groupField:"inquiredQTY_quotedPrice$",proxy:{url:this.view.gridLoadSubUrl}});j.proxy.extraParams.inquiryNo=c.data.inquiryNo;j.load();if(h==0){Ext.create(this.view.subWinTableName,{title:"编辑",record:c,me_:this,store:j}).show();this.view.subformActivate=true;this.onBtnCancelClick()}}});
Ext.define("Hc_Framework.view.hc.HcSupplierBePutInStorageModel",{extend:"Hc_Common.view.BaseSimplePageModel",alias:"viewmodel.hcsupplierbeputinstoragemodel"});
Ext.define("Hc_Framework.view.hc.HcSupplierBePutInStorageProduct",{extend:"Hc_Common.view.BaseWinPage",alias:"widget.hcsupplierpurchaseproduct",controller:"hcsupplierbeputinstorageproductcontroller",viewModel:{type:"hcsupplierbeputinstorageproductmodel"},title:"新增",width:1000,height:620,maxWidth:1000,minWidth:1000,minHeight:620,layout:"border",closeAction:"hide",plain:false,collapsible:false,modal:true,dockedItems:[{xtype:"toolbar",dock:"top",items:[{text:"保存",handler:"onBtnSaveClick",glyph:Hc.Icon.btnSave},{text:"编辑",handler:"onBtnEditClick",glyph:Hc.Icon.btnEdit},{text:"增加产品",handler:"onBtnChoiceProductClick",glyph:Hc.Icon.btnFolderOpen},{text:"删除产品",handler:"onbtnChoiceDeleteClick",glyph:Hc.Icon.btnDelete},{text:"取消",handler:"onBtnCancelClick",glyph:Hc.Icon.btnCancel}]}],listeners:{beforeshow:function(f,e){var b=Ext.create("Hc_Framework.store.CurrentUser");b.load();var a;var c;if(this.title=="新增"){c="PE"+Ext.util.Format.date((new Date()),"Y").substring(2,5)+Ext.util.Format.date((new Date()),"Y").substring(0,2)+Ext.util.Format.date((new Date()),"dmHis")}else{if(this.title=="编辑"){for(i=0;i<this.record.getFields().length;i++){var d=Ext.util.Format.trim(this.record.getFields()[i].getName());if((this.getReferences())[d]){if(this.lookupReference(d).is("combo")){this.lookupReference(d).setRawValue(this.record.get(d))}else{this.lookupReference(d).setValue(this.record.get(d))}this.lookupReference(d).disable()}}}}}},initComponent:function(){var a=this;Ext.apply(a,{items:[{title:"--->采购管理",xtype:"panel",defaults:{},layout:{type:"absolute"},region:"north",bodyStyle:"background:#cbdbe0;",padding:"3 0 3 0",items:[{xtype:"fieldset",height:30,width:980,layout:{type:"table",columns:4},x:3,y:3,padding:"3 0 0 10",items:[{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"入库编号",name:"storageNo",reference:"storageNo",listeners:{beforerender:function(b){b.fieldLabel+='<font size="2px" color="red">*</font>'}}}]},{xtype:"fieldset",height:57,width:980,layout:{type:"table",columns:4},x:3,y:40,padding:"3 0 0 10",items:[{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"供应商编号",name:"supplierNo",reference:"supplierNo"},{xtype:"textfield",labelAlign:"right",labelWidth:78,width:313,fieldLabel:"供应商名称",name:"supplierName",reference:"supplierName",colspan:3}]},{xtype:"fieldset",height:60,width:980,layout:{type:"table",columns:4},x:3,y:103,padding:"3 0 0 10",items:[{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"入库类别",name:"storageClass",reference:"storageClass"},{xtype:"datefield",labelAlign:"right",labelWidth:78,fieldLabel:"货币单位 ",name:"monetaryUnit",reference:"monetaryUnit"},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"入库日期",name:"storageDate",reference:"storageDate",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"单 据 号",name:"billNo",reference:"billNo",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"登 记 者",name:"register",reference:"register",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"是否品检",name:"whetherProductInspection",reference:"whetherProductInspection",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"品检者",name:"qualityInspector",reference:"qualityInspector",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"品检者",name:"qualityInspector",reference:"qualityInspector",}]},{xtype:"fieldset",height:30,width:980,layout:{type:"table",columns:4},x:3,y:170,padding:"3 0 0 10",items:[{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"审 批 者 ",name:"eExaminationAndApproval",reference:"eExaminationAndApproval",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"入库确认者",name:"storageConfirmation",reference:"storageConfirmation",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"入库状态",name:"storageStatus",reference:"storageStatus",}]},{xtype:"fieldset",height:130,width:980,layout:{type:"table",columns:4},x:3,y:210,padding:"3 0 0 10",items:[{xtype:"textarea",labelAlign:"right",labelWidth:78,width:800,fieldLabel:"审批意见",name:"approvalOpinion",reference:"approvalOpinion",colspan:4},{xtype:"textarea",labelAlign:"right",labelWidth:78,width:800,fieldLabel:"备&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;注",name:"remark",reference:"remark",colspan:4}]}]},{xtype:"panel",layout:{type:"fit",},region:"center",bodyStyle:"background:#ceebe0; padding:0px;border:0px",scrollable:true,items:[{xtype:"grid",enableHdMenu:false,sortableColumns:false,columnLines:true,enableColumnHide:false,enableColumnMove:false,store:a.store,features:[{ftype:"summary"}],columns:{items:[{text:"产品编号 ",dataIndex:"productModel",width:150},{text:"型号规格 ",dataIndex:"chineseName",width:150},{text:"产品名称",dataIndex:"inquiredQTY_unit",width:150},{text:"产品序号",dataIndex:"quotedPrice",width:150},{text:"订单/采购编号",dataIndex:"inquiredQTY_quotedPrice$",width:150},{text:"仓库",dataIndex:"quotedPrice",width:150},{text:"数量",dataIndex:"quotedPrice",width:150},{text:"单位",dataIndex:"quotedPrice",width:150},{text:"单价",dataIndex:"quotedPrice",width:150},{text:"合计",dataIndex:"quotedPrice",width:150,summaryType:"sum",summaryRenderer:function(d,b,c){return"金额总计:"+d}}]}}]}]});a.callParent()}});
Ext.define("Hc_Framework.view.hc.HcSupplierBePutInStorageProductController",{extend:"Hc_Common.view.BaseWinPageController",alias:"controller.hcsupplierbeputinstorageproductcontroller",flag:false,record_:"",init:function(){var c=this;var a=Ext.create("Hc_Framework.model.HcSupplierBePutInStorage",{});this.record_=a;for(i=0;i<a.getFields().length;i++){var b=Ext.util.Format.trim(a.getFields()[i].getName());if((this.getReferences())[b]){this.lookupReference(b).on("change",c.onBtnchange,c)}}c.callParent()},onBtnEditClick:function(){for(i=0;i<this.record_.getFields().length;i++){var a=Ext.util.Format.trim(this.record_.getFields()[i].getName());if((this.getReferences())[a]){if("contactsName"==a||"contactsTel"==a||"contactsFax"==a||"supplierName"==a){this.lookupReference(a).disable()}else{this.lookupReference(a).enable()}}}},onBtnchange:function(d,c,a,b){var e=this.view.me_.workObject.store;e.beginUpdate();if(d.is("combo")){this.view.record.set(d.name,d.getRawValue())}else{this.view.record.set(d.name,d.getRawValue())}if(this.view.title=="编辑"){this.flag=false}else{if(this.view.title=="新增"){this.flag=true}}e.endUpdate()},onBtnSaveClick:function(){if(this.view.title=="编辑"){this.flag=false}else{if(this.view.title=="新增"){this.flag=true}}for(i=0;i<this.record_.getFields().length-3;i++){if(!this.lookupReference(Ext.util.Format.trim(this.record_.getFields()[i].getName())).isValid()){return}}this.view.me_.workObject.store.add(this.view.record);this.view.me_.onBtnSaveClick(null,this)},onBtnCancelClick:function(){if(this.flag){this.view.me_.workObject.store.removeAt(this.view.me_.workObject.store.getCount()-1);this.view.me_.workObject.view.refresh();this.flag=false}if(this.view.title=="编辑"){this.view.me_.workObject.store.rejectChanges();this.view.me_.workObject.view.refresh()}this.view.me_.view.subformActivate=false;this.view.hide()}});
Ext.define("Hc_Framework.view.hc.HcSupplierBePutInStorageProductModel",{extend:"Hc_Common.view.BaseWinPageModel",alias:"viewmodel.hcsupplierbeputinstorageproductmodel"});
Ext.define("Hc_Framework.view.hc.HcSupplierDeliveryOfCargoFromTorage",{extend:"Hc_Common.view.BaseSimplePage",alias:"widget.hcsupplierdeliveryofcargofromstorage",controller:"hcsupplierdeliveryofcargofromstoragecontroller",viewModel:{type:"hcsupplierdeliveryofcargofromstoragemodel"},initComponent:function(){var a=this;Ext.apply(a,{searchItems:[{xtype:"textfield",fieldLabel:"出库编码",name:"storageNo"}],gridModel:"Hc_Framework.model.HcSupplierDeliveryOfCargoFromTorage",gridSubGrid:"HcSupplierInquiryProduct",gridColumns:[{header:"出库编码",dataIndex:"storageNo",width:"15%",renderer:function(f,d,b,g,e,c){return'<span onclick=""><a href="#">'+f+" </a></span>"}},{header:"订单编号",dataIndex:"supplierName",width:250},{dataIndex:"storageClass",header:"出库类型",width:150},{dataIndex:"register",header:"客户名称",width:150},{dataIndex:"storageDate",header:"付款方式 ",width:150},{dataIndex:"storageStatus",header:"责任人",width:150},{dataIndex:"purchaseDate",header:"审批状态 ",width:150}],allendflag:false,gridPrimaryKey:"inquiryNo",gridLoadUrl:Hc.basePath+"hc_supplier_inquiry_management_list/list.json",gridLoadSubUrl:Hc.basePath+"hc_supplier_inquiry_management_list/listAll.json",gridSaveUrl:Hc.basePath+"hc_supplier_inquiry_management_list/batchOperate.json",gridExportUrl:Hc.basePath+"hc_supplier_inquiry_management_list/do_export.json",gridDeleteMasterCustomerUrl:Hc.basePath+"hc_supplier_inquiry_management_list/deleteMasterCustomer.json",gridAddMasterCustomerUrl:Hc.basePath+"hc_supplier_inquiry_management_list/addMasterCustomer.json",gridImportUrl:Hc.basePath+"",subWinTableName:"Hc_Framework.view.hc.SubHcSupplierDeliveryOfCargoFromTorage",subformActivate:false});a.callParent()}});
Ext.define("Hc_Framework.view.hc.HcSupplierDeliveryOfCargoFromTorageController",{extend:"Hc_Common.view.BaseSimplePageController",alias:"controller.hcsupplierdeliveryofcargofromstoragecontroller",init:function(){var a=this;Ext.apply(a,{windowFlag:true,newobj:this.view.subWinTableName});a.callParent()},onEditClick:function(g,a,d,b,f,c){},onEditClick_:function(b,a,h,c,g,i,d,f){var j=Ext.create("Hc_Common.store.Base",{model:"Hc_Framework.model.SubHcSupplierDeliveryOfCargoFromTorage",autoLoad:false,groupField:"inquiredQTY_quotedPrice$",proxy:{url:this.view.gridLoadSubUrl}});j.proxy.extraParams.inquiryNo=c.data.inquiryNo;j.load();if(h==0){Ext.create(this.view.subWinTableName,{title:"编辑",record:c,me_:this,store:j}).show();this.view.subformActivate=true;this.onBtnCancelClick()}}});
Ext.define("Hc_Framework.view.hc.HcSupplierDeliveryOfCargoFromTorageModel",{extend:"Hc_Common.view.BaseSimplePageModel",alias:"viewmodel.hcsupplierdeliveryofcargofromstoragemodel"});
Ext.define("Hc_Framework.view.hc.SubHcSupplierDeliveryOfCargoFromTorage",{extend:"Hc_Common.view.BaseWinPage",alias:"widget.subhcsupplierdeliveryofcargofromstorage",controller:"subhcsupplierdeliveryofcargofromstoragecontroller",viewModel:{type:"subhcsupplierdeliveryofcargofromstoragemodel"},title:"新增",width:1000,height:620,maxWidth:1000,minWidth:1000,minHeight:620,layout:"border",closeAction:"hide",plain:false,collapsible:false,modal:true,dockedItems:[{xtype:"toolbar",dock:"top",items:[{text:"保存",handler:"onBtnSaveClick",glyph:Hc.Icon.btnSave},{text:"编辑",handler:"onBtnEditClick",glyph:Hc.Icon.btnEdit},{text:"增加产品",handler:"onBtnChoiceProductClick",glyph:Hc.Icon.btnFolderOpen},{text:"删除产品",handler:"onbtnChoiceDeleteClick",glyph:Hc.Icon.btnDelete},{text:"取消",handler:"onBtnCancelClick",glyph:Hc.Icon.btnCancel}]}],listeners:{beforeshow:function(f,e){var b=Ext.create("Hc_Framework.store.CurrentUser");b.load();var a;var c;if(this.title=="新增"){c="PE"+Ext.util.Format.date((new Date()),"Y").substring(2,5)+Ext.util.Format.date((new Date()),"Y").substring(0,2)+Ext.util.Format.date((new Date()),"dmHis")}else{if(this.title=="编辑"){for(i=0;i<this.record.getFields().length;i++){var d=Ext.util.Format.trim(this.record.getFields()[i].getName());if((this.getReferences())[d]){if(this.lookupReference(d).is("combo")){this.lookupReference(d).setRawValue(this.record.get(d))}else{this.lookupReference(d).setValue(this.record.get(d))}this.lookupReference(d).disable()}}}}}},initComponent:function(){var a=this;Ext.apply(a,{items:[{title:"--->采购管理",xtype:"panel",defaults:{},layout:{type:"absolute"},region:"north",bodyStyle:"background:#cbdbe0;",padding:"3 0 3 0",items:[{xtype:"fieldset",height:30,width:980,layout:{type:"table",columns:4},x:3,y:3,padding:"3 0 0 10",items:[{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"出库编码",name:"storageNo",reference:"storageNo",listeners:{beforerender:function(b){b.fieldLabel+='<font size="2px" color="red">*</font>'}}},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"订单编码",name:"supplierNo",reference:"supplierNo"}]},{xtype:"fieldset",height:30,width:980,layout:{type:"table",columns:4},x:3,y:40,padding:"3 0 0 10",items:[{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"客户编号",name:"supplierNo",reference:"supplierNo"},{xtype:"textfield",labelAlign:"right",labelWidth:78,width:313,fieldLabel:"客户名称",name:"supplierName",reference:"supplierName",colspan:3}]},{xtype:"fieldset",height:60,width:980,layout:{type:"table",columns:4},x:3,y:79,padding:"3 0 0 10",items:[{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"选择仓库",name:"storageClass",reference:"storageClass"},{xtype:"datefield",labelAlign:"right",labelWidth:78,fieldLabel:"出库类型 ",name:"monetaryUnit",reference:"monetaryUnit"},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"其它费用",name:"storageDate",reference:"storageDate",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"货　　币",name:"billNo",reference:"billNo",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"发　　票",name:"storageDate",reference:"storageDate",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"是否预付",name:"billNo",reference:"billNo",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"合同编号",name:"storageDate",reference:"storageDate",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"发货日期",name:"billNo",reference:"billNo",}]},{xtype:"fieldset",height:56,width:980,layout:{type:"table",columns:4},x:3,y:150,padding:"3 0 0 10",items:[{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"运输方式",name:"eExaminationAndApproval",reference:"eExaminationAndApproval",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"运费支付方",name:"storageConfirmation",reference:"storageConfirmation",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"运费金额",name:"storageStatus",reference:"storageStatus",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"收 货 人",name:"storageStatus",reference:"storageStatus",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"收货电话",name:"storageStatus",reference:"storageStatus",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"收货地址",name:"storageStatus",reference:"storageStatus",}]},{xtype:"fieldset",height:130,width:980,layout:{type:"table",columns:4},x:3,y:215,padding:"3 0 0 10",items:[{xtype:"textarea",labelAlign:"right",labelWidth:78,width:800,fieldLabel:"备&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;注",name:"remark",reference:"remark",colspan:4}]}]},{xtype:"panel",layout:{type:"fit",},region:"center",bodyStyle:"background:#ceebe0; padding:0px;border:0px",scrollable:true,items:[{xtype:"grid",enableHdMenu:false,sortableColumns:false,columnLines:true,enableColumnHide:false,enableColumnMove:false,store:a.store,features:[{ftype:"summary"}],columns:{items:[{text:"产品编号 ",dataIndex:"productModel",width:150},{text:"型号规格 ",dataIndex:"chineseName",width:150},{text:"产品名称",dataIndex:"inquiredQTY_unit",width:150},{text:"预出数量",dataIndex:"quotedPrice",width:150},{text:"实出数量",dataIndex:"inquiredQTY_quotedPrice$",width:150},{text:"当前库存",dataIndex:"quotedPrice",width:150},{text:"可供库存",dataIndex:"quotedPrice",width:150},{text:"仓库名称",dataIndex:"quotedPrice",width:150},{text:"备注",dataIndex:"quotedPrice",width:150}]}}]}]});a.callParent()}});
Ext.define("Hc_Framework.view.hc.SubHcSupplierDeliveryOfCargoFromTorageController",{extend:"Hc_Common.view.BaseWinPageController",alias:"controller.subhcsupplierdeliveryofcargofromstoragecontroller",flag:false,record_:"",init:function(){var c=this;var a=Ext.create("Hc_Framework.model.HcSupplierDeliveryOfCargoFromTorage",{});this.record_=a;for(i=0;i<a.getFields().length;i++){var b=Ext.util.Format.trim(a.getFields()[i].getName());if((this.getReferences())[b]){this.lookupReference(b).on("change",c.onBtnchange,c)}}c.callParent()},onBtnEditClick:function(){for(i=0;i<this.record_.getFields().length;i++){var a=Ext.util.Format.trim(this.record_.getFields()[i].getName());if((this.getReferences())[a]){if("contactsName"==a||"contactsTel"==a||"contactsFax"==a||"supplierName"==a){this.lookupReference(a).disable()}else{this.lookupReference(a).enable()}}}},onBtnchange:function(d,c,a,b){var e=this.view.me_.workObject.store;e.beginUpdate();if(d.is("combo")){this.view.record.set(d.name,d.getRawValue())}else{this.view.record.set(d.name,d.getRawValue())}if(this.view.title=="编辑"){this.flag=false}else{if(this.view.title=="新增"){this.flag=true}}e.endUpdate()},onBtnSaveClick:function(){if(this.view.title=="编辑"){this.flag=false}else{if(this.view.title=="新增"){this.flag=true}}for(i=0;i<this.record_.getFields().length-3;i++){if(!this.lookupReference(Ext.util.Format.trim(this.record_.getFields()[i].getName())).isValid()){return}}this.view.me_.workObject.store.add(this.view.record);this.view.me_.onBtnSaveClick(null,this)},onBtnCancelClick:function(){if(this.flag){this.view.me_.workObject.store.removeAt(this.view.me_.workObject.store.getCount()-1);this.view.me_.workObject.view.refresh();this.flag=false}if(this.view.title=="编辑"){this.view.me_.workObject.store.rejectChanges();this.view.me_.workObject.view.refresh()}this.view.me_.view.subformActivate=false;this.view.hide()}});
Ext.define("Hc_Framework.view.hc.SubHcSupplierDeliveryOfCargoFromTorageModel",{extend:"Hc_Common.view.BaseWinPageModel",alias:"viewmodel.subhcsupplierdeliveryofcargofromstoragemodel"});
Ext.define("Hc_Framework.view.hc.HcSupplierShipment",{extend:"Hc_Common.view.BaseSimplePage",alias:"widget.hcsuppliershipment",controller:"hcsuppliershipmentcontroller",viewModel:{type:"hcsuppliershipmentmodel"},initComponent:function(){var a=this;Ext.apply(a,{searchItems:[{xtype:"textfield",fieldLabel:"发运编号",name:"storageNo"}],gridModel:"Hc_Framework.model.HcSupplierDeliveryOfCargoFromTorage",gridSubGrid:"HcSupplierInquiryProduct",gridColumns:[{header:"发运编号",dataIndex:"storageNo",width:"15%",renderer:function(f,d,b,g,e,c){return'<span onclick=""><a href="#">'+f+" </a></span>"}},{header:"订单编号",dataIndex:"supplierName",width:250},{dataIndex:"storageClass",header:"客户名称",width:150},{dataIndex:"register",header:"运输公司",width:150},{dataIndex:"storageDate",header:"运输方式 ",width:150},{dataIndex:"storageStatus",header:"运单号",width:150},{dataIndex:"purchaseDate",header:"收货人 ",width:150},{dataIndex:"purchaseDate",header:"目标发运日 ",width:150},{dataIndex:"purchaseDate",header:"状态 ",width:150},{dataIndex:"purchaseDate",header:"是否打印 ",width:150}],allendflag:false,gridPrimaryKey:"inquiryNo",gridLoadUrl:Hc.basePath+"hc_supplier_inquiry_management_list/list.json",gridLoadSubUrl:Hc.basePath+"hc_supplier_inquiry_management_list/listAll.json",gridSaveUrl:Hc.basePath+"hc_supplier_inquiry_management_list/batchOperate.json",gridExportUrl:Hc.basePath+"hc_supplier_inquiry_management_list/do_export.json",gridDeleteMasterCustomerUrl:Hc.basePath+"hc_supplier_inquiry_management_list/deleteMasterCustomer.json",gridAddMasterCustomerUrl:Hc.basePath+"hc_supplier_inquiry_management_list/addMasterCustomer.json",gridImportUrl:Hc.basePath+"",subWinTableName:"Hc_Framework.view.hc.SubHcSupplierShipment",subformActivate:false});a.callParent()}});
Ext.define("Hc_Framework.view.hc.HcSupplierShipmentController",{extend:"Hc_Common.view.BaseSimplePageController",alias:"controller.hcsuppliershipmentcontroller",init:function(){var a=this;Ext.apply(a,{windowFlag:true,newobj:this.view.subWinTableName});a.callParent()},onEditClick:function(g,a,d,b,f,c){},onEditClick_:function(b,a,h,c,g,i,d,f){var j=Ext.create("Hc_Common.store.Base",{model:"Hc_Framework.model.SubHcSupplierDeliveryOfCargoFromTorage",autoLoad:false,groupField:"inquiredQTY_quotedPrice$",proxy:{url:this.view.gridLoadSubUrl}});j.proxy.extraParams.inquiryNo=c.data.inquiryNo;j.load();if(h==0){Ext.create(this.view.subWinTableName,{title:"编辑",record:c,me_:this,store:j}).show();this.view.subformActivate=true;this.onBtnCancelClick()}}});
Ext.define("Hc_Framework.view.hc.HcSupplierShipmentModel",{extend:"Hc_Common.view.BaseSimplePageModel",alias:"viewmodel.hcsuppliershipmentmodel"});
Ext.define("Hc_Framework.view.hc.SubHcSupplierShipment",{extend:"Hc_Common.view.BaseWinPage",alias:"widget.subhcsuppliershipment",controller:"subhcsuppliershipmentcontroller",viewModel:{type:"subhcsuppliershipmentmodel"},title:"新增",width:1000,height:620,maxWidth:1000,minWidth:1000,minHeight:620,layout:"border",closeAction:"hide",plain:false,collapsible:false,modal:true,dockedItems:[{xtype:"toolbar",dock:"top",items:[{text:"保存",handler:"onBtnSaveClick",glyph:Hc.Icon.btnSave},{text:"编辑",handler:"onBtnEditClick",glyph:Hc.Icon.btnEdit},{text:"增加产品",handler:"onBtnChoiceProductClick",glyph:Hc.Icon.btnFolderOpen},{text:"删除产品",handler:"onbtnChoiceDeleteClick",glyph:Hc.Icon.btnDelete},{text:"取消",handler:"onBtnCancelClick",glyph:Hc.Icon.btnCancel}]}],listeners:{beforeshow:function(f,e){var b=Ext.create("Hc_Framework.store.CurrentUser");b.load();var a;var c;if(this.title=="新增"){c="PE"+Ext.util.Format.date((new Date()),"Y").substring(2,5)+Ext.util.Format.date((new Date()),"Y").substring(0,2)+Ext.util.Format.date((new Date()),"dmHis")}else{if(this.title=="编辑"){for(i=0;i<this.record.getFields().length;i++){var d=Ext.util.Format.trim(this.record.getFields()[i].getName());if((this.getReferences())[d]){if(this.lookupReference(d).is("combo")){this.lookupReference(d).setRawValue(this.record.get(d))}else{this.lookupReference(d).setValue(this.record.get(d))}this.lookupReference(d).disable()}}}}}},initComponent:function(){var a=this;Ext.apply(a,{items:[{title:"--->采购管理",xtype:"panel",defaults:{},layout:{type:"absolute"},region:"north",bodyStyle:"background:#cbdbe0;",padding:"3 0 3 0",items:[{xtype:"fieldset",height:30,width:980,layout:{type:"table",columns:4},x:3,y:3,padding:"3 0 0 10",items:[{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"发运编号",name:"storageNo",reference:"storageNo",listeners:{beforerender:function(b){b.fieldLabel+='<font size="2px" color="red">*</font>'}}},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"订单编码",name:"supplierNo",reference:"supplierNo"}]},{xtype:"fieldset",height:30,width:980,layout:{type:"table",columns:4},x:3,y:40,padding:"3 0 0 10",items:[{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"客户编号",name:"supplierNo",reference:"supplierNo"},{xtype:"textfield",labelAlign:"right",labelWidth:78,width:313,fieldLabel:"客户名称",name:"supplierName",reference:"supplierName",colspan:3}]},{xtype:"fieldset",height:80,width:980,layout:{type:"table",columns:4},x:3,y:79,padding:"3 0 0 10",items:[{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"运输公司",name:"storageClass",reference:"storageClass"},{xtype:"datefield",labelAlign:"right",labelWidth:78,fieldLabel:"目 的 站 ",name:"monetaryUnit",reference:"monetaryUnit"},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"运单号",name:"storageDate",reference:"storageDate",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"运　　费",name:"billNo",reference:"billNo",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"保　　费",name:"storageDate",reference:"storageDate",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"目标起运日",name:"billNo",reference:"billNo",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"实际起运日",name:"storageDate",reference:"storageDate",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"销 售 员",name:"billNo",reference:"billNo",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"件　　数",name:"billNo",reference:"billNo",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"提货电话",name:"billNo",reference:"billNo",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"收款方式",name:"billNo",reference:"billNo",}]},{xtype:"fieldset",height:56,width:980,layout:{type:"table",columns:4},x:3,y:165,padding:"3 0 0 10",items:[{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"运输方式",name:"eExaminationAndApproval",reference:"eExaminationAndApproval",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"运费负担",name:"storageConfirmation",reference:"storageConfirmation",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"运费金额",name:"storageStatus",reference:"storageStatus",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"收 货 人",name:"storageStatus",reference:"storageStatus",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"收货电话",name:"storageStatus",reference:"storageStatus",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"送货单位",name:"storageStatus",reference:"storageStatus",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"发 货 人",name:"storageStatus",reference:"storageStatus",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"发货人电话",name:"storageStatus",reference:"storageStatus",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"所在部门",name:"storageStatus",reference:"storageStatus",}]},{xtype:"fieldset",height:130,width:980,layout:{type:"table",columns:4},x:3,y:225,padding:"3 0 0 10",items:[{xtype:"textarea",labelAlign:"right",labelWidth:78,width:800,fieldLabel:"特别要求",name:"remark",reference:"remark",colspan:4},{xtype:"textarea",labelAlign:"right",labelWidth:78,width:800,fieldLabel:"审批意见",name:"remark",reference:"remark",colspan:4},{xtype:"textarea",labelAlign:"right",labelWidth:78,width:800,fieldLabel:"备&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;注",name:"remark",reference:"remark",colspan:4}]}]},{xtype:"panel",layout:{type:"fit",},region:"center",bodyStyle:"background:#ceebe0; padding:0px;border:0px",scrollable:true,items:[{xtype:"grid",enableHdMenu:false,sortableColumns:false,columnLines:true,enableColumnHide:false,enableColumnMove:false,store:a.store,features:[{ftype:"summary"}],columns:{items:[{text:"产品编号 ",dataIndex:"productModel",width:150},{text:"型号规格 ",dataIndex:"chineseName",width:150},{text:"产品名称",dataIndex:"inquiredQTY_unit",width:150},{text:"订单数量",dataIndex:"quotedPrice",width:150},{text:"单价",dataIndex:"quotedPrice",width:150},{text:"产品序号",dataIndex:"quotedPrice",width:150},{text:"仓库名称",dataIndex:"quotedPrice",width:150}]}}]}]});a.callParent()}});
Ext.define("Hc_Framework.view.hc.SubHcSupplierShipmentController",{extend:"Hc_Common.view.BaseWinPageController",alias:"controller.subhcsuppliershipmentcontroller",flag:false,record_:"",init:function(){var c=this;var a=Ext.create("Hc_Framework.model.HcSupplierDeliveryOfCargoFromTorage",{});this.record_=a;for(i=0;i<a.getFields().length;i++){var b=Ext.util.Format.trim(a.getFields()[i].getName());if((this.getReferences())[b]){this.lookupReference(b).on("change",c.onBtnchange,c)}}c.callParent()},onBtnEditClick:function(){for(i=0;i<this.record_.getFields().length;i++){var a=Ext.util.Format.trim(this.record_.getFields()[i].getName());if((this.getReferences())[a]){if("contactsName"==a||"contactsTel"==a||"contactsFax"==a||"supplierName"==a){this.lookupReference(a).disable()}else{this.lookupReference(a).enable()}}}},onBtnchange:function(d,c,a,b){var e=this.view.me_.workObject.store;e.beginUpdate();if(d.is("combo")){this.view.record.set(d.name,d.getRawValue())}else{this.view.record.set(d.name,d.getRawValue())}if(this.view.title=="编辑"){this.flag=false}else{if(this.view.title=="新增"){this.flag=true}}e.endUpdate()},onBtnSaveClick:function(){if(this.view.title=="编辑"){this.flag=false}else{if(this.view.title=="新增"){this.flag=true}}for(i=0;i<this.record_.getFields().length-3;i++){if(!this.lookupReference(Ext.util.Format.trim(this.record_.getFields()[i].getName())).isValid()){return}}this.view.me_.workObject.store.add(this.view.record);this.view.me_.onBtnSaveClick(null,this)},onBtnCancelClick:function(){if(this.flag){this.view.me_.workObject.store.removeAt(this.view.me_.workObject.store.getCount()-1);this.view.me_.workObject.view.refresh();this.flag=false}if(this.view.title=="编辑"){this.view.me_.workObject.store.rejectChanges();this.view.me_.workObject.view.refresh()}this.view.me_.view.subformActivate=false;this.view.hide()}});
Ext.define("Hc_Framework.view.hc.SubHcSupplierShipmentModel",{extend:"Hc_Common.view.BaseWinPageModel",alias:"viewmodel.subhcsuppliershipmentmodel"});
Ext.define("Hc_Framework.view.hc.HcSupplierWarehouse",{extend:"Hc_Common.view.BaseSimplePage",alias:"widget.hcsupplierwarehouse",controller:"hcsupplierwarehousecontroller",viewModel:{type:"hcsupplierwarehousemodel"},initComponent:function(){var a=this;Ext.apply(a,{searchItems:[{xtype:"textfield",fieldLabel:"产品编号",name:"storageNo"},{xtype:"textfield",fieldLabel:"型号规格",name:"storageNo"}],gridModel:"Hc_Framework.model.HcSupplierPurchase",gridSubGrid:"HcSupplierInquiryProduct",gridColumns:[{header:"产品编号",dataIndex:"storageNo",width:"15%",renderer:function(f,d,b,g,e,c){return'<span onclick=""><a href="#">'+f+" </a></span>"}},{header:"型号规格",dataIndex:"supplierName",width:250},{dataIndex:"storageClass",header:"产品名称",width:150},{dataIndex:"register",header:"批次",width:150},{dataIndex:"storageDate",header:"当前库存 ",width:150},{dataIndex:"storageStatus",header:"最少存量",width:150},{dataIndex:"purchaseDate",header:"可供数量",width:150},{dataIndex:"purchaseDate",header:"在途数量",width:150},{dataIndex:"purchaseDate",header:"成本单价",width:150},{dataIndex:"purchaseDate",header:"建议售价",width:150},{dataIndex:"purchaseDate",header:"产品类别",width:150},{dataIndex:"purchaseDate",header:"仓库名称",width:150},{dataIndex:"purchaseDate",header:"存放位置",width:150}],allendflag:false,gridPrimaryKey:"inquiryNo",gridLoadUrl:Hc.basePath+"hc_supplier_inquiry_management_list/list.json",gridLoadSubUrl:Hc.basePath+"hc_supplier_inquiry_management_list/listAll.json",gridSaveUrl:Hc.basePath+"hc_supplier_inquiry_management_list/batchOperate.json",gridExportUrl:Hc.basePath+"hc_supplier_inquiry_management_list/do_export.json",gridDeleteMasterCustomerUrl:Hc.basePath+"hc_supplier_inquiry_management_list/deleteMasterCustomer.json",gridAddMasterCustomerUrl:Hc.basePath+"hc_supplier_inquiry_management_list/addMasterCustomer.json",gridImportUrl:Hc.basePath+"",subWinTableName:"Hc_Framework.view.hc.HcSupplierWarehouseNewEdit",subformActivate:false});a.callParent()}});
Ext.define("Hc_Framework.view.hc.HcSupplierWarehouseController",{extend:"Hc_Common.view.BaseSimplePageController",alias:"controller.hcsupplierwarehousecontroller",init:function(){var a=this;Ext.apply(a,{windowFlag:true,newobj:this.view.subWinTableName});a.callParent()},onEditClick:function(g,a,d,b,f,c){},onEditClick_:function(b,a,h,c,g,i,d,f){var j=Ext.create("Hc_Common.store.Base",{model:"Hc_Framework.model.HcSupplierWarehouse",autoLoad:false,groupField:"inquiredQTY_quotedPrice$",proxy:{url:this.view.gridLoadSubUrl}});j.proxy.extraParams.inquiryNo=c.data.inquiryNo;j.load();if(h==0){Ext.create(this.view.subWinTableName,{title:"编辑",record:c,me_:this,store:j}).show();this.view.subformActivate=true;this.onBtnCancelClick()}}});
Ext.define("Hc_Framework.view.hc.HcSupplierWarehouseModel",{extend:"Hc_Common.view.BaseSimplePageModel",alias:"viewmodel.hcsupplierwarehousemodel"});
Ext.define("Hc_Framework.view.hc.HcSupplierWarehouseNewEdit",{extend:"Hc_Common.view.BaseWinPage",alias:"widget.hcsupplierwarehousenewedit",controller:"hcsupplierwarehouseneweditcontroller",viewModel:{type:"hcsupplierwarehouseneweditmodel"},title:"新增",width:1000,height:620,maxWidth:1000,minWidth:1000,minHeight:620,layout:"border",closeAction:"hide",plain:false,collapsible:false,modal:true,scrollable:true,dockedItems:[{xtype:"toolbar",dock:"top",items:[{text:"保存",handler:"onBtnSaveClick",glyph:Hc.Icon.btnSave},{text:"编辑",handler:"onBtnEditClick",glyph:Hc.Icon.btnEdit},{text:"取消",handler:"onBtnCancelClick",glyph:Hc.Icon.btnCancel}]}],listeners:{beforeshow:function(f,e){var b=Ext.create("Hc_Framework.store.CurrentUser");b.load();var a;var c;if(this.title=="新增"){c="PE"+Ext.util.Format.date((new Date()),"Y").substring(2,5)+Ext.util.Format.date((new Date()),"Y").substring(0,2)+Ext.util.Format.date((new Date()),"dmHis")}else{if(this.title=="编辑"){for(i=0;i<this.record.getFields().length;i++){var d=Ext.util.Format.trim(this.record.getFields()[i].getName());if((this.getReferences())[d]){if(this.lookupReference(d).is("combo")){this.lookupReference(d).setRawValue(this.record.get(d))}else{this.lookupReference(d).setValue(this.record.get(d))}this.lookupReference(d).disable()}}}}}},initComponent:function(){var a=this;Ext.apply(a,{items:[{title:"--->采购管理",xtype:"panel",defaults:{},layout:{type:"absolute"},region:"north",bodyStyle:"background:#cbdbe0;",padding:"3 0 3 0",items:[{xtype:"fieldset",height:30,width:980,layout:{type:"table",columns:4},x:3,y:3,padding:"3 0 0 10",items:[{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"产品编号",name:"storageNo",reference:"storageNo",listeners:{beforerender:function(b){b.fieldLabel+='<font size="2px" color="red">*</font>'}}},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"产品名称",name:"storageNo",reference:"storageNo"},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"型号规格",name:"storageNo",reference:"storageNo"}]},{xtype:"fieldset",height:30,width:980,layout:{type:"table",columns:4},x:3,y:40,padding:"3 0 0 10",items:[{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"供应商编号",name:"supplierNo",reference:"supplierNo"},{xtype:"textfield",labelAlign:"right",labelWidth:78,width:313,fieldLabel:"供应商名称",name:"supplierName",reference:"supplierName",colspan:3}]},{xtype:"fieldset",height:60,width:980,layout:{type:"table",columns:4},x:3,y:76,padding:"3 0 0 10",items:[{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"成本单价",name:"storageClass",reference:"storageClass"},{xtype:"datefield",labelAlign:"right",labelWidth:78,fieldLabel:"公开报价 ",name:"monetaryUnit",reference:"monetaryUnit"},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"最低限价",name:"storageDate",reference:"storageDate",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"建议售价",name:"billNo",reference:"billNo",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"税　　率",name:"register",reference:"register",}]},{xtype:"fieldset",height:30,width:980,layout:{type:"table",columns:4},x:3,y:143,padding:"3 0 0 10",items:[{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"起初库存 ",name:"eExaminationAndApproval",reference:"eExaminationAndApproval",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"最少存量",name:"storageConfirmation",reference:"storageConfirmation",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"最多存量",name:"storageStatus",reference:"storageStatus",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"最小包装",name:"storageStatus",reference:"storageStatus",}]},{xtype:"fieldset",height:30,width:980,layout:{type:"table",columns:4},x:3,y:180,padding:"3 0 0 10",items:[{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"销售折扣 ",name:"eExaminationAndApproval",reference:"eExaminationAndApproval",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"销售状态",name:"storageConfirmation",reference:"storageConfirmation",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"销售提成",name:"storageStatus",reference:"storageStatus",}]},{xtype:"fieldset",height:30,width:980,layout:{type:"table",columns:4},x:3,y:215,padding:"3 0 0 10",items:[{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"品　　牌 ",name:"eExaminationAndApproval",reference:"eExaminationAndApproval",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"产品类别",name:"storageConfirmation",reference:"storageConfirmation",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"仓库名称",name:"storageStatus",reference:"storageStatus",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"存放位置",name:"storageStatus",reference:"storageStatus",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"批次  ",name:"storageStatus",reference:"storageStatus",}]},{xtype:"fieldset",height:256,width:980,layout:{type:"table",columns:4},x:3,y:250,padding:"3 0 0 10",items:[{xtype:"textarea",labelAlign:"right",labelWidth:78,width:800,fieldLabel:"产品描述",name:"approvalOpinion",reference:"approvalOpinion",colspan:4},{xtype:"textarea",labelAlign:"right",labelWidth:78,width:800,fieldLabel:"技术特性",name:"approvalOpinion",reference:"approvalOpinion",colspan:4},{xtype:"textarea",labelAlign:"right",labelWidth:78,width:800,fieldLabel:"应用范围",name:"approvalOpinion",reference:"approvalOpinion",colspan:4},{xtype:"textarea",labelAlign:"right",labelWidth:78,width:800,fieldLabel:"备&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;注",name:"remark",reference:"remark",colspan:4}]}]}]});a.callParent()}});
Ext.define("Hc_Framework.view.hc.HcSupplierWarehouseNewEditController",{extend:"Hc_Common.view.BaseWinPageController",alias:"controller.hcsupplierwarehouseneweditcontroller",flag:false,record_:"",init:function(){var c=this;var a=Ext.create("Hc_Framework.model.HcSupplierWarehouse",{});this.record_=a;for(i=0;i<a.getFields().length;i++){var b=Ext.util.Format.trim(a.getFields()[i].getName());if((this.getReferences())[b]){this.lookupReference(b).on("change",c.onBtnchange,c)}}c.callParent()},onBtnEditClick:function(){for(i=0;i<this.record_.getFields().length;i++){var a=Ext.util.Format.trim(this.record_.getFields()[i].getName());if((this.getReferences())[a]){if("contactsName"==a||"contactsTel"==a||"contactsFax"==a||"supplierName"==a){this.lookupReference(a).disable()}else{this.lookupReference(a).enable()}}}},onBtnchange:function(d,c,a,b){var e=this.view.me_.workObject.store;e.beginUpdate();if(d.is("combo")){this.view.record.set(d.name,d.getRawValue())}else{this.view.record.set(d.name,d.getRawValue())}if(this.view.title=="编辑"){this.flag=false}else{if(this.view.title=="新增"){this.flag=true}}e.endUpdate()},onBtnSaveClick:function(){if(this.view.title=="编辑"){this.flag=false}else{if(this.view.title=="新增"){this.flag=true}}for(i=0;i<this.record_.getFields().length-3;i++){if(!this.lookupReference(Ext.util.Format.trim(this.record_.getFields()[i].getName())).isValid()){return}}this.view.me_.workObject.store.add(this.view.record);this.view.me_.onBtnSaveClick(null,this)},onBtnCancelClick:function(){if(this.flag){this.view.me_.workObject.store.removeAt(this.view.me_.workObject.store.getCount()-1);this.view.me_.workObject.view.refresh();this.flag=false}if(this.view.title=="编辑"){this.view.me_.workObject.store.rejectChanges();this.view.me_.workObject.view.refresh()}this.view.me_.view.subformActivate=false;this.view.hide()}});
Ext.define("Hc_Framework.view.hc.HcSupplierWarehouseNewEditModel",{extend:"Hc_Common.view.BaseWinPageModel",alias:"viewmodel.hcsupplierwarehouseneweditmodel"});
Ext.define("Hc_Framework.view.hc.HcSupplierInquiry",{extend:"Hc_Common.view.BaseSimplePage",alias:"widget.hcsupplierinquiry",controller:"hcsupplierinquirycontroller",viewModel:{type:"hcsupplierinquirymodel"},initComponent:function(){var a=this;Ext.apply(a,{searchItems:[{xtype:"textfield",fieldLabel:"询价编号",name:"inquiryNo"}],gridModel:"Hc_Framework.model.HcSupplierInquiryManagementList",gridSubGrid:"HcSupplierInquiryProduct",gridColumns:[{header:"询价编号",dataIndex:"inquiryNo",width:"15%",renderer:function(f,d,b,g,e,c){return'<span onclick=""><a href="#">'+f+" </a></span>"}},{header:"联系人",dataIndex:"contactsName",width:250},{dataIndex:"contactsTel",header:"联系人电话",width:150},{dataIndex:"负责人",header:"personInCharge",width:150},{dataIndex:"inquiryDate",header:"询价日期",width:150}],allendflag:false,gridPrimaryKey:"inquiryNo",gridLoadUrl:Hc.basePath+"hc_supplier_inquiry_management_list/list.json",gridLoadSubUrl:Hc.basePath+"hc_supplier_inquiry_management_list/listAll.json",gridSaveUrl:Hc.basePath+"hc_supplier_inquiry_management_list/batchOperate.json",gridExportUrl:Hc.basePath+"hc_supplier_inquiry_management_list/do_export.json",gridDeleteMasterCustomerUrl:Hc.basePath+"hc_supplier_inquiry_management_list/deleteMasterCustomer.json",gridAddMasterCustomerUrl:Hc.basePath+"hc_supplier_inquiry_management_list/addMasterCustomer.json",gridImportUrl:Hc.basePath+"",subWinTableName:"Hc_Framework.view.hc.HcSupplierInquiryProduct",subformActivate:false});a.callParent()}});
Ext.define("Hc_Framework.view.hc.HcSupplierInquiryController",{extend:"Hc_Common.view.BaseSimplePageController",alias:"controller.hcsupplierinquirycontroller",init:function(){var a=this;Ext.apply(a,{windowFlag:true,newobj:this.view.subWinTableName});a.callParent()},onEditClick:function(g,a,d,b,f,c){},onEditClick_:function(b,a,h,c,g,i,d,f){var j=Ext.create("Hc_Common.store.Base",{model:"Hc_Framework.model.HcSupplierInquiryProductManagementList",autoLoad:false,groupField:"inquiredQTY_quotedPrice$",proxy:{url:this.view.gridLoadSubUrl}});j.proxy.extraParams.inquiryNo=c.data.inquiryNo;j.load();if(h==0){Ext.create(this.view.subWinTableName,{title:"编辑",record:c,me_:this,store:j}).show();this.view.subformActivate=true;this.onBtnCancelClick()}}});
Ext.define("Hc_Framework.view.hc.HcSupplierInquiryModel",{extend:"Hc_Common.view.BaseSimplePageModel",alias:"viewmodel.hcsupplierinquirymodel"});
Ext.define("Hc_Framework.view.hc.HcSupplierInquiryProduct",{extend:"Hc_Common.view.BaseWinPage",alias:"widget.hcsupplierinquiryproduct",controller:"hcsupplierinquiryproductcontroller",viewModel:{type:"hcsupplierinquiryproductmodel"},title:"新增",width:1000,height:600,maxWidth:1000,maxHeight:600,minWidth:1000,minHeight:600,layout:"border",closeAction:"hide",plain:false,collapsible:false,modal:true,dockedItems:[{xtype:"toolbar",dock:"top",items:[{text:"保存",handler:"onBtnSaveClick",glyph:Hc.Icon.btnSave},{text:"编辑",handler:"onBtnEditClick",glyph:Hc.Icon.btnEdit},{text:"增加产品",handler:"onBtnChoiceProductClick",glyph:Hc.Icon.btnFolderOpen},{text:"删除产品",handler:"onbtnChoiceDeleteClick",glyph:Hc.Icon.btnDelete},{text:"取消",handler:"onBtnCancelClick",glyph:Hc.Icon.btnCancel}]}],listeners:{beforeshow:function(f,e){var b=Ext.create("Hc_Framework.store.CurrentUser");b.load();var a;var c;if(this.title=="新增"){c="PE"+Ext.util.Format.date((new Date()),"Y").substring(2,5)+Ext.util.Format.date((new Date()),"Y").substring(0,2)+Ext.util.Format.date((new Date()),"dmHis");this.lookupReference("inquiryNo").setValue(c);this.lookupReference("contactsName").disabled=true;this.lookupReference("contactsTel").disabled=true;this.lookupReference("contactsFax").disabled=true;this.lookupReference("supplierName").disabled=true;this.lookupReference("inquiryDate").setValue(Ext.util.Format.date((new Date()),"Y-m-d H:i:s"))}else{if(this.title=="编辑"){for(i=0;i<this.record.getFields().length;i++){var d=Ext.util.Format.trim(this.record.getFields()[i].getName());if((this.getReferences())[d]){if(this.lookupReference(d).is("combo")){this.lookupReference(d).setRawValue(this.record.get(d))}else{this.lookupReference(d).setValue(this.record.get(d))}this.lookupReference(d).disable()}}}}}},initComponent:function(){var a=this;Ext.apply(a,{items:[{title:"--->供应商管理",xtype:"panel",defaults:{},layout:{type:"absolute"},region:"north",bodyStyle:"background:#cbdbe0;",padding:"3 0 3 0",items:[{xtype:"fieldset",height:30,width:980,layout:{type:"table",columns:4},x:3,y:3,padding:"3 0 0 10",items:[{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"询&nbsp;价&nbsp;编&nbsp;号&nbsp;",name:"inquiryNo",reference:"inquiryNo",listeners:{beforerender:function(b){b.fieldLabel+='<font size="2px" color="red">*</font>'}}},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"负&nbsp;&nbsp;&nbsp;&nbsp;责&nbsp;&nbsp;&nbsp;&nbsp;人",name:"personInCharge",reference:"personInCharge"}]},{xtype:"fieldset",height:57,width:980,layout:{type:"table",columns:4},x:3,y:40,padding:"3 0 0 10",items:[{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"供&nbsp;应商&nbsp;编号",name:"supplierNo",reference:"supplierNo"},{xtype:"textfield",labelAlign:"right",labelWidth:78,width:313,fieldLabel:"供&nbsp;应商&nbsp;名称",name:"supplierName",reference:"supplierName",colspan:3},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"联&nbsp;&nbsp;&nbsp;&nbsp;系&nbsp;&nbsp;&nbsp;&nbsp;人",name:"contactsName",reference:"contactsName"},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"联&nbsp;系&nbsp;电&nbsp;话",name:"contactsTel",reference:"contactsTel"},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"联&nbsp;系&nbsp;传&nbsp;真",name:"contactsFax",reference:"contactsFax"}]},{xtype:"fieldset",height:30,width:980,layout:{type:"table",columns:4},x:3,y:103,padding:"3 0 0 10",items:[{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"传&nbsp;&nbsp;输&nbsp;方&nbsp;&nbsp;式&nbsp;",name:"typeOfShipping",reference:"typeOfShipping"},{xtype:"datefield",labelAlign:"right",labelWidth:78,fieldLabel:"询&nbsp;价&nbsp;日&nbsp;期&nbsp;",name:"inquiryDate",reference:"inquiryDate"},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"询&nbsp;价&nbsp;货&nbsp;币",name:"inquiryCurrency",reference:"inquiryCurrency",colspan:3}]},{xtype:"fieldset",height:130,width:980,layout:{type:"table",columns:4},x:3,y:139,padding:"3 0 0 10",items:[{xtype:"textarea",labelAlign:"right",labelWidth:78,width:800,fieldLabel:"主&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;题",name:"subject",reference:"subject",colspan:4},{xtype:"textarea",labelAlign:"right",labelWidth:78,width:800,fieldLabel:"备&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;注",name:"remarks",reference:"remarks",colspan:4}]}]},{xtype:"panel",layout:{type:"fit",},region:"center",bodyStyle:"background:#ceebe0; padding:0px;border:0px",scrollable:true,items:[{xtype:"grid",enableHdMenu:false,sortableColumns:false,columnLines:true,enableColumnHide:false,enableColumnMove:false,store:a.store,features:[{ftype:"summary"}],columns:{items:[{text:"产品型号",dataIndex:"productModel",width:150},{text:"中文名称",dataIndex:"chineseName",width:150},{text:"询价数量",dataIndex:"inquiredQTY_unit",width:150},{text:"报价",dataIndex:"quotedPrice",width:150},{text:"合计",dataIndex:"inquiredQTY_quotedPrice$",width:150,summaryType:"sum",summaryRenderer:function(d,b,c){return"金额总计:"+d}}]}}]}]});a.callParent()}});
Ext.define("Hc_Framework.view.hc.HcSupplierInquiryProductController",{extend:"Hc_Common.view.BaseWinPageController",alias:"controller.hcsupplierinquiryproductcontroller",flag:false,record_:"",init:function(){var c=this;var a=Ext.create("Hc_Framework.model.HcSupplierInquiryManagementList",{});this.record_=a;for(i=0;i<a.getFields().length;i++){var b=Ext.util.Format.trim(a.getFields()[i].getName());if((this.getReferences())[b]){this.lookupReference(b).on("change",c.onBtnchange,c)}}c.callParent()},onBtnEditClick:function(){for(i=0;i<this.record_.getFields().length;i++){var a=Ext.util.Format.trim(this.record_.getFields()[i].getName());if((this.getReferences())[a]){if("contactsName"==a||"contactsTel"==a||"contactsFax"==a||"supplierName"==a){this.lookupReference(a).disable()}else{this.lookupReference(a).enable()}}}},onBtnchange:function(d,c,a,b){var e=this.view.me_.workObject.store;e.beginUpdate();if(d.is("combo")){this.view.record.set(d.name,d.getRawValue())}else{this.view.record.set(d.name,d.getRawValue())}if(this.view.title=="编辑"){this.flag=false}else{if(this.view.title=="新增"){this.flag=true}}e.endUpdate()},onBtnSaveClick:function(){if(this.view.title=="编辑"){this.flag=false}else{if(this.view.title=="新增"){this.flag=true}}for(i=0;i<this.record_.getFields().length-3;i++){if(!this.lookupReference(Ext.util.Format.trim(this.record_.getFields()[i].getName())).isValid()){return}}this.view.me_.workObject.store.add(this.view.record);this.view.me_.onBtnSaveClick(null,this)},onBtnCancelClick:function(){if(this.flag){this.view.me_.workObject.store.removeAt(this.view.me_.workObject.store.getCount()-1);this.view.me_.workObject.view.refresh();this.flag=false}if(this.view.title=="编辑"){this.view.me_.workObject.store.rejectChanges();this.view.me_.workObject.view.refresh()}this.view.me_.view.subformActivate=false;this.view.hide()}});
Ext.define("Hc_Framework.view.hc.HcSupplierInquiryProductModel",{extend:"Hc_Common.view.BaseWinPageModel",alias:"viewmodel.hcsupplierinquiryproductmodel"});
Ext.define("Hc_Framework.view.hc.HcSupplierContactsManagement",{extend:"Hc_Common.view.BaseSimplePage",alias:"widget.hcsuppliercontactsmanagement",controller:"hcsuppliercontactsmanagementcontroller",viewModel:{type:"hcsuppliercontactsmanagementmodel"},initComponent:function(){var a=this;Ext.apply(a,{searchItems:[{xtype:"textfield",fieldLabel:"联系人编号",name:"contactsNo"},{xtype:"textfield",fieldLabel:"联系人名称",name:"contactsName"},{xtype:"textfield",fieldLabel:"所属公司",name:"companyName"}],gridModel:"Hc_Framework.model.HcSupplierContactsManagementList",gridColumns:[{header:"联系人编号",dataIndex:"contactsNo",width:"15%",renderer:function(f,d,b,g,e,c){return'<span onclick=""><a href="#">'+f+" </a></span>"}},{header:"联系人名称",dataIndex:"contactsName",width:250},{dataIndex:"contactsTel",header:"联系人电话",width:150},{dataIndex:"email",header:"电子邮件",width:150},{dataIndex:"companyName",header:"所属公司",width:150}],allendflag:false,gridPrimaryKey:"contactsNo",gridLoadUrl:Hc.basePath+"hc_supplier_contacts_management_list/list.json",gridSaveUrl:Hc.basePath+"hc_supplier_contacts_management_list/batchOperate.json",gridExportUrl:Hc.basePath+"hc_supplier_contacts_management_list/do_export.json",gridImportUrl:Hc.basePath+"",subWinTableName:"Hc_Framework.view.hc.HcSupplierContactsManagementNewEdit"});a.callParent()}});
Ext.define("Hc_Framework.view.hc.HcSupplierContactsManagementController",{extend:"Hc_Common.view.BaseSimplePageController",alias:"controller.hcsuppliercontactsmanagementcontroller",init:function(){var a=this;Ext.apply(a,{windowFlag:true,newobj:this.view.subWinTableName});a.callParent()},onEditClick:function(g,a,d,b,f,c){},onEditClick_:function(g,i,b,a,d,h,f,c){if(b==0){Ext.create(this.view.subWinTableName,{title:"编辑",record:this.view.grid.store.getAt(h),me_:this}).show()}this.onBtnCancelClick()}});
Ext.define("Hc_Framework.view.hc.HcSupplierContactsManagementModel",{extend:"Hc_Common.view.BaseSimplePageModel",alias:"viewmodel.hcsuppliercontactsmanagementmodel"});
Ext.define("Hc_Framework.view.hc.HcSupplierContactsManagementNewEdit",{extend:"Hc_Common.view.BaseWinPage",alias:"widget.hcsuppliercontactsmanagementnewedit",controller:"hcsuppliercontactsmanagementneweditcontroller",viewModel:{type:"hcsuppliercontactsmanagementneweditmodel"},title:"新增",width:(window.screen.availWidth/7)*4.45,height:(window.screen.availHeight/3)*2,layout:"fit",closeAction:"hide",plain:false,collapsible:false,modal:true,reference:"hcsuppliercontactsmanagementnewedit",dockedItems:[{xtype:"toolbar",dock:"top",items:[{text:"保存",handler:"onBtnSaveClick",glyph:Hc.Icon.btnSave},{text:"取消",handler:"onBtnCancelClick",glyph:Hc.Icon.btnCancel}]}],listeners:{beforeshow:function(f,e){var b=Ext.create("Hc_Framework.store.CurrentUser");b.load();var a;var c;if(this.title=="新增"){this.lookupReference("createUser").setValue(b.getAt(0).data.userName);c="C0"+Ext.util.Format.date((new Date()),"Y").substring(2,5)+Ext.util.Format.date((new Date()),"Y").substring(0,2)+Ext.util.Format.date((new Date()),"dmHis");this.lookupReference("contactsNo").setValue(c);this.lookupReference("modifyUser").disabled=true;this.lookupReference("modifyDate").disabled=true;this.lookupReference("companyTel").disabled=true;this.lookupReference("companyFax").disabled=true;this.lookupReference("companyAddr").disabled=true;this.lookupReference("localDepartment").setValue(b.getAt(0).data.deptName);this.lookupReference("loginDate").setValue(Ext.util.Format.date((new Date()),"Y-m-d H:i:s"))}else{if(this.title=="编辑"){for(i=0;i<this.record.getFields().length;i++){var d=Ext.util.Format.trim(this.record.getFields()[i].getName());if((this.getReferences())[d]){if(this.lookupReference(d).is("combo")){this.lookupReference(d).setRawValue(this.record.get(d))}else{this.lookupReference(d).setValue(this.record.get(d))}}}}}}},initComponent:function(){var a=this;Ext.apply(a,{items:new Ext.form.FormPanel({title:"--->供应商管理",deferredRender:false,bodyPadding:0,layout:{type:"form"},header:{height:20,padding:0},collapsible:true,bodyStyle:"background:#dbdbe0; padding:0px;",scrollable:true,defaults:{border:false,bodyPadding:0,},items:[{layout:"column",defaults:{border:false,bodyPadding:0,labelWidth:70,labelAlign:"right",bodyStyle:"background:#cbdbe0; padding:0px;"},itemCls:"margin:0px;",bodyStyle:"background:#cbdbe0; padding:0px;border:0px",items:[{layout:"form",columnHeight:0.9,items:[{readOnly:true,labelWidth:65,xtype:"textfield",fieldLabel:"联系人编码",name:"contactsNo",reference:"contactsNo"}]},{columnWidth:0.92,layout:"form",items:[{labelWidth:65,width:550,xtype:"textfield",fieldLabel:"联系人名称",name:"contactsName",allowBlank:false,blankText:"此栏不允许为空",maxLength:120,maxLengthText:"此框允许输入不大于120个字符",minLength:5,minLengthText:"此框允许输入不少于5个字符",reference:"contactsName",listeners:{render:function(d){var c=document.createElement("font");c.setAttribute("color","red");var b=document.createTextNode("*");c.appendChild(b);d.el.dom.appendChild(c)}}}]}]},{layout:"column",defaults:{border:false,bodyPadding:0,labelWidth:70,labelAlign:"right",bodyStyle:"background:#cbdbe0; padding:0px;"},bodyStyle:"background:#cbdbe0; padding:0px;",items:[{layout:"form",items:[{labelWidth:65,xtype:"combo",fieldLabel:"性&nbsp;&nbsp;&nbsp;&nbsp;别",reference:"sex",name:"sex",allowBlank:false,value:"1",store:[["",""],[1,"男"],[0,"女"]]},{labelWidth:65,xtype:"textfield",fieldLabel:"毕业学校",reference:"graduateSchool",name:"graduateSchool"},{labelWidth:65,width:550,xtype:"textfield",fieldLabel:"电子邮件",reference:"email",name:"email",vtype:"email"}]},{columnWidth:0.4,layout:"form",items:[{labelWidth:65,xtype:"textfield",fieldLabel:"籍&nbsp;&nbsp;&nbsp;&nbsp;贯",reference:"placeOfOrigin",name:"placeOfOrigin"},{labelWidth:65,xtype:"combo",fieldLabel:"最高学历",reference:"highestDegree",name:"highestDegree",allowBlank:false,value:"5",store:[["",""],[1,"小学"],[2,"初中"],[3,"高中"],[4,"大专"],[5,"本科"],[6,"研究生"],[7,"硕士"],[8,"博士"],[9,"博士后"]]},{labelWidth:65,xtype:"textfield",fieldLabel:"职&nbsp;&nbsp;&nbsp;&nbsp;位",reference:"job",name:"job"}]},{columnWidth:0.5,layout:"form",items:[{labelWidth:65,width:550,xtype:"datefield",fieldLabel:"出生日期",name:"dateOfBirth",reference:"dateOfBirth",regex:/^(\d{4})-(0\d{1}|1[0-2])-(0\d{1}|[12]\d{1}|3[01])$/,regexText:"日期格式yyyy-mm-dd  如：1988-02-23"},{labelWidth:65,xtype:"textfield",fieldLabel:"固定电话",name:"contactsTel",regex:/^(0[0-9]{2,3}\-)?([2-9][0-9]{6,7})+(\-[0-9]{1,4})?$|(^(13[0-9]|15[0|3|6|7|8|9]|18[8|9])\d{8}$)/,regexText:"正确的电话号码，\n\n如：0591-6487256，15005059587",reference:"contactsTel"},{labelWidth:65,xtype:"textfield",fieldLabel:"部&nbsp;&nbsp;&nbsp;&nbsp;门",reference:"department",name:"department",maxLength:48,maxLengthText:"最大字符长度48字符",}]}]},{layout:"column",defaults:{border:false,bodyPadding:0,labelWidth:70,labelAlign:"right",bodyStyle:"background:#cbdbe0; padding:0px;"},bodyStyle:"background:#cbdbe0; padding:0px;",items:[{layout:"form",items:[{labelWidth:65,xtype:"textfield",fieldLabel:"公司名称",reference:"companyName",name:"companyName",allowBlank:false,blankText:"此栏不允许为空",listeners:{render:function(d){var c=document.createElement("font");c.setAttribute("color","red");var b=document.createTextNode("*");c.appendChild(b);d.el.dom.appendChild(c)}}}]},{columnWidth:0.4,layout:"form",items:[{labelWidth:65,xtype:"textfield",fieldLabel:"公司传真",reference:"companyFax",name:"companyFax",regex:/^[+]{0,1}(\d){1,3}[ ]?([-]?((\d)|[ ]){1,12})+$/,regexText:"可以匹配的字符串如：+123 -999 999 ； +123-999 999 ；123 999 999 ；+123 999999"}]},{columnWidth:0.5,layout:"form",items:[{labelWidth:65,width:550,xtype:"textfield",fieldLabel:"公司电话",reference:"companyTel",name:"companyTel",regex:/^(0[0-9]{2,3}\-)?([2-9][0-9]{6,7})+(\-[0-9]{1,4})?$|(^(13[0-9]|15[0|3|6|7|8|9]|18[8|9])\d{8}$)/,regexText:"正确的电话号码，\n\n如：0591-6487256，15005059587",}]}]},{layout:"column",defaults:{border:false,bodyPadding:0,labelWidth:70,labelAlign:"right",bodyStyle:"background:#cbdbe0; padding:0px;"},bodyStyle:"background:#cbdbe0; padding:0px;",items:[{columnWidth:0.9,layout:"form",items:[{labelWidth:65,width:550,xtype:"textfield",fieldLabel:"公司地址",reference:"companyAddr",name:"companyAddr",minLength:10,minLengthText:"此框允许输入不少于10个字符",maxLength:145,maxLengthText:"此框允许输入不大于145个字符"}]}]},{layout:"column",defaults:{border:false,bodyPadding:0,labelWidth:70,labelAlign:"right",bodyStyle:"background:#cbdbe0; padding:0px;"},bodyStyle:"background:#cbdbe0; padding:0px;",items:[{layout:"form",items:[{labelWidth:65,xtype:"textfield",fieldLabel:"项目角色",reference:"projectRole",name:"projectRole"}]},{columnWidth:0.4,layout:"form",items:[{labelWidth:65,width:550,xtype:"textfield",fieldLabel:"移动电话",reference:"mobilePhone",name:"mobilePhone",allowBlank:false,blankText:"此栏不允许为空",regex:/^1[34578]\d{9}$/,regexText:"正确的电话号码，15005059587",listeners:{render:function(d){var c=document.createElement("font");c.setAttribute("color","red");var b=document.createTextNode("*");c.appendChild(b);d.el.dom.appendChild(c)}}}]},{columnWidth:0.5,layout:"form",items:[{labelWidth:65,xtype:"combo",fieldLabel:"是否共享",reference:"whetherToShare",name:"whetherToShare",allowBlank:false,editable:false,value:"0",store:[["",""],[1,"是"],[0,"否"]]}]}]},{layout:"column",defaults:{border:false,bodyPadding:0,labelWidth:70,labelAlign:"right",bodyStyle:"background:#cbdbe0; padding:0px;"},bodyStyle:"background:#cbdbe0; padding:0px;",items:[{columnWidth:0.9,layout:"form",items:[{labelWidth:65,xtype:"textfield",fieldLabel:"通讯地址",reference:"mailingAddress",name:"mailingAddress",allowBlank:false,blankText:"此栏不允许为空",minLength:10,minLengthText:"此框允许输入不少于10个字符",maxLength:145,maxLengthText:"此框允许输入不大于145个字符",}]}]},{layout:"column",defaults:{border:false,bodyPadding:0,labelWidth:70,labelAlign:"right",bodyStyle:"background:#cbdbe0; padding:0px;"},bodyStyle:"background:#cbdbe0; padding:0px;",items:[{layout:"form",items:[{labelWidth:65,xtype:"textfield",fieldLabel:"创建用户",reference:"createUser",name:"createUser"},{labelWidth:65,xtype:"textfield",fieldLabel:"所在部门",reference:"localDepartment",name:"localDepartment"}]},{columnWidth:0.4,layout:"form",items:[{labelWidth:65,width:550,xtype:"textfield",fieldLabel:"修改用户",reference:"modifyUser",name:"modifyUser"},{labelWidth:65,xtype:"textfield",fieldLabel:"修改时间",reference:"modifyDate",name:"modifyDate"}]},{columnWidth:0.5,layout:"form",items:[{labelWidth:65,width:550,xtype:"textfield",fieldLabel:"登录日期",reference:"loginDate",name:"loginDate"}]}]},{layout:"column",defaults:{border:false,bodyPadding:0,labelWidth:70,labelAlign:"right",rows:4,bodyStyle:"background:#cbdbe0; padding:0px;"},bodyStyle:"background:#cbdbe0; padding:0px;",items:[{layout:"form",columnWidth:0.88,items:[{labelWidth:65,xtype:"textareafield",fieldLabel:"兴&nbsp;&nbsp;&nbsp;趣&nbsp;&nbsp;&nbsp;爱&nbsp;&nbsp;&nbsp;好",reference:"hobbiesAndInterests",name:"hobbiesAndInterests"},{labelWidth:65,xtype:"textareafield",fieldLabel:"印&nbsp;&nbsp;象&nbsp;&nbsp;评&nbsp;&nbsp;价",reference:"impressionEvaluation",name:"impressionEvaluation"},{labelWidth:65,xtype:"textareafield",fieldLabel:"往&nbsp;&nbsp;来&nbsp;&nbsp;策&nbsp;&nbsp;略",reference:"currentPolicy",name:"currentPolicy"},{height:6,labelWidth:65,xtype:"textareafield",fieldLabel:"备&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;注",reference:"describee",name:"describee"}]}]}]}),});a.callParent()}});
Ext.define("Hc_Framework.view.hc.HcSupplierContactsManagementNewEditController",{extend:"Hc_Common.view.BaseWinPageController",alias:"controller.hcsuppliercontactsmanagementneweditcontroller",flag:false,record_:"",init:function(){var c=this;var a=Ext.create("Hc_Framework.model.HcSupplierContactsManagementList",{});this.record_=a;for(i=0;i<a.getFields().length;i++){var b=Ext.util.Format.trim(a.getFields()[i].getName());if((this.getReferences())[b]){this.lookupReference(b).on("change",c.onBtnchange,c)}}c.callParent()},onBtnchange:function(d,c,a,b){var e=this.view.me_.workObject.store;e.beginUpdate();if(d.is("combo")){this.view.record.set(d.name,d.getRawValue())}else{this.view.record.set(d.name,d.getRawValue())}if(this.view.title=="编辑"){this.flag=false}else{if(this.view.title=="新增"){this.flag=true}}e.endUpdate()},onBtnSaveClick:function(){if(this.view.title=="编辑"){this.flag=false}else{if(this.view.title=="新增"){this.flag=true}}for(i=0;i<this.record_.getFields().length-3;i++){if(!this.lookupReference(Ext.util.Format.trim(this.record_.getFields()[i].getName())).isValid()){return}}this.view.me_.workObject.store.add(this.view.record);this.view.me_.onBtnSaveClick(null,this)},onBtnCancelClick:function(){if(this.flag){this.view.me_.workObject.store.removeAt(this.view.me_.workObject.store.getCount()-1);this.view.me_.workObject.view.refresh();this.flag=false}if(this.view.title=="编辑"){this.view.me_.onBtnCancelClick()}this.view.hide()}});
Ext.define("Hc_Framework.view.hc.HcSupplierContactsManagementNewEditModel",{extend:"Hc_Common.view.BaseWinPageModel",alias:"viewmodel.hcsuppliercontactsmanagementneweditmodel"});
Ext.define("Hc_Framework.view.hc.HcSupplierManagement",{extend:"Hc_Common.view.BaseSimplePage",alias:"widget.hcsuppliermanagement",controller:"hcsuppliermanagementcontroller",viewModel:{type:"hcsuppliermanagementmodel"},initComponent:function(){var a=this;Ext.apply(a,{searchItems:[{xtype:"textfield",fieldLabel:"供应商编号",name:"companyNo"},{xtype:"textfield",fieldLabel:"供应商名称",name:"companyName"}],gridModel:"Hc_Framework.model.HcSupplierManagementList",gridColumns:[{header:"供应商编号",dataIndex:"companyNo",width:"15%",renderer:function(f,d,b,g,e,c){return'<span onclick=""><a href="#">'+f+" </a></span>"}},{header:"供应商名称",dataIndex:"companyName",width:250},{dataIndex:"provincesAndCities",header:"供应商地址",width:150},{dataIndex:"companyTel",header:"联系电话",width:150},{dataIndex:"docPurchasing",header:"跟单采购",width:150},{dataIndex:"accountPayable",header:"应付款",width:150},{dataIndex:"overduePayment",header:"逾期款",width:"20%"}],allendflag:false,gridPrimaryKey:"supplierNo",gridLoadUrl:Hc.basePath+"hc_supplier_management_list/list.json",gridSaveUrl:Hc.basePath+"hc_supplier_management_list/batchOperate.json",gridExportUrl:Hc.basePath+"hc_supplier_management_list/do_export.json",gridImportUrl:Hc.basePath+"",subWinTableName:"Hc_Framework.view.hc.HcSupplierManagementNewEdit"});a.callParent()}});
Ext.define("Hc_Framework.view.hc.HcSupplierManagementController",{extend:"Hc_Common.view.BaseSimplePageController",alias:"controller.hcsuppliermanagementcontroller",init:function(){var a=this;Ext.apply(a,{windowFlag:true,newobj:this.view.subWinTableName});a.callParent()},onEditClick:function(g,a,d,b,f,c){},onEditClick_:function(g,i,b,a,d,h,f,c){if(b==0){Ext.create(this.view.subWinTableName,{title:"编辑",record:this.view.grid.store.getAt(h),me_:this}).show()}this.onBtnCancelClick()}});
Ext.define("Hc_Framework.view.hc.HcSupplierManagementModel",{extend:"Hc_Common.view.BaseSimplePageModel",alias:"viewmodel.hcsuppliermanagementmodel"});
Ext.define("Hc_Framework.view.hc.HcSupplierManagementNewEdit",{extend:"Hc_Common.view.BaseWinPage",alias:"widget.hcsuppliermanagementnewedit",controller:"hcsuppliermanagementneweditcontroller",viewModel:{type:"hcsuppliermanagementneweditmodel"},title:"新增",width:(window.screen.availWidth/7)*4.45,height:(window.screen.availHeight/3)*2,layout:"fit",closeAction:"hide",plain:false,collapsible:false,modal:true,reference:"hcsuppliermanagementnewedit",dockedItems:[{xtype:"toolbar",dock:"top",items:[{text:"保存",handler:"onBtnSaveClick",glyph:Hc.Icon.btnSave},{text:"取消",handler:"onBtnCancelClick",glyph:Hc.Icon.btnCancel}]}],listeners:{beforeshow:function(f,e){var b=Ext.create("Hc_Framework.store.CurrentUser");b.load();var a;var c;if(this.title=="新增"){this.lookupReference("createUser").setValue(b.getAt(0).data.userName);c="S0"+Ext.util.Format.date((new Date()),"Y").substring(2,5)+Ext.util.Format.date((new Date()),"Y").substring(0,2)+Ext.util.Format.date((new Date()),"dmHmsu");this.lookupReference("companyNo").setValue(c);this.lookupReference("modifyUser").disabled=true;this.lookupReference("modifyDate").disabled=true;this.lookupReference("localDepartment").setValue(b.getAt(0).data.deptName);this.lookupReference("loginDate").setValue(Ext.util.Format.date((new Date()),"Y-m-d H:i:s"))}else{if(this.title=="编辑"){for(i=0;i<this.record.getFields().length;i++){var d=Ext.util.Format.trim(this.record.getFields()[i].getName());if((this.getReferences())[d]){if(this.lookupReference(d).is("combo")){this.lookupReference(d).setRawValue(this.record.get(d))}else{this.lookupReference(d).setValue(this.record.get(d))}}}}}}},initComponent:function(){var a=this;Ext.apply(a,{items:new Ext.form.FormPanel({title:"--->供应商管理",deferredRender:false,bodyPadding:0,layout:{type:"form"},header:{height:20,padding:0},collapsible:true,bodyStyle:"background:#dbdbe0; padding:0px;",scrollable:true,defaults:{border:false,bodyPadding:0,},items:[{layout:"column",defaults:{border:false,bodyPadding:0,labelWidth:70,labelAlign:"right",bodyStyle:"background:#cbdbe0; padding:0px;"},itemCls:"margin:0px;",bodyStyle:"background:#cbdbe0; padding:0px;border:0px",items:[{layout:"form",columnHeight:0.9,items:[{readOnly:true,labelWidth:65,xtype:"textfield",fieldLabel:"供应商编码",name:"companyNo",reference:"companyNo"}]},{columnWidth:0.92,layout:"form",items:[{labelWidth:65,width:550,xtype:"textfield",fieldLabel:"供应商名称",name:"companyName",allowBlank:false,blankText:"此栏不允许为空",maxLength:120,maxLengthText:"此框允许输入不大于120个字符",minLength:10,minLengthText:"此框允许输入不少于10个字符",reference:"companyName",listeners:{render:function(d){var c=document.createElement("font");c.setAttribute("color","red");var b=document.createTextNode("*");c.appendChild(b);d.el.dom.appendChild(c)}}}]}]},{layout:"column",defaults:{border:false,bodyPadding:0,labelWidth:70,labelAlign:"right",bodyStyle:"background:#cbdbe0; padding:0px;"},bodyStyle:"background:#cbdbe0; padding:0px;",items:[{layout:"form",items:[{labelWidth:65,xtype:"textfield",fieldLabel:"公司电话",name:"companyTel",regex:/^(0[0-9]{2,3}\-)?([2-9][0-9]{6,7})+(\-[0-9]{1,4})?$|(^(13[0-9]|15[0|3|6|7|8|9]|18[8|9])\d{8}$)/,regexText:"正确的电话号码，\n\n如：0591-6487256，15005059587",reference:"companyTel"},{labelWidth:65,xtype:"textfield",fieldLabel:"公司网址",reference:"companyNet",name:"companyNet",vtype:"url"}]},{columnWidth:0.4,layout:"form",items:[{labelWidth:65,width:550,xtype:"textfield",fieldLabel:"公司传真",name:"companyFax",reference:"companyFax",regex:/^[+]{0,1}(\d){1,3}[ ]?([-]?((\d)|[ ]){1,12})+$/,regexText:"可以匹配的字符串如：+123 -999 999 ； +123-999 999 ；123 999 999 ；+123 999999"},{labelWidth:65,xtype:"textfield",fieldLabel:"邮 &nbsp;&nbsp;&nbsp;&nbsp; 编",reference:"companyZipCode",name:"companyZipCode",regex:/^[1-9][0-9]{5}$/,regexText:"邮政编码格式不正确！"}]},{columnWidth:0.5,layout:"form",items:[{labelWidth:65,width:550,xtype:"textfield",fieldLabel:"电子邮件",reference:"email",name:"email",vtype:"email"},{labelWidth:65,xtype:"textfield",fieldLabel:"国&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;家",reference:"country",name:"country",maxLength:48,maxLengthText:"最大字符长度48字符",}]}]},{layout:"column",defaults:{border:false,bodyPadding:0,labelWidth:70,labelAlign:"right",bodyStyle:"background:#cbdbe0; padding:0px;"},bodyStyle:"background:#cbdbe0; padding:0px;",items:[{layout:"form",columnWidth:0.3,items:[{labelWidth:65,xtype:"extcombox",store:Ext.create("Hc_Framework.store.Province"),fieldLabel:"省&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;份",reference:"province",name:"province",displaymember:"provinceName",valuemember:"provinceNo",allowBlank:false,blankText:"请选择省份",emptyText:"请选择省份",editable:false,listeners:{render:function(d){var c=document.createElement("font");c.setAttribute("color","red");var b=document.createTextNode("*");c.appendChild(b);d.el.dom.appendChild(c)},select:function(c,b){var e=a.lookupReference("city");var d=e.store;Ext.apply(d.proxy,{extraParams:{provinceNo:b.data.provinceNo},writer:{type:"json"}});d.reload();e.value=0}}}]},{layout:"form",columnWidth:0.3,items:[{labelWidth:65,fieldLabel:"城&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;市",xtype:"extcombox",store:Ext.create("Hc_Framework.store.City"),displaymember:"cityName",valuemember:"cityID",allowBlank:false,blankText:"请选择城市",emptyText:"请选择城市",editable:false,reference:"city",name:"city",listeners:{render:function(d){var c=document.createElement("font");c.setAttribute("color","red");var b=document.createTextNode("*");c.appendChild(b);d.el.dom.appendChild(c);console.info(this)}}}]},{layout:"form",columnWidth:0.8,items:[{labelWidth:65,xtype:"textfield",fieldLabel:"详细地址",name:"companyAddr",allowBlank:false,blankText:"此栏不允许为空",minLength:10,minLengthText:"此框允许输入不少于10个字符",maxLength:145,maxLengthText:"此框允许输入不大于145个字符",reference:"companyAddr",listeners:{render:function(d){var c=document.createElement("font");c.setAttribute("color","red");var b=document.createTextNode("*");c.appendChild(b);d.el.dom.appendChild(c)}}}]}]},{layout:"column",defaults:{border:false,bodyPadding:0,labelWidth:70,labelAlign:"right",bodyStyle:"background:#cbdbe0; padding:0px;"},bodyStyle:"background:#cbdbe0; padding:0px;",items:[{layout:"form",items:[{labelWidth:65,xtype:"textfield",fieldLabel:"法人代表",reference:"legalRepresentative",name:"legalRepresentative",},{labelWidth:65,xtype:"textfield",fieldLabel:"注册资本",reference:"registeredCapital",name:"registeredCapital",regex:/^[0-9]*$/,regexText:"只能输入数字！"},{labelWidth:65,xtype:"textfield",fieldLabel:"使用货币",reference:"useCurrency",name:"useCurrency"},{labelWidth:65,xtype:"textfield",fieldLabel:"年度收入",reference:"yearEarning",name:"yearEarning",regex:/^[0-9]*$/,regexText:"只能输入数字！"}]},{columnWidth:0.4,layout:"form",items:[{labelWidth:65,width:550,xtype:"textfield",fieldLabel:"组织形式",reference:"organizationForm",name:"organizationForm",},{labelWidth:65,xtype:"textfield",fieldLabel:"营业执照",reference:"businessLicense",name:"businessLicense",},{labelWidth:65,xtype:"textfield",fieldLabel:"联系人",reference:"linkMan",name:"linkMan",allowBlank:false,blankText:"此栏不允许为空",listeners:{render:function(d){var c=document.createElement("font");c.setAttribute("color","red");var b=document.createTextNode("*");c.appendChild(b);d.el.dom.appendChild(c)}}},{labelWidth:65,xtype:"textfield",fieldLabel:"跟单采购",reference:"docPurchasing",name:"docPurchasing"}]},{columnWidth:0.5,layout:"form",items:[{labelWidth:65,width:550,xtype:"textfield",fieldLabel:"供应商性质",reference:"supplierTypes",name:"supplierTypes",},{labelWidth:65,xtype:"textfield",fieldLabel:"行&nbsp;业&nbsp;类&nbsp;型",reference:"industryTypes",name:"industryTypes",},{labelWidth:65,xtype:"textfield",fieldLabel:"供应商级别",reference:"supplierLevel",name:"supplierLevel",},{labelWidth:65,xtype:"textfield",fieldLabel:"联系人手机",reference:"linkManTel",name:"linkManTel",allowBlank:false,regex:/^1[34578]\d{9}$/,regexText:"正确的电话号码，15005059587",listeners:{render:function(d){var c=document.createElement("font");c.setAttribute("color","red");var b=document.createTextNode("*");c.appendChild(b);d.el.dom.appendChild(c)}}}]}]},{layout:"column",defaults:{border:false,bodyPadding:0,labelWidth:70,labelAlign:"right",bodyStyle:"background:#cbdbe0; padding:0px;"},bodyStyle:"background:#cbdbe0; padding:0px;",items:[{layout:"form",items:[{labelWidth:65,xtype:"textfield",fieldLabel:"开户银行",reference:"bankOfDeposit",name:"bankOfDeposit"},{labelWidth:65,xtype:"textfield",fieldLabel:"付款方式",reference:"paymentMethod",name:"paymentMethod"}]},{columnWidth:0.4,layout:"form",items:[{labelWidth:65,width:550,xtype:"textfield",fieldLabel:"银行账号",reference:"bankAccount",name:"bankAccount",regex:/^(\d{16}|\d{19})$/},{labelWidth:65,xtype:"textfield",fieldLabel:"价值类别",reference:"valueCategory",name:"valueCategory",}]},{columnWidth:0.5,layout:"form",items:[{labelWidth:65,width:550,xtype:"datefield",fieldLabel:"成立日期",reference:"dateOfEstablishment",name:"dateOfEstablishment"},{labelWidth:65,xtype:"combo",fieldLabel:"是否共享",reference:"whetherToShare",name:"whetherToShare",allowBlank:false,editable:false,value:"0",store:[["",""],[1,"是"],[0,"否"]]}]}]},{layout:"column",defaults:{border:false,bodyPadding:0,labelWidth:70,labelAlign:"right",bodyStyle:"background:#cbdbe0; padding:0px;"},bodyStyle:"background:#cbdbe0; padding:0px;",items:[{layout:"form",items:[{labelWidth:65,xtype:"textfield",fieldLabel:"创建用户",reference:"createUser",name:"createUser"},{labelWidth:65,xtype:"textfield",fieldLabel:"所在部门",reference:"localDepartment",name:"localDepartment"}]},{columnWidth:0.4,layout:"form",items:[{labelWidth:65,width:550,xtype:"textfield",fieldLabel:"修改用户",reference:"modifyUser",name:"modifyUser"},{labelWidth:65,xtype:"textfield",fieldLabel:"修改时间",reference:"modifyDate",name:"modifyDate"}]},{columnWidth:0.5,layout:"form",items:[{labelWidth:65,width:550,xtype:"textfield",fieldLabel:"登录日期",reference:"loginDate",name:"loginDate"}]}]},{layout:"column",defaults:{border:false,bodyPadding:0,labelWidth:70,labelAlign:"right",rows:4,bodyStyle:"background:#cbdbe0; padding:0px;"},bodyStyle:"background:#cbdbe0; padding:0px;",items:[{layout:"form",columnWidth:0.88,items:[{labelWidth:65,xtype:"textareafield",fieldLabel:"公&nbsp;&nbsp;&nbsp;司&nbsp;&nbsp;&nbsp;规&nbsp;&nbsp;&nbsp;模",reference:"companyScale",name:"companyScale"},{labelWidth:65,xtype:"textareafield",fieldLabel:"销&nbsp;&nbsp;&nbsp;售&nbsp;&nbsp;&nbsp;能&nbsp;&nbsp;&nbsp;力",reference:"abilityToSell",name:"abilityToSell"},{labelWidth:65,xtype:"textareafield",fieldLabel:"质&nbsp;&nbsp;&nbsp;量&nbsp;&nbsp;&nbsp;控&nbsp;&nbsp;&nbsp;制",reference:"qualityControl",name:"qualityControl"},{labelWidth:65,xtype:"textareafield",fieldLabel:"公&nbsp;&nbsp;&nbsp;司&nbsp;&nbsp;&nbsp;简&nbsp;&nbsp;&nbsp;介",reference:"companyProfile",name:"companyProfile"},{labelWidth:65,xtype:"textareafield",fieldLabel:"生产/销售产品类别",reference:"categoryOfTheProduct",name:"categoryOfTheProduct"},{labelWidth:65,xtype:"textareafield",fieldLabel:"合&nbsp;&nbsp;&nbsp;作&nbsp;&nbsp;&nbsp;机&nbsp;&nbsp;&nbsp;会",reference:"cooperationOpportunities",name:"cooperationOpportunities"},{height:6,labelWidth:65,xtype:"textareafield",fieldLabel:"备&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;注",reference:"describee",name:"describee"}]}]}]}),});a.callParent()}});
Ext.define("Hc_Framework.view.hc.HcSupplierManagementNewEditController",{extend:"Hc_Common.view.BaseWinPageController",alias:"controller.hcsuppliermanagementneweditcontroller",flag:false,record_:"",init:function(){var c=this;var a=Ext.create("Hc_Framework.model.HcSupplierManagementList",{});this.record_=a;for(i=0;i<a.getFields().length;i++){var b=Ext.util.Format.trim(a.getFields()[i].getName());if((this.getReferences())[b]){this.lookupReference(b).on("change",c.onBtnchange,c)}}c.callParent()},onBtnchange:function(d,c,a,b){var e=this.view.me_.workObject.store;e.beginUpdate();if(d.is("combo")){this.view.record.set(d.name,d.getRawValue())}else{this.view.record.set(d.name,d.getRawValue())}if(this.view.title=="编辑"){this.flag=false}else{if(this.view.title=="新增"){this.flag=true}}e.endUpdate()},onBtnSaveClick:function(){if(this.view.title=="编辑"){this.flag=false}else{if(this.view.title=="新增"){this.flag=true}}for(i=0;i<this.record_.getFields().length-3;i++){if(!this.lookupReference(Ext.util.Format.trim(this.record_.getFields()[i].getName())).isValid()){return}}this.view.me_.workObject.store.add(this.view.record);this.view.me_.onBtnSaveClick(null,this)},onBtnCancelClick:function(){if(this.flag){this.view.me_.workObject.store.removeAt(this.view.me_.workObject.store.getCount()-1);this.view.me_.workObject.view.refresh();this.flag=false}if(this.view.title=="编辑"){this.view.me_.onBtnCancelClick()}this.view.hide()}});
Ext.define("Hc_Framework.view.hc.HcSupplierManagementNewEditModel",{extend:"Hc_Common.view.BaseWinPageModel",alias:"viewmodel.hcsuppliermanagementneweditmodel"});
Ext.define("Hc_Framework.view.hc.HcSupplierPurchase",{extend:"Hc_Common.view.BaseSimplePage",alias:"widget.hcsupplierpurchase",controller:"hcsupplierpurchasecontroller",viewModel:{type:"hcsupplierpurchasemodel"},initComponent:function(){var a=this;Ext.apply(a,{searchItems:[{xtype:"textfield",fieldLabel:"采购编号",name:"purchaseNo"}],gridModel:"Hc_Framework.model.HcSupplierPurchase",gridSubGrid:"HcSupplierInquiryProduct",gridColumns:[{header:"采购编号",dataIndex:"purchaseNo",width:"15%",renderer:function(f,d,b,g,e,c){return'<span onclick=""><a href="#">'+f+" </a></span>"}},{header:"是否采购过",dataIndex:"whetherToPurchase",width:250},{dataIndex:"supplierName",header:"供 应 商名称",width:150},{dataIndex:"salesNo",header:"销售编号",width:150},{dataIndex:"personInCharge",header:"负 责 人",width:150},{dataIndex:"purchaseStates",header:"采购单状态",width:150},{dataIndex:"purchaseDate",header:"采购日期",width:150}],allendflag:false,gridPrimaryKey:"inquiryNo",gridLoadUrl:Hc.basePath+"hc_supplier_inquiry_management_list/list.json",gridLoadSubUrl:Hc.basePath+"hc_supplier_inquiry_management_list/listAll.json",gridSaveUrl:Hc.basePath+"hc_supplier_inquiry_management_list/batchOperate.json",gridExportUrl:Hc.basePath+"hc_supplier_inquiry_management_list/do_export.json",gridDeleteMasterCustomerUrl:Hc.basePath+"hc_supplier_inquiry_management_list/deleteMasterCustomer.json",gridAddMasterCustomerUrl:Hc.basePath+"hc_supplier_inquiry_management_list/addMasterCustomer.json",gridImportUrl:Hc.basePath+"",subWinTableName:"Hc_Framework.view.hc.HcSupplierPurchaseProduct",subformActivate:false});a.callParent()}});
Ext.define("Hc_Framework.view.hc.HcSupplierPurchaseController",{extend:"Hc_Common.view.BaseSimplePageController",alias:"controller.hcsupplierpurchasecontroller",init:function(){var a=this;Ext.apply(a,{windowFlag:true,newobj:this.view.subWinTableName});a.callParent()},onEditClick:function(g,a,d,b,f,c){},onEditClick_:function(b,a,h,c,g,i,d,f){var j=Ext.create("Hc_Common.store.Base",{model:"Hc_Framework.model.HcSupplierPurchase",autoLoad:false,groupField:"inquiredQTY_quotedPrice$",proxy:{url:this.view.gridLoadSubUrl}});j.proxy.extraParams.inquiryNo=c.data.inquiryNo;j.load();if(h==0){Ext.create(this.view.subWinTableName,{title:"编辑",record:c,me_:this,store:j}).show();this.view.subformActivate=true;this.onBtnCancelClick()}}});
Ext.define("Hc_Framework.view.hc.HcSupplierPurchaseModel",{extend:"Hc_Common.view.BaseSimplePageModel",alias:"viewmodel.hcsupplierpurchasemodel"});
Ext.define("Hc_Framework.view.hc.HcSupplierPurchaseProduct",{extend:"Hc_Common.view.BaseWinPage",alias:"widget.hcsupplierpurchaseproduct",controller:"hcsupplierpurchaseproductcontroller",viewModel:{type:"hcsupplierpurchaseproductmodel"},title:"新增",width:1000,height:620,maxWidth:1000,minWidth:1000,minHeight:620,layout:"border",closeAction:"hide",plain:false,collapsible:false,modal:true,dockedItems:[{xtype:"toolbar",dock:"top",items:[{text:"保存",handler:"onBtnSaveClick",glyph:Hc.Icon.btnSave},{text:"编辑",handler:"onBtnEditClick",glyph:Hc.Icon.btnEdit},{text:"增加产品",handler:"onBtnChoiceProductClick",glyph:Hc.Icon.btnFolderOpen},{text:"删除产品",handler:"onbtnChoiceDeleteClick",glyph:Hc.Icon.btnDelete},{text:"取消",handler:"onBtnCancelClick",glyph:Hc.Icon.btnCancel}]}],listeners:{beforeshow:function(f,e){var b=Ext.create("Hc_Framework.store.CurrentUser");b.load();var a;var c;if(this.title=="新增"){c="PE"+Ext.util.Format.date((new Date()),"Y").substring(2,5)+Ext.util.Format.date((new Date()),"Y").substring(0,2)+Ext.util.Format.date((new Date()),"dmHis");this.lookupReference("inquiryNo").setValue(c);this.lookupReference("contactsName").disabled=true;this.lookupReference("contactsTel").disabled=true;this.lookupReference("contactsFax").disabled=true;this.lookupReference("supplierName").disabled=true;this.lookupReference("inquiryDate").setValue(Ext.util.Format.date((new Date()),"Y-m-d H:i:s"))}else{if(this.title=="编辑"){for(i=0;i<this.record.getFields().length;i++){var d=Ext.util.Format.trim(this.record.getFields()[i].getName());if((this.getReferences())[d]){if(this.lookupReference(d).is("combo")){this.lookupReference(d).setRawValue(this.record.get(d))}else{this.lookupReference(d).setValue(this.record.get(d))}this.lookupReference(d).disable()}}}}}},initComponent:function(){var a=this;Ext.apply(a,{items:[{title:"--->采购管理",xtype:"panel",defaults:{},layout:{type:"absolute"},region:"north",bodyStyle:"background:#cbdbe0;",padding:"3 0 3 0",items:[{xtype:"fieldset",height:30,width:980,layout:{type:"table",columns:4},x:3,y:3,padding:"3 0 0 10",items:[{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"采&nbsp;购&nbsp;编&nbsp;号&nbsp; ",name:"purchaseNo",reference:"purchaseNo",listeners:{beforerender:function(b){b.fieldLabel+='<font size="2px" color="red">*</font>'}}}]},{xtype:"fieldset",height:57,width:980,layout:{type:"table",columns:4},x:3,y:40,padding:"3 0 0 10",items:[{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"供&nbsp;应商&nbsp;编号",name:"supplierNo",reference:"supplierNo"},{xtype:"textfield",labelAlign:"right",labelWidth:78,width:313,fieldLabel:"供&nbsp;应商&nbsp;名称",name:"supplierName",reference:"supplierName",colspan:3},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"联&nbsp;&nbsp;&nbsp;&nbsp;系&nbsp;&nbsp;&nbsp;&nbsp;人",name:"contactsName",reference:"contactsName"},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"联&nbsp;系&nbsp;电&nbsp;话",name:"contactsTel",reference:"contactsTel"}]},{xtype:"fieldset",height:60,width:980,layout:{type:"table",columns:4},x:3,y:103,padding:"3 0 0 10",items:[{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"运&nbsp;输&nbsp;方&nbsp;式",name:"typeOfShipping",reference:"typeOfShipping"},{xtype:"datefield",labelAlign:"right",labelWidth:78,fieldLabel:"是否采购过 ",name:"whetherToPurchase",reference:"whetherToPurchase"},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"是&nbsp;否&nbsp;品&nbsp;检",name:"whetherProductInspection",reference:"whetherProductInspection",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"发&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;票",name:"invoices",reference:"invoices",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"税&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;率",name:"taxRate",reference:"taxRate",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"交&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;期",name:"deliveryPeriod",reference:"deliveryPeriod",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"付&nbsp;款&nbsp;方&nbsp;式",name:"paymentMethod",reference:"paymentMethod",}]},{xtype:"fieldset",height:30,width:980,layout:{type:"table",columns:4},x:3,y:170,padding:"3 0 0 10",items:[{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"&nbsp;交&nbsp;货&nbsp;地&nbsp;点&nbsp; ",name:"placeOfDelivery",reference:"placeOfDelivery",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"质&nbsp;量&nbsp;保&nbsp;证&nbsp; ",name:"qualityAssurance",reference:"qualityAssurance",}]},{xtype:"fieldset",height:130,width:980,layout:{type:"table",columns:4},x:3,y:210,padding:"3 0 0 10",items:[{xtype:"textarea",labelAlign:"right",labelWidth:78,width:800,fieldLabel:"开&nbsp;&nbsp;票&nbsp;&nbsp;信&nbsp;&nbsp;息",name:"subject",reference:"subject",colspan:4},{xtype:"textarea",labelAlign:"right",labelWidth:78,width:800,fieldLabel:"备&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;注",name:"remarks",reference:"remarks",colspan:4}]}]},{xtype:"panel",layout:{type:"fit",},region:"center",bodyStyle:"background:#ceebe0; padding:0px;border:0px",scrollable:true,items:[{xtype:"grid",enableHdMenu:false,sortableColumns:false,columnLines:true,enableColumnHide:false,enableColumnMove:false,store:a.store,features:[{ftype:"summary"}],columns:{items:[{text:"产品编号 ",dataIndex:"productModel",width:150},{text:"型号规格 ",dataIndex:"chineseName",width:150},{text:"产品描述",dataIndex:"inquiredQTY_unit",width:150},{text:"采购数量",dataIndex:"quotedPrice",width:150},{text:"预计交货日期",dataIndex:"inquiredQTY_quotedPrice$",width:150},{text:"仓库",dataIndex:"quotedPrice",width:150},{text:"仓库库存",dataIndex:"quotedPrice",width:150},{text:"成本单价",dataIndex:"quotedPrice",width:150},{text:"采购单价",dataIndex:"quotedPrice",width:150},{text:"合计",dataIndex:"quotedPrice",width:150,summaryType:"sum",summaryRenderer:function(d,b,c){return"金额总计:"+d}}]}}]}]});a.callParent()}});
Ext.define("Hc_Framework.view.hc.HcSupplierPurchaseProductController",{extend:"Hc_Common.view.BaseWinPageController",alias:"controller.hcsupplierpurchaseproductcontroller",flag:false,record_:"",init:function(){var c=this;var a=Ext.create("Hc_Framework.model.HcSupplierPurchase",{});this.record_=a;for(i=0;i<a.getFields().length;i++){var b=Ext.util.Format.trim(a.getFields()[i].getName());if((this.getReferences())[b]){this.lookupReference(b).on("change",c.onBtnchange,c)}}c.callParent()},onBtnEditClick:function(){for(i=0;i<this.record_.getFields().length;i++){var a=Ext.util.Format.trim(this.record_.getFields()[i].getName());if((this.getReferences())[a]){if("contactsName"==a||"contactsTel"==a||"contactsFax"==a||"supplierName"==a){this.lookupReference(a).disable()}else{this.lookupReference(a).enable()}}}},onBtnchange:function(d,c,a,b){var e=this.view.me_.workObject.store;e.beginUpdate();if(d.is("combo")){this.view.record.set(d.name,d.getRawValue())}else{this.view.record.set(d.name,d.getRawValue())}if(this.view.title=="编辑"){this.flag=false}else{if(this.view.title=="新增"){this.flag=true}}e.endUpdate()},onBtnSaveClick:function(){if(this.view.title=="编辑"){this.flag=false}else{if(this.view.title=="新增"){this.flag=true}}for(i=0;i<this.record_.getFields().length-3;i++){if(!this.lookupReference(Ext.util.Format.trim(this.record_.getFields()[i].getName())).isValid()){return}}this.view.me_.workObject.store.add(this.view.record);this.view.me_.onBtnSaveClick(null,this)},onBtnCancelClick:function(){if(this.flag){this.view.me_.workObject.store.removeAt(this.view.me_.workObject.store.getCount()-1);this.view.me_.workObject.view.refresh();this.flag=false}if(this.view.title=="编辑"){this.view.me_.workObject.store.rejectChanges();this.view.me_.workObject.view.refresh()}this.view.me_.view.subformActivate=false;this.view.hide()}});
Ext.define("Hc_Framework.view.hc.HcSupplierPurchaseProductModel",{extend:"Hc_Common.view.BaseWinPageModel",alias:"viewmodel.hcsupplierpurchaseproductmodel"});
Ext.define("Hc_Framework.view.homepage.HomePage",{extend:"Ext.Container",alias:"widget.homepage_",title:"首页",id:"app-homepage",layout:{type:"fit",align:"middle"},initComponent:function(){this.callParent()}});
Ext.define("Hc_Framework.view.itgapplication.ItgApplication",{extend:"Hc_Common.view.BaseSimplePage",alias:"widget.itgapplication",controller:"itgapplication",viewModel:{type:"itgapplication"},initComponent:function(){var b=this,a=Ext.create("Hc_Framework.store.ItgProject");Ext.apply(b,{searchItems:[{xtype:"extcombox",fieldLabel:"所属项目",name:"projectCode",store:a,displaymember:"projectName",valuemember:"projectCode"},{xtype:"textfield",fieldLabel:"应用编码",name:"appCode"},{xtype:"textfield",fieldLabel:"应用名称",name:"appName"},{xtype:"combouseflag",fieldLabel:"启用状态",name:"enableFlag"}],gridModel:"Hc_Framework.model.ItgApplication",gridColumns:[{dataIndex:"appNo",text:"应用编号",editor:{allowBlank:false}},{dataIndex:"appCode",text:"应用编码",editor:{allowBlank:false}},{dataIndex:"appName",text:"应用名称",editor:{allowBlank:false},width:160},{dataIndex:"projectCode",text:"所属项目",editor:{allowBlank:false},width:150,xtype:"bllookupedit",estore:a,gstore:a,displaymember:"projectName",valuemember:"projectCode"},{dataIndex:"appUrl",text:"系统url",editor:{allowBlank:false},width:160},{dataIndex:"jsUrl",text:"jsurl",editor:{allowBlank:false},width:180},{dataIndex:"enableFlag",text:"启用状态",type:"int",editor:{xtype:"combouseflag",allowBlank:false},renderer:"renderUseFlag",width:60},{dataIndex:"imageUrl",text:"图标路径",editor:true},{dataIndex:"imageName",text:"图标名称",editor:true},{dataIndex:"orderNo",text:"排列序号",type:"int",editor:{type:"numberfield"}},{header:"备注",dataIndex:"remarks",editor:true,width:135},{header:"建档人",dataIndex:"creator",width:100},{header:"建档时间",dataIndex:"createTime",width:135},{header:"修改人",dataIndex:"modifier",width:100},{header:"修改时间",dataIndex:"modifyTime",width:135}],gridPrimaryKey:"appNo",gridUnionKey:"",gridLoadUrl:Hc.basePath+"itg_application/list.json",gridSaveUrl:Hc.basePath+"itg_application/batchOperate.json",gridExportUrl:Hc.basePath+"itg_application/do_export.json",gridImportUrl:Hc.basePath+""});b.callParent()}});
Ext.define("Hc_Framework.view.itgapplication.ItgApplicationController",{extend:"Hc_Common.view.BaseSimplePageController",alias:"controller.itgapplication"});
Ext.define("Hc_Framework.view.itgapplication.ItgApplicationModel",{extend:"Hc_Common.view.BaseSimplePageModel",alias:"viewmodel.itgapplication"});
Ext.define("Hc_Framework.view.itgloginuser.ItgLoginUser",{extend:"Hc_Common.view.BaseSimplePage",alias:"widget.itgloginuser",controller:"itgloginuser",viewModel:{type:"itgloginuser"},initComponent:function(c){var b=this;var a=Ext.create("Hc_Framework.store.ItgDepartment");Ext.apply(b,{searchItems:[{fieldLabel:"所属部门",name:"deptNo",xtype:"extcombox",store:a,displaymember:"deptName",valuemember:"deptNo"},{xtype:"textfield",fieldLabel:"用户账号",name:"userCode"},{xtype:"textfield",fieldLabel:"用户名称",name:"userName"},{xtype:"combouseflag",fieldLabel:"启用状态",name:"enableFlag"}],gridModel:"Hc_Framework.model.ItgLoginUser",gridColumns:[{dataIndex:"userCode",header:"用户账号",editor:{allowBlank:false,regex:/^[a-zA-Z0-9.@\-\_]+$/,regexText:"请输入字母、数字与.@-_特殊字符"}},{dataIndex:"userName",header:"用户名称",editor:{allowBlank:false}},{dataIndex:"password",header:"密码",editor:{allowBlank:false,inputType:"password"},renderer:function(){return"*"}},{dataIndex:"deptNo",header:"所属部门",editor:{allowBlank:false},width:160,xtype:"bllookupedit",estore:a,gstore:a,displaymember:"deptName",valuemember:"deptNo"},{dataIndex:"mobileNo",header:"手机号码",editor:true},{dataIndex:"email",header:"邮箱",editor:true,width:135,vtype:"email"},{dataIndex:"enableFlag",header:"启用状态",editor:{allowBlank:false},xtype:"bllookupedit",displayvalue:"0=禁用:1=启用",width:60},{header:"备注",dataIndex:"remarks",editor:true,width:135},{header:"建档人",dataIndex:"creator",width:100},{header:"建档时间",dataIndex:"createTime",width:135},{header:"修改人",dataIndex:"modifier",width:100},{header:"修改时间",dataIndex:"modifyTime",width:135}],gridPrimaryKey:"userCode",gridUnionKey:"",gridLoadUrl:Hc.basePath+"itg_login_user/list.json",gridSaveUrl:Hc.basePath+"itg_login_user/batchOperate.json",gridExportUrl:Hc.basePath+"itg_login_user/do_export.json",gridImportUrl:Hc.basePath+""});b.callParent(c)}});
Ext.define("Hc_Framework.view.itgloginuser.ItgLoginUserController",{extend:"Hc_Common.view.BaseSimplePageController",alias:"controller.itgloginuser",onGridAfterEdit:function(c,b){var d=b.value;var a=b.originalValue;this.callParent(arguments);if(b.field=="password"){if(d==a){return}else{var e=hex_md5(d);b.record.set("password",e)}}},onBtnCopyClick:function(e){var g=this,d=g.workObject,b=g.workObject.store,c=g.workObject.primaryKey,f=g.workObject.getSelection(),a;if(f.length<1){return}if(!d.isCanAdd||d.isReadOnly){Hc.alert("此网格不允许新增数据");return}if(d.isMaster&&this.editingList.length>0){Hc.alert("您有一笔数据正在处理，不能复制主表记录");return}Ext.Array.each(f,function(h){a=Ext.create(b.model);Ext.apply(a.data,h.data);a.set(c,"");a.set("_flag","A");a.set("password","");b.add(a)})}});
Ext.define("Hc_Framework.view.itgloginuser.ItgLoginUserModel",{extend:"Hc_Common.view.BaseSimplePageModel",alias:"viewmodel.itgloginuser"});
Ext.define("Hc_Framework.view.itgmenu.ItgMenu",{extend:"Hc_Common.view.BaseSimplePage",alias:"widget.itgmenu",controller:"itgmenu",viewModel:{type:"itgmenu"},initComponent:function(){var a=this;a.gridEditModel="none";a.gridCanDrag=true;a.gridCanEdit=false;Ext.apply(a,{searchItems:[{xtype:"combo",width:"250",reference:"ddlProjectCode",editable:false,triggerAction:"all",fieldLabel:"项目编码",allowBlank:false,name:"projectCode",displayField:"projectName",valueField:"projectCode",store:{model:"Hc_Framework.model.ItgProject",type:"basestore",autoLoad:true,proxy:{url:Hc.basePath+"itg_project/list.json"}}}],gridModel:"Hc_Framework.model.ItgApplication",gridColumns:[{header:"模块ID",dataIndex:"moduleNo"},{header:"模块编号",dataIndex:"moduleCode"},{header:"模块名称",dataIndex:"moduleName",flex:1},{header:"项目代号",dataIndex:"projectCode",width:50},{header:"系统ID",dataIndex:"appNo",width:50},{header:"是否可用",dataIndex:"enableFlag"},{header:"是否报表",dataIndex:"isReport"},{header:"URL",dataIndex:"moduleUrl",width:140},{header:"权限值",dataIndex:"rightValue",width:50},{header:"备注",dataIndex:"remarks"}],gridPrimaryKey:"appCode",gridUnionKey:"",gridLoadUrl:Hc.basePath+"itg_module_list/list.json?inMenu=false"});a.otherItems=[{xtype:"treepanel",region:"west",split:true,reference:"menutree",width:200,batchUrl:Hc.basePath+"itg_menu_list/batchOperate.json",rootVisible:false,lines:true,columns:[{xtype:"treecolumn",flex:1,dataIndex:"menuName",text:"菜单名称",sortable:false,hideable:false}],store:{model:"Hc_Framework.model.ItgMenuList",type:"treebase",proxy:{type:"ajax",url:Hc.basePath+"itg_menu_list/list.json"},root:{id:0,menuName:"hc",menuNo:0,expanded:false},nodeParam:"parentMenuNo",parentIdProperty:"parentMenuNo"},listeners:{selectionchange:"onTreeSelectionChange"},viewConfig:{listeners:{render:function(b){var c=new Ext.dd.DropTarget(b.el,{ddGroup:"dd_commongrid",copy:false,notifyDrop:function(d,h,i){var g=a.lookupReference("menutree"),f=g.selection;if(!f){return true}if(f.isLeaf()){f=f.parentNode}var e=[];Ext.Array.each(i.records,function(j){e.push({menuName:j.data.moduleName,moduleNo:j.data.moduleNo,parentMenuNo:f.id,projectCode:f.data.projectCode,appNo:f.data.appNo,enableFlag:1,searchCode:f.data.searchCode,levelNo:f.data.levelNo+1,orderNo:f.data.orderNo})});a.controller.saveData({data:{insertList:e},srcObj:g});return true}})}}}},{xtype:"window",autoShow:false,closeAction:"hide",reference:"editWin",modal:true,items:[{xtype:"form",items:[{name:"appNo",fieldLabel:"应用编号",xtype:"numberfield"},{name:"menuName",fieldLabel:"菜单名称",xtype:"textfield"},{name:"searchCode",fieldLabel:"查询码",xtype:"textfield"},{name:"levelNo",fieldLabel:"层级",xtype:"numberfield"},{name:"orderNo",fieldLabel:"排序码",xtype:"numberfield"}],layout:{type:"table",columns:2},bodyPadding:10}],title:"新增菜单",bbar:["->",{xtype:"button",text:"确认",handler:"btnSaveMenu"},{xtype:"button",text:"取消",handler:function(b){b.up("window").close()}}]}];a.callParent()}});
Ext.define("Hc_Framework.view.itgmenu.ItgMenuController",{extend:"Hc_Common.view.BaseSimplePageController",alias:"controller.itgmenu",init:function(){var b=this,a=b.getObjList();b.workObject=a.menutree;if(a.btnUndo){a.btnUndo.setVisible(false)}if(a.btnCancel){a.btnCancel.setVisible(false)}if(a.btnSave){a.btnSave.setVisible(false)}if(a.btnAdd){delete a.btnAdd.menu}b.callParent(arguments)},beforeSearch:function(){var c=this.getObjList(),a=c.mastergrid.store,b=c.ddlProjectCode.getValue();a.proxy.extraParams.projectCode=b;a.reload()},btnSaveMenu:function(c){var f={},a=this.view.workObject,d=c.up("window").down("form"),b=d.getRecord(),e=d.getValues();if(b.phantom){e.parentMenuNo=b.data.parentMenuNo;e.projectCode=b.data.projectCode;e.enableFlag=1;f.insertList=[e]}else{f.updateList=[e]}this.saveData({srcObj:a,btn:c,data:f})},onBtnAddClick:function(){var d=this.lookupReference("ddlProjectCode").getValue();if(!d){Hc.alert("请选择项目编号");return}var e=this.lookupReference("editWin"),a=this.lookupReference("menutree"),c=a.store,b=Ext.create(c.model,{projectCode:d,parentMenuNo:a.selection?a.selection.id:0});e.show();e.down("form").loadRecord(b)},onBtnEditClick:function(){var b=this.lookupReference("editWin"),a=this.lookupReference("menutree").selection;if(a){b.show();b.down("form").loadRecord(a)}},onBtnCancelClick:function(){var a=this.getView().workObject;a.store.rejectChanges();a.view.refresh()},onBtnDeleteClick:function(b){var c=this,a=c.lookupReference("menutree"),d={deleteList:[{menuNo:a.selection.id}]};c.saveData({srcObj:a,btn:b,data:d})},onGridSelectionChange:function(){},onTreeSelectionChange:function(d,a){var b=this,c=b.getReferences();if(this.canDelete()&&c.btnDelete){c.btnDelete.setDisabled(a.length===0)}if(this.canPrint()&&c.btnPrint){c.btnPrint.setDisabled(a.length===0)}if(this.canEdit()&&c.btnEdit){c.btnEdit.setDisabled(a.length===0)}},afterSave:function(a,b){if(a.result.resultCode=="0"){b.srcObj.store.reload();b.srcObj.view.refresh()}else{Hc.alert(a.result.msg)}if(b.btn){b.btn.setDisabled(false);if(b.btn.up("window")){b.btn.up("window").close()}}else{this.lookupReference("mastergrid").store.reload()}}});
Ext.define("Hc_Framework.view.itgmenu.ItgMenuModel",{extend:"Hc_Common.view.BaseSimplePageModel",alias:"viewmodel.itgmenu"});
Ext.define("Hc_Framework.view.itgmenulist.ItgMenuList",{extend:"Hc_Common.view.BaseTreePage",alias:"widget.itgmenulist",controller:"itgmenulist",viewModel:{type:"itgmenulist"},initComponent:function(){var a=this;a.tree.columns=[{dataIndex:"menuNo",text:"菜单编号",xtype:"treecolumn",width:200},{dataIndex:"menuName",text:"菜单名称"},{dataIndex:"appNo",text:"应用编号"},{dataIndex:"projectCode",text:"项目编号"},{dataIndex:"moduleNo",text:"模块编号"},{dataIndex:"enableFlag",text:"启用标识"},{dataIndex:"parentMenuNo",text:"父级Id"},{dataIndex:"searchCode",text:"查询码"},{dataIndex:"levelNo",text:"层级"},{dataIndex:"orderNo",text:"排序码"},{dataIndex:"creator",text:"创建人员"},{dataIndex:"createTime",text:"创建日期"},{dataIndex:"modifier",text:"更改人员"},{dataIndex:"modifyTime",text:"更改日期"},{dataIndex:"remarks",text:"备注"},];a.tree.batchUrl=Hc.basePath+"itg_menu_list/batchOperate.json";a.tree.autoLoad=true;a.detailItem=[{name:"menuNo",fieldLabel:"菜单编号",xtype:"numberfield",bind:{value:"{theRow.menuNo}"}},{name:"menuName",fieldLabel:"菜单名称",xtype:"textfield",bind:{value:"{theRow.menuName}"}},{name:"appNo",fieldLabel:"应用编号",xtype:"numberfield",bind:{value:"{theRow.appNo}"}},{name:"projectCode",fieldLabel:"项目编号",xtype:"textfield",bind:{value:"{theRow.projectCode}"}},{name:"moduleNo",fieldLabel:"模块编号",xtype:"numberfield",bind:{value:"{theRow.moduleNo}"}},{name:"enableFlag",fieldLabel:"启用标识",xtype:"combouseflag",bind:{value:"{theRow.enableFlag}"}},{name:"parentMenuNo",fieldLabel:"父级Id",xtype:"numberfield",bind:{value:"{theRow.parentMenuNo}"}},{name:"searchCode",fieldLabel:"查询码",xtype:"textfield",bind:{value:"{theRow.searchCode}"}},{name:"levelNo",fieldLabel:"层级",xtype:"numberfield",bind:{value:"{theRow.levelNo}"}},{name:"orderNo",fieldLabel:"排序码",xtype:"numberfield",bind:{value:"{theRow.orderNo}"}},{name:"creator",fieldLabel:"创建人员",xtype:"textfield",bind:{value:"{theRow.creator}"}},{name:"createTime",fieldLabel:"创建日期",xtype:"datefield",bind:{value:"{theRow.createTime}"}},{name:"modifier",fieldLabel:"更改人员",xtype:"textfield",bind:{value:"{theRow.modifier}"}},{name:"modifyTime",fieldLabel:"更改日期",xtype:"datefield",bind:{value:"{theRow.modifyTime}"}},{name:"remarks",fieldLabel:"备注",xtype:"textfield",bind:{value:"{theRow.remarks}"}}];a.otherItems=[{xtype:"uxmodulelist",autoShow:false}];a.callParent()}});
Ext.define("Hc_Framework.view.itgmenulist.ItgMenuListController",{extend:"Hc_Common.view.BaseTreePageController",alias:"controller.itgmenulist",initAddData:function(a,b){if(!a){return}a.set("projectCode","hc")},onAddChildClick:function(){var a=this.lookupReference("commonchildWin");a.show()},getWinData:function(e,c){if(!e||e.length<1){c.up("window").close();return}var f={},d=[],a,b=this.view.workObject.getSelectionModel().getSelection()[0];Ext.Array.each(e,function(g){a=new Object();a.menuNo=a.moduleNo=g.get("moduleNo");a.menuName=g.get("moduleName");a.appNo=b.get("appNo");a.projectCode=b.get("projectCode");a.enableFlag=1;a.parentMenuNo=b.get("menuNo");a.searchCode=0;a.levelNo=0;a.orderNo=2;d.push(a)});f.insertList=d;this.saveData(f,this.view.workObject,c)}});
Ext.define("Hc_Framework.view.itgmenulist.ItgMenuListModel",{extend:"Hc_Common.view.BaseTreePageModel",alias:"viewmodel.itgmenulist",stores:{commonstore:{model:"Hc_Framework.model.ItgMenuList",proxy:{type:"ajax",url:Hc.basePath+"itg_menu_list/list.json"},root:{id:0,menuName:"hc项目菜单",menuNo:0,expanded:true},nodeParam:"parentMenuNo",autoLoad:false,parentIdProperty:"parentMenuNo"}}});
Ext.define("Hc_Framework.view.itgmenulistnew.ItgMenuListNew",{extend:"Hc_Common.view.BasePage",alias:"widget.itgmenulistnew",controller:"itgmenulistnew",viewModel:{type:"itgmenulistnew"},layout:"border",toolbar:{xtype:"toolbar",itemId:"commontoolbar",reference:"commontoolbar",region:"north",items:[{text:"刷新",itemId:"btnRefresh",reference:"btnRefresh",handler:"onClickRefresh",glyph:Hc.Icon.btnRefresh}]},treePanel:{xtype:"panel",itemId:"treePanel",reference:"treePanel",title:"菜单树面板",width:200,region:"west",split:true,layout:"border",collapsible:true,items:[{xtype:"combo",reference:"projectCodeCombo",labelWidth:60,width:100,editable:false,region:"north",triggerAction:"all",fieldLabel:"所属项目",name:"projectCode",displayField:"projectName",valueField:"projectCode",queryMode:"local",store:{type:"itgproject",autoLoad:true},allowBlank:false,listeners:{change:"onChangeProjectCode"}},{xtype:"treepanel",itemId:"menuTree",region:"center",layout:"fit",reference:"menuTree",rootVisible:false,lines:true,columns:[{xtype:"treecolumn",flex:1,dataIndex:"menuName",text:"菜单",sortable:false,hideable:false}],bind:{store:"{menuTreeStore}"},batchUrl:Hc.basePath+"itg_menu_list/batchOperate.json"}]},detailPanel:{xtype:"panel",itemId:"detailPanel",reference:"detailPanel",region:"center",layout:"border",items:[{xtype:"form",itemId:"searchPanel",reference:"searchPanel",title:"查询模块",collapsible:true,region:"north",labelWidth:40,layout:{type:"table",columns:4},bodyPadding:4,align:"center",defaults:{labelAlign:"right",labelWidth:80,width:200},items:[{xtype:"textfield",fieldLabel:"模块编码",name:"moduleNo"},{xtype:"textfield",fieldLabel:"模块名称",name:"moduleName"},{xtype:"tbspacer",width:80,},{xtype:"button",text:"查询",handler:"onClickSearch",width:80,}]},{xtype:"panel",itemId:"operationPanel",reference:"operationPanel",region:"west",width:100,layout:{type:"vbox",pack:"start",align:"center"},defaults:{frame:true,width:80,height:30},items:[{xtype:"tbspacer",},{xtype:"button",text:"添加文件夹",handler:"addMenuFolder"},{xtype:"button",text:"移除文件夹",handler:"removeMenuFolder"},{xtype:"tbspacer",},{xtype:"tbspacer",},{xtype:"button",text:"添加模块<<",handler:"addModule"},{xtype:"button",text:"移除模块>>",handler:"removeModule"},{xtype:"tbspacer",},{xtype:"tbspacer",},{xtype:"button",text:"上移↑",handler:"moveUp"},{xtype:"button",text:"下移↓",handler:"moveDown"},{xtype:"button",text:"保存[移动]",handler:"moveSave"}]},{xtype:"grid",itemId:"dataGrid",reference:"dataGrid",region:"center",layout:"fit",columnLines:true,multiSelect:true,plugins:[{ptype:"cellediting",clicksToEdit:1}],bbar:{xtype:"pagingtoolbar",bind:{store:"{dataGridStore}"},displayInfo:true,listeners:{beforechange:"onBeforechange"}},viewConfig:{enableTextSelection:true},columns:[{header:"模块ID",dataIndex:"moduleNo",sortable:true,width:100},{header:"模块编号",dataIndex:"moduleCode",sortable:true,width:100},{header:"模块名称",dataIndex:"moduleName",sortable:true,width:200},{header:"所属系统",dataIndex:"appNo",sortable:true,width:140,xtype:"bllookupedit",displayvalue:"itg_application/listAll.json",displaymember:"appName",valuemember:"appNo",readOnly:true}],bind:{store:"{dataGridStore}"}}]},addWindow:{xtype:"window",title:"菜单名称",itemId:"addWindow",reference:"addWindow",width:200,height:100,layout:"fit",resizable:false,closeAction:"hide",plain:false,items:[{xtype:"form",bodyPadding:4,items:[{name:"menuName",fieldLabel:"",xtype:"textfield"}]}],dockedItems:[{xtype:"toolbar",dock:"bottom",layout:{type:"vbox",align:"center"},items:[{xtype:"button",text:"确定",handler:"btnSaveMenu"}]}]},initComponent:function(){this.items=[this.toolbar,this.treePanel,this.detailPanel,this.addWindow];this.callParent()}});
Ext.define("Hc_Framework.view.itgmenulistnew.ItgMenuListNewController",{extend:"Hc_Common.view.BasePageController",alias:"controller.itgmenulistnew",init:function(){},onClickRefresh:function(){var a=this.lookupReference("projectCodeCombo").getValue();if(a==""||a==null){Ext.MessageBox.alert("提示","请选择所属项目！");return}this.reloadMenuTree(true);this.reloadDataGrid()},reloadMenuTree:function(a){var b=this.lookupReference("projectCodeCombo").getValue();var c=this.lookupReference("menuTree");c.store.proxy.extraParams.projectCode=b;c.store.root.data.expanded=true;if(a){c.store.load()}else{c.store.reload()}c.getView().refresh()},reloadDataGrid:function(){var d=this.lookupReference("projectCodeCombo").getValue();var b=this.lookupReference("dataGrid");var c=b.store;c.proxy.extraParams.projectCode=d;c.proxy.extraParams.inMenu=false;var a=this.lookupReference("searchPanel");if(a){var e=a.getValues();for(var f in e){if(e[f]!==""){c.proxy.extraParams[f]=e[f]}else{delete c.proxy.extraParams[f]}}}c.reload()},onBeforechange:function(b,c){var d=this.lookupReference("projectCodeCombo").getValue();c.projectCode=d;var a=this.lookupReference("searchPanel");if(a){var e=a.getValues();for(var f in e){if(e[f]!==""){c[f]=e[f]}}}},onChangeProjectCode:function(d,c,b){var a=c;this.reloadMenuTree(true);this.reloadDataGrid()},onClickSearch:function(){this.reloadDataGrid()},addMenuFolder:function(){var b=this.lookupReference("addWindow"),c=this.lookupReference("menuTree");var a=c.selection;if(a==null||!a.isLoaded()){Ext.MessageBox.alert("提示","未选中菜单文件夹节点或者该节点并未展开");return}b.show()},btnSaveMenu:function(a){this.doInsert(0,a)},removeMenuFolder:function(a){this.doDelete(0)},addModule:function(a){this.doInsert(1,a)},removeModule:function(a){this.doDelete(1)},doInsert:function(r,f){var p=this,q=[],a=this.lookupReference("menuTree"),j=a.selection;if(j==null){Ext.MessageBox.alert("提示","请选中菜单树节点");return}var o=j.data.searchCode,m=(j.childNodes!=null&&j.childNodes.length)||0,g={};if(r==0){var e=this.lookupReference("addWindow"),d=f.up("window").down("form"),n=d.getRecord(),l=d.getValues(),c=o+"-"+Ext.String.leftPad(m+1,2,"0");if(l.menuName==""){Ext.MessageBox.alert("提示","请输入菜单名称");e.close();return}q.push({menuName:l.menuName,parentMenuNo:j.id,projectCode:j.data.projectCode,appNo:j.data.appNo,enableFlag:1,searchCode:c,levelNo:j.data.levelNo+1,orderNo:m+1})}else{var b=this.lookupReference("dataGrid"),h=b.getSelectionModel().getSelection();if(h==null||h.length==0){Ext.MessageBox.alert("提示","请先选中所需添加的模块");return}if(j.data.leaf){Ext.MessageBox.alert("提示","叶子节点【模块】不能添加模块");return}var k=1;Ext.Array.each(h,function(s){var t=m+k,i=o+"-"+Ext.String.leftPad(m+k,2,"0");q.push({menuName:s.get("moduleName"),moduleNo:s.get("moduleNo"),parentMenuNo:j.id,projectCode:j.data.projectCode,appNo:j.data.appNo,enableFlag:1,searchCode:i,levelNo:j.data.levelNo+1,orderNo:t});k++})}if(q.length>0){g.insertList=q}Ext.Ajax.request({url:a.batchUrl,jsonData:JSON.stringify(g),method:"POST",success:function(s){var i=JSON.parse(s.responseText);if(i.result.resultCode=="0"){if(r==0){e.close()}(r==1&&p.reloadDataGrid())||(r==0&&e.close());p.reloadMenuTree()}else{Ext.MessageBox.alert("提示",i.result.msg)}}})},doDelete:function(b){var e=this,h=this.lookupReference("menuTree"),d=h.selection;if(d==null){Ext.MessageBox.alert("提示","请先选中所移除的节点");return}if((d.data.leaf&&b==0)||(!d.data.leaf&&b==1)){Ext.MessageBox.alert("提示","当前选中的节点与操作按钮的操作对象不匹配");return}if(b===0){var f=d.childNodes!=null&&d.childNodes.length;if(f>0){Ext.MessageBox.alert("提示","该菜单存在子节点，不能删除");return}}var a=d.parentNode;a.removeChild(d);var g={menuNo:d.id},c=Hc.basePath+"itg_menu_list/deleteById.json";Ext.Ajax.request({url:c,params:g,method:"POST",success:function(j){var i=JSON.parse(j.responseText);if(i.result.resultCode=="0"){b==1&&e.reloadDataGrid()}else{Ext.MessageBox.alert("提示",i.result.msg)}}})},moveUp:function(){var e=this,h=this.lookupReference("menuTree"),f=h.store,d=h.selection,c=d.data.index,a=d.parentNode;if(d==null){Ext.MessageBox.alert("提示","请先选中所需的节点");return}if(d.data.index==0){Ext.MessageBox.alert("提示","当前已为此级文件夹第一位置，无法上移");return}else{var g=d.previousSibling,b=c-1;a.insertBefore(d,g);d.dirty=true;d.data.orderNo=b+1;g.dirty=true;g.data.orderNo=c+1}},moveDown:function(){var f=this,h=this.lookupReference("menuTree"),g=h.store,e=h.selection,d=e.data.index,c=e.parentNode;if(e==null){Ext.MessageBox.alert("提示","请先选中所需的节点");return}if(e.data.index==c.childNodes.length-1){Ext.MessageBox.alert("提示","当前已为此级文件夹最后位置，无法下移");return}else{var b=e.nextSibling,a=d+1;c.insertBefore(b,e);e.dirty=true;e.data.orderNo=a+1;b.dirty=true;b.data.orderNo=d+1}},moveSave:function(){var c=this,g=this.lookupReference("menuTree"),e=g.store;var a=e.getModifiedRecords(),f={},d=[];if(a.length==0){Ext.MessageBox.alert("提示","不存在所修改的数据，无需保存");return}Ext.Array.each(a,function(i){var h={menuNo:i.data.menuNo,orderNo:i.data.orderNo};d.push(h)});f.updateList=d;var b=Hc.basePath+"itg_menu_list/batchOperate.json";Ext.Ajax.request({url:b,jsonData:JSON.stringify(f),method:"POST",success:function(i){var h=JSON.parse(i.responseText);if(h.result.resultCode=="0"){e.commitChanges();c.reloadMenuTree();Ext.toast("保存成功！")}else{Ext.MessageBox.alert("提示",h.result.msg)}}})}});
Ext.define("Hc_Framework.view.itgmenulistnew.ItgMenuListNewModel",{extend:"Hc_Common.view.BasePageModel",alias:"viewmodel.itgmenulistnew",stores:{menuTreeStore:{type:"treebase",model:"Hc_Framework.model.ItgMenuList",autoLoad:false,proxy:{type:"ajax",url:"itg_menu_list/listAll.json",},root:{id:0,text:"root",menuName:"root",menuNo:0,expanded:false},nodeParam:"parentMenuNo",parentIdProperty:"parentMenuNo"},dataGridStore:{type:"basestore",model:"Hc_Framework.model.ItgModuleList",proxy:{type:"ajax",url:"itg_module_list/list.json"},autoLoad:false}}});
Ext.define("Hc_Framework.view.itgmodule.ItgModuleList",{extend:"Hc_Common.view.BaseSimplePage",alias:"widget.itgmodulelist",controller:"itgmodulelist",viewModel:{type:"itgmodulelist"},initComponent:function(){var c=this,a=Ext.create("Hc_Framework.store.ItgProject"),d=Ext.create("Hc_Framework.store.ItgApplication"),b=Ext.create("Hc_Framework.store.ItgApplication");Ext.apply(c,{searchItems:[{xtype:"extcombox",fieldLabel:"所属系统",name:"appNo",store:d,displaymember:"appName",valuemember:"appNo"},{xtype:"textfield",fieldLabel:"模块编号",name:"moduleNo"},{xtype:"textfield",fieldLabel:"模块名称",name:"moduleName"},{xtype:"combouseflag",fieldLabel:"启用状态",name:"enableFlag"}],gridModel:"Hc_Framework.model.ItgModuleList",gridColumns:[{header:"模块编号",dataIndex:"moduleNo",editor:{xtype:"numberfield",allowBlank:false}},{header:"模块启动命令",dataIndex:"moduleCode",editor:{allowBlank:false},width:80},{header:"模块名称",dataIndex:"moduleName",editor:{allowBlank:false}},{header:"所属项目",dataIndex:"projectCode",width:140,editor:{allowBlank:false},xtype:"bllookupedit",estore:a,gstore:a,displaymember:"projectName",valuemember:"projectCode"},{header:"所属系统",dataIndex:"appNo",width:150,editor:{allowBlank:false},xtype:"bllookupedit",estore:b,gstore:d,displaymember:"appName",valuemember:"appNo"},{header:"URL",dataIndex:"moduleUrl",editor:{allowBlank:false}},{header:"权限值",dataIndex:"rightValue",editor:{xtype:"numberfield",allowBlank:false}},{dataIndex:"enableFlag",text:"启用状态",type:"int",editor:{xtype:"combouseflag",allowBlank:false},renderer:"renderUseFlag",width:60},{header:"是否报表",dataIndex:"isReport",editor:{xtype:"comboyesno"},renderer:"renderYesNo",width:60},{header:"备注",dataIndex:"remarks",editor:true,width:140},{header:"建档人",dataIndex:"creator",width:100},{header:"建档时间",dataIndex:"createTime",width:140},{header:"修改人",dataIndex:"modifier",width:100},{header:"修改时间",dataIndex:"modifyTime",width:140}],gridPrimaryKey:"moduleNo",gridUnionKey:"",gridLoadUrl:Hc.basePath+"itg_module_list/list.json",gridSaveUrl:Hc.basePath+"itg_module_list/batchOperate.json",gridExportUrl:Hc.basePath+"itg_module_list/do_export.json",gridImportUrl:Hc.basePath+""});c.callParent()}});
Ext.define("Hc_Framework.view.itgmodule.ItgModuleListController",{extend:"Hc_Common.view.BaseSimplePageController",alias:"controller.itgmodulelist",init:function(){var a=this;a.callParent()},onGridBeforeEdit:function(d,c){this.callParent(arguments);if(c.field=="appNo"){var b=c.record.get("projectCode"),a=c.column.getEditor().store;oldProjectCode=a.proxy.extraParams.projectCode;if(oldProjectCode!=b){a.proxy.extraParams.projectCode=b;a.reload()}}},onGridAfterEdit:function(c,b){this.callParent(arguments);if(b.field=="moduleNo"){var a=b.record.get("moduleNo"),d=b.record.get("moduleCode");if(!d){b.record.set("moduleCode",a)}}}});
Ext.define("Hc_Framework.view.itgmodule.ItgModuleListModel",{extend:"Hc_Common.view.BaseSimplePageModel",alias:"viewmodel.itgmodulelist"});
Ext.define("Hc_Framework.view.itgproject.ItgProject",{extend:"Hc_Common.view.BaseSimplePage",alias:"widget.itgproject",controller:"itgproject",viewModel:{type:"itgproject"},initComponent:function(){var a=this;Ext.apply(a,{gridModel:"Hc_Framework.model.ItgProject",gridColumns:[{dataIndex:"projectCode",text:"项目编码",editor:{allowBlank:false}},{dataIndex:"projectName",text:"项目名称",editor:{allowBlank:false},width:160},{dataIndex:"enableFlag",text:"启用状态",type:"int",editor:{xtype:"combouseflag",allowBlank:false},renderer:"renderUseFlag",width:60},{dataIndex:"orderNo",text:"排列序号",editor:{xtype:"numberfield"}},{header:"备注",dataIndex:"remarks",editor:true,width:135},{header:"建档人",dataIndex:"creator",width:100},{header:"建档时间",dataIndex:"createTime",width:135},{header:"修改人",dataIndex:"modifier",width:100},{header:"修改时间",dataIndex:"modifyTime",width:135}],gridPrimaryKey:"projectCode",gridUnionKey:"",gridLoadUrl:Hc.basePath+"itg_project/list.json",gridSaveUrl:Hc.basePath+"itg_project/batchOperate.json",gridExportUrl:Hc.basePath+"itg_project/do_export.json",gridImportUrl:Hc.basePath+""});a.callParent()}});
Ext.define("Hc_Framework.view.itgproject.ItgProjectController",{extend:"Hc_Common.view.BaseSimplePageController",alias:"controller.itgproject"});
Ext.define("Hc_Framework.view.itgproject.ItgProjectModel",{extend:"Hc_Common.view.BaseSimplePageModel",alias:"viewmodel.itgproject"});
Ext.define("Hc_Framework.view.itgright.ItgRightList",{extend:"Hc_Common.view.BaseSimplePage",alias:"widget.itgrightlist",controller:"itgrightlist",viewModel:{type:"itgrightlist"},initComponent:function(){var b=this,a=Ext.create("Hc_Framework.store.ItgProject");Ext.apply(b,{searchItems:[{xtype:"extcombox",fieldLabel:"所属项目",name:"projectCode",store:a,displaymember:"projectName",valuemember:"projectCode"},{xtype:"textfield",fieldLabel:"权限名称",name:"rightName"},{xtype:"combouseflag",fieldLabel:"启用状态",name:"enableFlag"}],gridModel:"Hc_Framework.model.ItgRightList",gridColumns:[{header:"权限值",dataIndex:"rightNo",editor:{allowBlank:false,xtype:"numberfield",minValue:1,onSpinUp:function(){var d=this,c=d.getValue()*2;if(!d.readOnly){d.setSpinValue(Ext.Number.constrain(c,d.minValue,d.maxValue))}},onSpinDown:function(){var d=this,c=d.getValue()/2;if(!d.readOnly){d.setSpinValue(Ext.Number.constrain(c,d.minValue,d.maxValue))}}}},{header:"权限名称",dataIndex:"rightName",editor:{allowBlank:false}},{dataIndex:"projectCode",text:"所属项目",editor:{allowBlank:false},width:150,xtype:"bllookupedit",estore:a,gstore:a,displaymember:"projectName",valuemember:"projectCode"},{header:"启用状态",dataIndex:"enableFlag",width:80,editor:{xtype:"combouseflag",allowBlank:false},renderer:"renderUseFlag"},{header:"排列序号",dataIndex:"orderNo",editor:{xtype:"numberfield"},width:80},{header:"备注",dataIndex:"remarks",editor:true,width:135},{header:"建档人",dataIndex:"creator",width:100},{header:"建档时间",dataIndex:"createTime",width:135},{header:"修改人",dataIndex:"modifier",width:100},{header:"修改时间",dataIndex:"modifyTime",width:135}],gridPrimaryKey:"appCode",gridUnionKey:"",gridLoadUrl:Hc.basePath+"itg_right_list/list.json",gridSaveUrl:Hc.basePath+"itg_right_list/batchOperate.json",gridExportUrl:Hc.basePath+"itg_right_list/do_export.json",gridImportUrl:Hc.basePath+""});b.callParent()}});
Ext.define("Hc_Framework.view.itgright.ItgRightListController",{extend:"Hc_Common.view.BaseSimplePageController",alias:"controller.itgrightlist"});
Ext.define("Hc_Framework.view.itgright.ItgRightListModel",{extend:"Hc_Common.view.BaseSimplePageModel",alias:"viewmodel.itgrightlist"});
Ext.define("Hc_Framework.view.itgrole.ItgRoleList",{extend:"Hc_Common.view.BaseSimplePage",alias:"widget.itgrolelist",controller:"itgrolelist",viewModel:{type:"itgrolelist"},initComponent:function(){var b=this;var a=Ext.create("Hc_Framework.store.ItgProject");Ext.apply(b,{searchItems:[{fieldLabel:"所属项目",name:"projectCode",xtype:"extcombox",store:a,displaymember:"projectName",valuemember:"projectCode"},{xtype:"textfield",fieldLabel:"角色名称",name:"roleName"},{xtype:"textfield",fieldLabel:"角色拥有者",name:"roleOwner"},{xtype:"combouseflag",fieldLabel:"启用状态",name:"enableFlag"}],gridModel:"Hc_Framework.model.ItgRoleList",gridColumns:[{header:"角色名称",dataIndex:"roleName",editor:{allowBlank:false},width:120},{header:"所属项目",dataIndex:"projectCode",xtype:"bllookupedit",editor:{allowBlank:false},estore:a,gstore:a,displaymember:"projectName",valuemember:"projectCode",width:120},{header:"角色拥有者",dataIndex:"roleOwner",width:80},{dataIndex:"enableFlag",header:"启用状态",editor:{allowBlank:false},xtype:"bllookupedit",displayvalue:"0=禁用:1=启用",width:60},{header:"排列序号",dataIndex:"orderNo",editor:{xtype:"numberfield"},width:60},{header:"备注",dataIndex:"remarks",editor:true,flex:1},{header:"建档人",dataIndex:"creator",width:80},{header:"建档时间",dataIndex:"createTime",width:135},{header:"修改人",dataIndex:"modifier",width:80},{header:"修改时间",dataIndex:"modifyTime",width:135}],gridPrimaryKey:"roleId",gridLoadUrl:Hc.basePath+"itg_role_list/list.json",gridSaveUrl:Hc.basePath+"itg_role_list/batchOperate.json",gridExportUrl:Hc.basePath+"itg_role_list/do_export.json",gridImportUrl:Hc.basePath+""});b.callParent()}});
Ext.define("Hc_Framework.view.itgrole.ItgRoleListController",{extend:"Hc_Common.view.BaseSimplePageController",alias:"controller.itgrolelist"});
Ext.define("Hc_Framework.view.itgrole.ItgRoleListModel",{extend:"Hc_Common.view.BaseSimplePageModel",alias:"viewmodel.itgrolelist"});
Ext.define("Hc_Framework.view.itgroleright.ItgRoleRight",{extend:"Hc_Common.view.BaseSimplePage",alias:"widget.itgroleright",controller:"itgroleright",viewModel:{type:"itgroleright"},customLayout:true,gridModel:"Hc_Framework.model.ItgRoleRight",gridPrimaryKey:"roleRightId",gridLoadUrl:Hc.basePath+"itg_role_right/getRoleRight.json",gridSaveUrl:Hc.basePath+"itg_role_right/batchOperate.json",gridExportUrl:Hc.basePath+"itg_role_right/do_export.json",gridImportUrl:Hc.basePath+"",oneclick:function(a,b){console.dir(b)},initComponent:function(){var e=this;var a=Ext.create("Hc_Framework.store.ItgApplication");var f={type:"checkboxmodel",mode:"MULTI",allowDeselect:true};e.grid.title="模块设置";Ext.apply(e,{searchItems:[{fieldLabel:"所属系统",name:"appNo",xtype:"extcombox",store:a,displaymember:"appName",valuemember:"appNo"},{xtype:"textfield",fieldLabel:"模块编号",name:"moduleCode"},{xtype:"textfield",fieldLabel:"模块名称",name:"moduleName"},{xtype:"comboyesno",fieldLabel:"是否有权限",name:"enableFlag"}],gridColumns:[{header:"是否有权限",dataIndex:"hasRight",xtype:"checkcolumn",},{header:"模块编号",dataIndex:"moduleCode",width:80},{header:"模块名称",dataIndex:"moduleName",width:100},{dataIndex:"appNo",header:"所属系统",width:120,xtype:"bllookupedit",readOnly:true,estore:a,gstore:a,displaymember:"appName",valuemember:"appNo"},{header:"URL",dataIndex:"moduleUrl",flex:1},{header:"分配人员",dataIndex:"creator",width:80},{header:"分配时间",dataIndex:"createTime",width:135}],});var b={xtype:"grid",reference:"rolegrid",width:330,region:"west",columns:[{text:"角色编号",dataIndex:"roleId",width:60},{text:"角色名称",dataIndex:"roleName",width:80},{text:"角色拥有者",dataIndex:"roleOwner",width:80},{text:"备注",dataIndex:"remarks",flex:1}],store:{type:"basestore",model:"Hc_Framework.model.ItgRoleList",autoLoad:true,proxy:{url:Hc.basePath+"itg_role_list/list.json"}},split:true,listeners:{selectionchange:"onSelectItemChange"}};var d={title:"模块权限",xtype:"panel",height:130,border:"false",region:"south",layout:"border",split:true,bodyStyle:"background:#fff; padding:10px;",items:[{xtype:"checkboxgroup",reference:"rightboxgroup",columns:4,boxLabel:"rightName",inputValue:"rightNo",items:[]}]};var c={xtype:"panel",border:"false",region:"center",layout:"border",items:[e.grid,d]};e.otherItems=[b,c,e.toolbar,e.searchPanel];e.items=e.otherItems;this.callParent()}});
Ext.define("Hc_Framework.view.itgroleright.ItgRoleRightController",{extend:"Hc_Common.view.BaseSimplePageController",alias:"controller.itgroleright",init:function(){var b=this;b.callParent(arguments);var a=b.getReferences();a.btnSearch.setDisabled(true);a.btnAdd.setVisible(false);a.btnDelete.setVisible(false);Ext.Ajax.request({url:Hc.basePath+"itg_right_list/listAll.json",method:"GET",params:{pageNum:0},success:function(c,d){var e=JSON.parse(c.responseText).list;var f=b.getObjList().rightboxgroup;Ext.Array.each(e,function(g){f.add({boxLabel:g.rightNo+" "+g.rightName,inputValue:g.rightNo,checked:false})})}});a.mastergrid.on("cellclick","gridCellClick")},initRowClass:function(b,d,e,c){var a=b.get("_flag");if(a=="A"){return"x-grid-rows-add"}if(a=="D"){return"x-grid-rows-edit"}if(b.dirty&&!a){return"x-grid-rows-edit"}return""},onSelectItemChange:function(f,d){var e=this,b=e.getReferences();b.mastergrid.enable();var c=this.lookupReference("rolegrid");var a=c.getSelectionModel().getSelection()[0];if(!a){b.btnSearch.setDisabled(true);return}b.btnSearch.setDisabled(false);this.onBtnSearchClick()},beforeSearch:function(a){var b=this.lookupReference("rolegrid");var c=b.getSelectionModel().getSelection()[0];if(!c){Ext.Msg.alert("系统提示","请选择角色");return}a.proxy.extraParams.roleId=c.get("roleId");return true},onBtnAddClick:function(){var a=this,b=a.lookupReference("rolegrid").getSelectionModel().getSelection()[0];if(!b){Ext.Msg.alert("系统提示","请选择角色");return}if(!a.win){a.win=Ext.widget("uxmodulelist")}a.win.show()},onBtnUndoClick:function(d){var c=this.workObject,b=c.store,a=c.getSelectionModel().getSelection();Ext.Array.each(a,function(e){if(e.phantom){b.remove(e)}else{e.reject();if(e.get("rightValue")>0){e.set("hasRight",true)}else{e.set("hasRight",false)}}})},onBtnCancelClick:function(d){var c=this.workObject,b=c.getStore(),a=b.getModifiedRecords();b.rejectChanges();Ext.Array.each(a,function(e){if(e.get("rightValue")>0){e.set("hasRight",true)}else{e.set("hasRight",false)}});c.view.refresh()},onGridSelectionChange:function(d,b,h,k){var m=this,n=m.getObjList();n.rightboxgroup.enable();var e=n.mastergrid;var g=e.getSelectionModel().getSelection()[0].get("rightValue");var c=e.getSelectionModel().getSelection()[0].get("t2_rightValue");var l=n.rightboxgroup;for(var f=0;f<l.items.length;f++){var o=l.items.getAt(f);o.un("change",m.boxchange,m);var a=(o.inputValue&c)===o.inputValue;var j=(o.inputValue&g)===o.inputValue;if(a){o.enable();if(j){o.setValue(true)}else{o.setValue(false)}}else{o.disable();o.setValue(false)}o.on("change",m.boxchange,m)}},boxchange:function(j,k,l,c){var t=this,a=t.getObjList();var h=a.rolegrid;var r=a.mastergrid;var p=a.rightboxgroup;var b=h.getSelectionModel().getSelection()[0];var d=r.getSelectionModel().getSelection()[0];if(!b){Ext.Msg.alert("系统提示","请选择角色");return}if(!d){Ext.Msg.alert("系统提示","请选择模块");return}var e=d.get("roleRightId");var s=d.get("rightValue");var f=j.inputValue;if(k){var m=f|s;if(e<0&&s==0){d.set("rightValue",m);d.set("_flag","A");d.set("moduleNo",d.get("t2_moduleNo"));d.set("roleId",b.get("roleId"))}else{if(d.get("_flag")=="D"){d.reject();d.set("rightValue",m)}else{d.set("rightValue",m)}}if(f!=1){for(var o=0;o<p.items.length;o++){var q=p.items.getAt(o);if(q.inputValue==1&&q.getValue()==false){q.setValue(true);break}}}}else{var g=f^s;if(g==0){if(e>0){d.set("_flag","D");d.set("rightValue",0)}else{d.reject()}}else{d.set("rightValue",g)}var n=true;for(var o=0;o<p.items.length;o++){var q=p.items.getAt(o);if(q.inputValue!=1&&q.getValue()==true){n=false;break}}if(n){for(var o=0;o<p.items.length;o++){var q=p.items.getAt(o);if(q.inputValue==1&&q.getValue()==true){q.setValue(false);break}}}}d.set("hasRight",false)},gridCellClick:function(f,b,n,g,m,p,h,j){if(n==0){var l=this,o=l.getObjList();var a=o.rolegrid;var k=o.rightboxgroup;var r=a.getSelectionModel().getSelection()[0];if(!r){Ext.Msg.alert("系统提示","请选择角色");return}var c=g.get("t2_rightValue");var q=g.get("rightValue");if(q==c){for(var d=0;d<k.items.length;d++){var s=k.items.getAt(d);s.setValue(false)}}else{for(var d=0;d<k.items.length;d++){var s=k.items.getAt(d);if(s.inputValue&c){s.setValue(true)}}}}}});
Ext.define("Hc_Framework.view.itgroleright.ItgRoleRightModel",{extend:"Hc_Common.view.BaseSimplePageModel",alias:"viewmodel.itgroleright"});
Ext.define("Hc_Framework.view.itgroleuser.ItgRoleUser",{extend:"Hc_Common.view.BaseSimplePage",alias:"widget.itgroleuser",controller:"itgroleuser",viewModel:{type:"itgroleuser"},customLayout:true,gridModel:"Hc_Framework.model.ItgRoleUser",gridPrimaryKey:"userRoleId",gridLoadUrl:Hc.basePath+"itg_role_user/getUser.json?isExist=true",gridSaveUrl:Hc.basePath+"itg_role_user/batchOperate.json",gridExportUrl:Hc.basePath+"itg_role_user/do_export.json",gridImportUrl:Hc.basePath+"",initComponent:function(){var d=this;d.grid.title="已分配用户";var b=Ext.create("Hc_Framework.store.ItgDepartment");Ext.apply(d,{searchItems:[{fieldLabel:"所属部门",name:"deptNo",xtype:"extcombox",store:b,displaymember:"deptName",valuemember:"deptNo"},{xtype:"textfield",fieldLabel:"用户编号",name:"userCode"},{xtype:"textfield",fieldLabel:"用户名称",name:"userName"},{xtype:"combouseflag",fieldLabel:"启用状态",name:"enableFlag"}],gridColumns:[{dataIndex:"userCode",header:"用户编号",width:80},{dataIndex:"userName",header:"用户名称",width:80},{dataIndex:"deptNo",header:"所属部门",width:160,xtype:"bllookupedit",readOnly:true,estore:b,gstore:b,displaymember:"deptName",valuemember:"deptNo"},{dataIndex:"enableFlag",header:"启用状态",readOnly:true,xtype:"bllookupedit",displayvalue:"0=禁用:1=启用",width:60},{dataIndex:"creator",header:"分配人员",width:80},{dataIndex:"createTime",header:"分配时间",width:135},{dataIndex:"remarks",header:"备注",flex:1}]});var c={xtype:"grid",reference:"rolegrid",width:330,region:"west",columns:[{text:"角色名称",dataIndex:"roleName",flex:0.4},{text:"角色拥有者",dataIndex:"roleOwner",flex:0.2},{text:"备注",dataIndex:"remarks",flex:0.3}],store:{type:"basestore",model:"Hc_Framework.model.ItgRoleList",autoLoad:true,proxy:{url:Hc.basePath+"itg_role_list/list.json"}},split:true,listeners:{selectionchange:"onSelectChange"}};var a={xtype:"container",border:"false",region:"center",layout:"border",items:[{title:"未分配用户",xtype:"grid",reference:"notusergrid",columnLines:true,split:true,columns:[{dataIndex:"userCode",header:"用户编号",width:80},{dataIndex:"userName",header:"用户名称",width:80},{dataIndex:"deptNo",header:"所属部门",width:160,xtype:"bllookupedit",readOnly:true,estore:b,gstore:b,displaymember:"deptName",valuemember:"deptNo"},{dataIndex:"enableFlag",header:"启用状态",readOnly:true,xtype:"bllookupedit",displayvalue:"0=禁用:1=启用",width:60},{dataIndex:"creator",header:"创建者",width:80},{dataIndex:"createTime",header:"创建日期",width:135},{dataIndex:"remarks",header:"备注",flex:1}],region:"north",height:300,bind:{store:"{store2}"},plugins:[],selModel:{mode:"MULTI",allowDeselect:true},bbar:{xtype:"pagingtoolbar",plugins:Ext.create("Ext.ux.ComboPageSize"),displayInfo:true,bind:{store:"{store2}"}},listeners:{selectionchange:"onNotUserGridSelectionChange"},viewConfig:{enableTextSelection:true}},d.grid]};d.otherItems=[c,a,d.toolbar,d.searchPanel];d.items=d.otherItems;d.callParent()}});
Ext.define("Hc_Framework.view.itgroleuser.ItgRoleUserController",{extend:"Hc_Common.view.BaseSimplePageController",alias:"controller.itgroleuser",init:function(){this.callParent(arguments);var a=this.getReferences();a.btnAdd.setDisabled(true);a.btnDelete.setDisabled(true)},onSelectChange:function(e){var d=this,b=d.getReferences();var c=d.lookupReference("rolegrid");var a=c.getSelectionModel().getSelection()[0];if(!a){b.notusergrid.store.removeAll();b.notusergrid.disable();b.mastergrid.store.removeAll();b.mastergrid.disable();b.btnSearch.setDisabled(true);return}b.btnSearch.setDisabled(false);b.btnAdd.setDisabled(true);b.btnDelete.setDisabled(true);b.notusergrid.enable();b.mastergrid.enable();d.onBtnSearchClick()},beforeSearch:function(h){var e=this;var a=e.lookupReference("rolegrid");var d=a.getSelectionModel().getSelection()[0];if(!d){return}var c=d.get("roleId");h.proxy.extraParams.roleId=c;var f=e.lookupReference("notusergrid").store;f.proxy.extraParams.roleId=c;var b=e.lookupReference("commonsearch");if(b){var i=b.getValues();for(var g in i){if(i[g]!==""){f.proxy.extraParams[g]=i[g]}else{delete f.proxy.extraParams[g]}}}f.load();return true},onNotUserGridSelectionChange:function(){var b=this,a=b.getReferences();a.btnAdd.setDisabled(false)},onGridSelectionChange:function(){var b=this,a=b.getReferences();a.btnDelete.setDisabled(false)},onBtnAddClick:function(){var f=this;var d=f.lookupReference("notusergrid");var h=d.getSelectionModel().getSelection();if(h==null||h.length<=0){Ext.Msg.alert("系统提示","请选择未分配用户");return}var c=f.lookupReference("rolegrid");var g=c.getSelectionModel().getSelection()[0];if(!g){Ext.Msg.alert("系统提示","请选择角色");return}var b=g.get("roleId");var e=f.lookupReference("mastergrid");Ext.Array.each(h,function(i){i.data._flag="A";i.data.roleId=b;var j=Ext.create(e.store.model);Ext.apply(j.data,i.data);e.store.insert(0,j);d.store.remove(i)});var a=f.getReferences();a.btnSave.setDisabled(false)},onBtnDeleteClick:function(c){var d=this,f=d.workObject,b=f.getStore(),e=false,a=f.getSelectionModel().getSelection();if(a.length<1){Ext.Msg.alert("系统提示","请选择已分配用户");return}if(!d.checkDelete(a)===false){return}Ext.Array.each(a,function(g){var j=g.get("_flag");if(j=="A"){var h=d.lookupReference("notusergrid");var i=Ext.create(h.store.model);Ext.apply(i.data,g.data);h.store.insert(0,i);b.remove(g)}else{g.set("_flag","D");e=true}});if(e){f.view.refresh()}},afterSave:function(a,b){var c=this;if(a.result.resultCode=="0"){objList=c.getReferences();objList.btnSave.setDisabled(true);objList.notusergrid.store.reload({afterSaveData:true});objList.mastergrid.store.reload({afterSaveData:true})}else{Hc.alert(a.result.msg)}c.callParent(arguments)}});
Ext.define("Hc_Framework.view.itgroleuser.ItgRoleUserModel",{extend:"Hc_Common.view.BaseSimplePageModel",alias:"viewmodel.itgroleuser",stores:{store2:{type:"basestore",model:"Hc_Framework.model.ItgRoleList",proxy:{url:Hc.basePath+"itg_role_user/getUser.json?isExist=false"}}}});
Ext.define("Hc_Framework.view.itgroleuser.ItgUserRole",{extend:"Hc_Common.view.BaseSimplePage",alias:"widget.itguserrole",controller:"itguserrole",viewModel:{type:"itguserrole"},customLayout:true,gridModel:"Hc_Framework.model.ItgUserRole",gridPrimaryKey:"userRoleId",gridLoadUrl:Hc.basePath+"itg_user_role/getRole.json?isExist=true",gridSaveUrl:Hc.basePath+"itg_user_role/batchOperate.json",gridExportUrl:Hc.basePath+"itg_user_role/do_export.json",gridImportUrl:Hc.basePath+"",initComponent:function(){var d=this;var c=Ext.create("Hc_Framework.store.ItgProject");Ext.apply(d,{searchItems:[{fieldLabel:"所属项目",name:"projectCode",xtype:"extcombox",store:c,displaymember:"projectName",valuemember:"projectCode"},{xtype:"textfield",fieldLabel:"角色名称",name:"roleName"},{xtype:"textfield",fieldLabel:"角色拥有者",name:"roleOwner"},{xtype:"combouseflag",fieldLabel:"启用状态",name:"enableFlag"}],gridColumns:[{dataIndex:"roleName",header:"角色名称",width:80},{dataIndex:"roleOwner",header:"角色拥有者",width:80},{header:"所属项目",dataIndex:"projectCode",xtype:"bllookupedit",readOnly:true,estore:c,gstore:c,displaymember:"projectName",valuemember:"projectCode",width:120},{dataIndex:"enableFlag",header:"启用状态",readOnly:true,xtype:"bllookupedit",displayvalue:"0=禁用:1=启用",width:60},{dataIndex:"creator",header:"分配人员",width:80},{dataIndex:"createTime",header:"分配时间",width:135},{dataIndex:"remarks",header:"备注",flex:1}]});d.grid.title="已分配角色";var e={title:"未分配角色",xtype:"grid",reference:"notrolegrid",columnLines:true,split:true,columns:[{dataIndex:"roleName",header:"角色名称",width:80},{dataIndex:"roleOwner",header:"角色拥有者",width:80},{header:"所属项目",dataIndex:"projectCode",xtype:"bllookupedit",readOnly:true,estore:c,gstore:c,displaymember:"projectName",valuemember:"projectCode",width:120},{dataIndex:"enableFlag",header:"启用状态",readOnly:true,xtype:"bllookupedit",displayvalue:"0=禁用:1=启用",width:60},{dataIndex:"creator",header:"创建者",width:80},{dataIndex:"createTime",header:"创建日期",width:135},{dataIndex:"remarks",header:"备注",flex:1}],region:"north",height:350,bind:{store:"{store2}"},plugins:[],selModel:{mode:"MULTI",allowDeselect:true},bbar:{xtype:"pagingtoolbar",plugins:Ext.create("Ext.ux.ComboPageSize"),displayInfo:true,bind:{store:"{store2}"}},listeners:{selectionchange:"onNotUserGridSelectionChange"},viewConfig:{enableTextSelection:true}};var b={xtype:"container",border:"false",region:"center",layout:"border",items:[e,d.grid]};var a={xtype:"treepanel",reference:"usertree",width:330,region:"west",columns:[{text:"部门",dataIndex:"text",flex:1,xtype:"treecolumn"}],store:{type:"treebase",proxy:{url:Hc.basePath+"itg_user_role/getNodeByDeptNo.json",reader:{type:"json",rootProperty:"children",totalProperty:"totalCount"}},root:{id:0,text:"hc",expanded:false}},split:true,listeners:{selectionchange:"onSelectChange",}};d.otherItems=[a,b,d.toolbar,d.searchPanel];d.items=d.otherItems;d.callParent()}});
Ext.define("Hc_Framework.view.itgroleuser.ItgUserRoleController",{extend:"Hc_Common.view.BaseSimplePageController",alias:"controller.itguserrole",init:function(){var a=this.getReferences();a.btnAdd.setDisabled(true);a.btnDelete.setDisabled(true);this.callParent()},onSelectChange:function(d){var c=this,a=c.getReferences();var e=c.lookupReference("usertree");var b=e.getSelectionModel().getSelection()[0];if(b){if(b.get("leaf")==true){a.btnSearch.setDisabled(false);a.notrolegrid.enable();a.mastergrid.enable();this.onBtnSearchClick()}else{a.btnSearch.setDisabled(true);a.notrolegrid.store.removeAll();a.mastergrid.store.removeAll()}}a.btnAdd.setDisabled(true);a.btnDelete.setDisabled(true)},beforeSearch:function(c){var d=this.lookupReference("usertree");var f=d.getSelectionModel().getSelection()[0];if(!f||f.get("leaf")!=true){return}var h=Ext.util.Format.substr(f.get("id"),1,f.get("id").length);c.proxy.extraParams.userId=h;var a=this.lookupReference("notrolegrid").store;a.proxy.extraParams.userId=h;var b=this.lookupReference("commonsearch");if(b){var e=b.getValues();for(var g in e){if(e[g]!==""){a.proxy.extraParams[g]=e[g]}else{delete a.proxy.extraParams[g]}}}a.load();return true},onBtnAddClick:function(){var f=this;var h=f.lookupReference("notrolegrid");var d=h.getSelectionModel().getSelection();if(d==null||d.length<=0){Ext.Msg.alert("系统提示","请选择角色");return}var e=f.lookupReference("mastergrid");var g=f.lookupReference("usertree");var b=g.getSelectionModel().getSelection()[0];if(!b){Ext.Msg.alert("系统提示","请选择用户");return}var c=Ext.util.Format.substr(b.get("id"),1,b.get("id").length);Ext.Array.each(d,function(k){k.data._flag="A";var j=f.lookupReference("usertree");k.data.userId=c;var i=Ext.create(e.store.model);Ext.apply(i.data,k.data);e.store.insert(0,i);h.store.remove(k)});var a=f.getReferences();a.btnSave.setDisabled(false)},onBtnDeleteClick:function(c){var d=this,f=d.workObject,b=f.getStore(),e=false,a=f.getSelectionModel().getSelection();if(a.length<1){return}if(!d.checkDelete(a)===false){return}Ext.Array.each(a,function(g){var j=g.get("_flag");if(j=="A"){var i=d.lookupReference("notrolegrid");var h=Ext.create(i.store.model);Ext.apply(h.data,g.data);i.store.insert(0,h);b.remove(g)}else{g.set("_flag","D");e=true}});if(e){f.view.refresh()}},onNotUserGridSelectionChange:function(){var b=this,a=b.getReferences();a.btnAdd.setDisabled(false)},onGridSelectionChange:function(){var b=this,a=b.getReferences();a.btnDelete.setDisabled(false)},afterSave:function(b,c){var d=this,a=d.getReferences();a.btnSave.setDisabled(true);a.notrolegrid.store.load();a.mastergrid.store.load()},afterSave:function(b,c){var d=this;if(b.result.resultCode=="0"){var a=d.getReferences();a.btnSave.setDisabled(true);a.notrolegrid.store.reload({afterSaveData:true});a.mastergrid.store.reload({afterSaveData:true})}else{Hc.alert(b.result.msg)}d.callParent(arguments)}});
Ext.define("Hc_Framework.view.itgroleuser.ItgUserRoleModel",{extend:"Hc_Common.view.BaseSimplePageModel",alias:"viewmodel.itguserrole",stores:{store2:{type:"basestore",model:"Hc_Framework.model.ItgUserRole",proxy:{url:Hc.basePath+"itg_user_role/getRole.json?isExist=false"}}}});
Ext.define("Hc_Framework.view.itguserprivilege.ItgUserPrivilege",{extend:"Hc_Common.view.BaseSimplePage",alias:"widget.itguserprivilege",controller:"itguserprivilege",viewModel:{type:"itguserprivilege"},initComponent:function(){var a=this;a.gridModel="Hc_Framework.model.ItgUserPrivilege";a.gridColumns=[{dataIndex:"moduleNo",header:"模块ID"},{dataIndex:"moduleCode",header:"模块编号"},{dataIndex:"moduleName",header:"模块编号",width:60},{dataIndex:"rightValue",header:"模块权限值",flex:1},{dataIndex:"addRightValue",header:"添加特权",width:60},{dataIndex:"rightValue",header:"减少特权",flex:1},{dataIndex:"creator",header:"分配人员",width:70},{dataIndex:"createTime",header:"分配日期",xtype:"datecolumn",format:"Y-m-d",width:70},];a.gridLoadUrl=Hc.basePath+"itguserprivilege/list.json";a.gridSaveUrl=Hc.basePath+"itguserprivilege/save.json";a.otherItems=[{xtype:"grid",reference:"usergrid",width:150,region:"west",split:true,columns:[{text:"用户编号",dataIndex:"userCode",flex:0.5},{text:"用户名称",dataIndex:"userName",flex:0.5}],listeners:{selectionchange:"onSelectChange"}}];a.searchItems=[{xtype:"textfield",name:"creator",fieldLabel:"创建人员"}];a.callParent()}});
Ext.define("Hc_Framework.view.itguserprivilege.ItgUserPrivilegeController",{extend:"Hc_Common.view.BaseSimplePageController",alias:"controller.itguserprivilege",onSelectChange:function(a){this.onBtnSearchClick()},onBtnAddClick:function(){var b=this,a=b.lookupReference("usergrid").getSelectionModel().getSelection();if(a.length<1){Ext.Msg.alert("系统提示","请选择角色");return}if(!b.win){b.win=Ext.widget("uxrolelist")}b.win.show()},onChooseUserClick:function(d){var f=this,b=f.lookupReference("usergrid").getSelectionModel().getSelection()[0].get("userId"),e=f.win.getComponent("roleList").getSelectionModel().getSelection(),a=f.getView().workObject.getStore(),c=a.getModel();Ext.Array.each(e,function(g){if(a.findBy(function(h){return h.data.roleId==g.data.roleId})==-1){a.insert(0,new c({userId:b,roleId:g.data.roleId,roleName:g.data.roleName,roleOwner:g.data.roleOwner,enableFlag:g.data.enableFlag,remarks:g.data.remarks,_flag:"A"}))}});f.win.close()},customFilter:function(b,a){var c=this.lookupReference("usergrid").getSelection();if(c.length<1){return false}a.push({property:"userId",value:c[0].get("userId")});return true}});
Ext.define("Hc_Framework.view.itguserprivilege.ItgUserPrivilegeModel",{extend:"Hc_Common.view.BaseSimplePageModel",alias:"viewmodel.itguserprivilege"});
Ext.define("Hc_Framework.view.uchome.HomePage",{extend:"Ext.Container",alias:"widget.homepage",title:"首页",id:"app-homepage",layout:{type:"fit",align:"middle"},initComponent:function(){this.callParent()}});
Ext.define("Hc_Framework.view.uclogin.Login",{extend:"Ext.window.Window",viewModel:"login",controller:"login",modal:true,bodyPadding:10,title:"用户登录",closable:false,autoShow:true,cls:"login",width:500,height:300,items:{xtype:"form",reference:"form",baseCls:"x-plain",items:[{xtype:"textfield",name:"usercode",fieldLabel:"用户名",allowBlank:false,enableKeyEvents:true,listeners:{specialKey:"onSpecialKey"}},{xtype:"textfield",name:"password",inputType:"password",fieldLabel:"密码",allowBlank:false,enableKeyEvents:true,cls:"password",listeners:{specialKey:"onSpecialKey"}}]},buttons:[{text:"登录",listeners:{click:"onLoginbtnClick"}}]});
Ext.define("Hc_Framework.view.uclogin.LoginController",{extend:"Ext.app.ViewController",alias:"controller.login",onLoginbtnClick:function(){var c=this,b=c.lookupReference("form"),a=b.getValues();if(!b.isValid()){return}Ext.Ajax.request({url:"/login.json",method:"POST",params:a,success:function(d,e){console.info("执行了额咩有");c.onSuccess(a,Ext.decode(d.responseText))}});this.onSuccess(a,{username:"吴德锋"})},onSpecialKey:function(b,a){if(a.getKey()===a.ENTER){this.onLoginbtnClick()}},onSuccess:function(d,a){var c=this,e=a.username,b=Ext.create("Hc_Framework.model.CurrentUser",{userCode:d.usercode,userName:e});b.save();c.getView().destroy();Ext.create("Hc_Framework.view.main.Main",{viewModel:{data:{system:{username:e}}}})}});
Ext.define("Hc_Framework.view.uclogin.LoginModel",{extend:"Ext.app.ViewModel",alias:"viewmodel.login",data:{userCode:"wu.df"}});
Ext.define("Hc_Framework.view.ucmain.Main",{extend:"Ext.container.Viewport",id:"mainpage",xtype:"app-main",controller:"main",viewModel:{type:"main"},layout:"border",items:[{xtype:"maintop",region:"north",height:25},{region:"west",width:180,split:true,collapsible:true,collapseMode:"mini",title:"导航菜单",layout:"fit",items:[{xtype:"leftmenu"}]},{region:"center",xtype:"maincenter"},{xtype:"panel",region:"south",height:25}],initComponent:function(){console.info("这是我们的Main");Ext.setGlyphFontFamily("FontAwesome");this.autoScroll=true;this.callParent()}});
Ext.define("Hc_Framework.view.ucmain.MainController",{extend:"Ext.app.ViewController",alias:"controller.main",init:function(){console.info("这是我们的MainControlle1");this.checkActiveUser();this.callParent()},checkActiveUser:function(){var c=this,d=c.getViewModel();var a=Ext.create("Hc_Framework.store.CurrentUser");a.load();var b=a.getAt(0);console.info("uselsdsd");console.info(b);console.info(b.get("userName"));if(b){d.set("currentUser",b);d.set("system.version",b.get("version"));d.set("system.name",b.get("sysid"));return}Ext.Ajax.request({url:"getCurrentLoginUser.json",success:function(e){console.info("执行成功了没有");var g=JSON.parse(e.responseText);if(!g.result){Hc.alert("获取用户信息出错",function(){c.loginOut()});return}if(g.result.resultCode==0){var f=Ext.create(a.model);Ext.apply(f.data,g.entity);f.set("version",g.version);f.set("sysid",g.env);f.save();a.add(f);a.sync(true);d.set("currentUser",f);d.set("system.version",f.get("version"));d.set("system.name",f.get("sysid"))}else{var h=g.result.msg||"获取用户信息出错";Hc.alert(h,function(){c.loginOut()})}},failure:function(){Hc.alert("访问系统出错",function(){c.loginOut()})}})},onExitButtonClick:function(b){var a=this;Hc.confirm("确认退出当前用户？",function(c){if(c=="yes"){a.loginOut()}})},getUserInfo:function(){return this.getViewModel().get("currentUser")||{}},loginOut:function(){var a=Ext.create("Hc_Framework.store.CurrentUser");a.load();var b=a.getAt(0);if(b){b.erase();b.save()}a.sync(true);location.href=Hc.basePath+"logout.json"},onSearchModule:function(d){var a=this.getView().down("maintree").getStore(),c=d.getValue(),b;if(c==""){return}b=a.findRecord("moduleNo",c,0,false,false,true);if(!b||!b.data.leaf){b=a.findRecord("menuName",c,0,false,false,true)}if(!b||!b.data.leaf){b=a.findRecord("moduleCode",c,0,false,false,true)}if(!b){Hc.alert("模块编号或名称【"+c+"】不存在");return}this.onTreeMenuClick(null,b)},onTreeMenuClick:function(e,b){if(!b.data.leaf||!b.data.url){return}console.info("军事科技----");console.info(e);console.info(b);var f=this,g=b.data.url.split("#"),d=b.data.appCode.toLowerCase(),a=g[0]+b.data.jsUrl;console.info(b.data.jsUrl);console.info("jspath");console.info(g);console.info(g[0]);console.info(a);if(d=="integ"){Hc.basePath=g[0]}else{Hc[d+"Path"]=g[0]}var c=d+"IsLoaded";if(d!="integ"&&!Hc[c]){Ext.Loader.loadScript({url:a,onLoad:function(){f.createTab(b.data);Hc[c]=true},onError:function(){Hc.alert("加载应用的Js文件出错")}})}else{f.createTab(b.data)}},createTab:function(f){console.info("这是最棒的111");var g=Ext.getCmp("maintabpanel"),c="tab_"+f.menuNo,e=f.url.split("#")[1],b=g.getComponent(c),a=this.getUserInfo();console.info("这是最棒的");if(!this.checkModule(e)){return}if(!b){var d={title:f.menuName,itemId:c,xtype:e,userRight:f.rightValue,moduleRight:f.rights,userName:a.userName,userCode:a.userCode,closable:true,reorderable:true,loadMask:"加载中..."};b=g.add(d)}g.setActiveTab(b)},checkModule:function(b){console.info("这是最棒的"+b);var a=Ext.ClassManager.getNameByAlias("widget."+b);if(a){return true}Hc.alert("URL出错,无法创建此模块");return false},setLastVisitMenu:function(d){var f=this.lookupReference("lastvisittree"),b=f.getStore(),e=15,a=b.getRoot(),c=a.findChild("menuNo",d.menuNo);if(c){c.remove()}if(a.childCount>=e){a.lastChild.remove()}c=Ext.create("Hc_Framework.model.LastVisit",{id:d.menuNo,text:d.menuName,leaf:true,menuNo:d.menuNo,menuName:d.menuName,moduleNo:d.moduleNo,moduleName:d.moduleName,moduleUrl:d.moduleUrl});a.insertChild(0,c);b.sync()},onDoing:function(a){Hc.alert("填出信息");this.setMsg("功能【"+a.getText()+"】正在开发中...")},setUserPassword:function(){var c=this,b=c.getViewModel(),a=b.get("currentUser");if(!a){return}Ext.widget("window",{closeAction:"destroy",modal:true,bodyPadding:"20 40 20 20",title:"更改密码",autoShow:true,items:{xtype:"form",baseCls:"x-plain",defaults:{labelWidth:60,allowBlank:false},defaultType:"textfield",items:[{name:"oldPassword",inputType:"password",fieldLabel:"原密码"},{name:"password",inputType:"password",fieldLabel:"新密码"},{name:"newPwd2",inputType:"password",fieldLabel:"确认密码",vtype:"compareTo",compareTo:"password",compareError:"新密码跟确认密码输入不一致"},{name:"userId",xtype:"hiddenfield",bind:{value:"{currentUser.userId}"}}]},bbar:["->",{xtype:"button",text:"确认",handler:"onBtnSetPwdClick",scope:c,glyph:Hc.Icon.btnSave},{xtype:"button",text:"取消",handler:function(d){d.up("window").close()},glyph:Hc.Icon.btnCancel}]})},onBtnSetPwdClick:function(b){var d=this,e=b.up("window"),c=e.down("form"),g=c.getValues();if(c.isValid()){console.info("单击前");var a={userId:g.userId,password:hex_md5(g.password),oldPassword:hex_md5(g.oldPassword)},f=a;console.info("单击后");Ext.Ajax.request({url:Hc.basePath+"itg_login_user/changePassword.json",params:f,method:"POST",success:function(i){var h=JSON.parse(i.responseText);if(h.result){if(h.result.resultCode==0){Hc.alert("更改密码成功,请重新登录系统",function(){d.loginOut()})}else{Hc.alert(h.result.msg)}}else{Hc.alert("不明错误")}},failure:function(h){Hc.alert("系统异常!"+h.responseText)}})}},setMsg:function(a){this.getViewModel().set("msg.text",a)}});
Ext.define("Hc_Framework.view.ucmain.MainModel",{extend:"Ext.app.ViewModel",alias:"viewmodel.main",data:{system:{name:"",version:"",copyright:"Copyright ©2014~2020 Hc All Rights Reserved"},msg:{text:"加载完毕",state:"s"},currentUser:null},formulas:{systemInfo:function(a){return a("name")+a("version")}}});
Ext.define("Hc_Framework.view.ucmain.menu.LastVisitTree",{extend:"Ext.tree.Panel",xtype:"lastvisittree",header:{hidden:true},reference:"lastvisittree",rootVisible:true,lines:true,hideHeaders:true,columns:[{dataIndex:"menuName",xtype:"treecolumn",flex:1}],store:{type:"lastvisit"},listeners:{itemclick:"onTreeMenuClick"},initComponent:function(){this.callParent()}});
Ext.define("Hc_Framework.view.ucmain.menu.MainTree",{extend:"Ext.tree.Panel",alias:"widget.maintree",header:{hidden:true},rootVisible:false,lines:true,hideHeaders:true,listeners:{itemdblclick:"onTreeMenuClick"},viewConfig:{enableTextSelection:true},initComponent:function(){var a=this;a.columns=[{xtype:"treecolumn",flex:1,dataIndex:"menuName",renderer:function(c){var b=a.searchField.getValue();if(b.length>0){return a.strMarkRedPlus(b,c)}return c},listeners:{expandnode:function(e){if(e.childNodes.length>0){e.getUI().getIconEl().src="folder-open.gif"}for(var d=0,c=e.childNodes.length;d<c;d++){var b=e.childNodes[d];b.getUI().getIconEl().src="folder.gif"}},collapsenode:function(b){if(b.childNodes.length>0){b.getUI().getIconEl().src="folder.gif"}}}}];Ext.apply(a,{store:Ext.create("Hc_Framework.store.MainTree"),dockedItems:[{xtype:"textfield",dock:"top",emptyText:"查询",enableKeyEvents:true,triggers:{clear:{cls:"x-form-clear-trigger",handler:"onClearTriggerClick",hidden:true,scope:"this"},search:{cls:"x-form-search-trigger",weight:1,handler:"onSearchModule"}},onClearTriggerClick:function(){this.setValue();a.store.clearFilter();this.getTrigger("clear").hide()},listeners:{keyup:{fn:function(d,c){if(c.keyCode==Ext.event.Event.ENTER){a.up("app-main").controller.onSearchModule(d);return}var b=d.getValue();if(b){d.getTrigger("clear").show();a.filterStore(b)}else{a.store.clearFilter();d.getTrigger("clear").hide()}},buffer:300},render:function(b){this.searchField=b},scope:a}}]});a.callParent(arguments);a.store.on("load",function(c,b){if(b&&b.length>0){a.expandNode(b[0],true)}})},filterStore:function(e){var d=this,b=d.store,c=e.toLowerCase(),f=function(k){var j=k.childNodes,g=j&&j.length,l=a.test(k.get("menuName"))||a.test(k.get("moduleNo"))||a.test(k.get("moduleCode")),h;if(!l){for(h=0;h<g;h++){if(j[h].isLeaf()){l=j[h].get("visible")}else{l=f(j[h])}if(l){break}}}else{for(h=0;h<g;h++){j[h].set("visible",true)}}return l},a;if(c.length<1){b.clearFilter()}else{a=new RegExp(c,"i");b.getFilters().replaceAll({filterFn:f})}},strMarkRedPlus:function(b,a){return a.replace(new RegExp("("+b+")","gi"),"<span style='color: indianred;'><b>$1</b></span>")}});
Ext.define("Hc_Framework.view.ucmain.menu.MyFavorite",{extend:"Ext.tree.Panel",xtype:"myfavorite",header:{hidden:true},rootVisible:true,lines:true,hideHeaders:true,columns:[{dataIndex:"menuName",xtype:"treecolumn",flex:1}],store:{type:"myfavorite"},listeners:{itemclick:"onTreeMenuClick"},initComponent:function(){this.callParent()}});
Ext.define("Hc_Framework.view.ucmain.region.Center",{extend:"Ext.tab.Panel",alias:"widget.maincenter",uses:["Hc_Framework.view.uchome.HomePage","Hc_Framework.view.itgloginuser.ItgLoginUser"],closeAction:"hide",autoDestroy:true,tabPosition:"top",border:false,id:"maintabpanel",plugins:[{ptype:"tabclosemenu",closeAllTabsText:"关闭所有",closeOthersTabsText:"关闭其他",closeTabText:"关闭"},Ext.create("Ext.ux.TabReorderer")],initComponent:function(){this.items=[{glyph:Hc.Icon.btnHome,xtype:"homepage",reorderable:false}];this.callParent()}});
Ext.define("Hc_Framework.view.ucmain.region.LeftMenu",{extend:"Ext.Container",alias:"widget.leftmenu",layout:"fit",border:false,items:[{xtype:"maintree",reorderable:false,border:false}],initComponent:function(){this.callParent()}});
Ext.define("Hc_Framework.view.ucmain.region.Top",{extend:"Ext.Container",alias:"widget.maintop",id:"app-header",title:"HCSunmo CRM 管理系统",titleEn:"",layout:{type:"hbox",align:"middle"},initComponent:function(){document.title=this.title;this.items=[{xtype:"component",id:"app-header-logo"},{xtype:"component",html:'<span id="app-header-title-en"><span>'+this.titleEn+'<span id="app-header-title">'+this.title+"</span>"},{xtype:"component",id:"app-header-systemname",bind:{html:"{system.name}"}},{xtype:"component",id:"app-header-version",bind:{html:"<span onclick=\"Hc.openUrl('releaselog.html','发布日志')\" style=\"cursor: pointer\">{system.version}</span>"},flex:1},{xtype:"toolbar",baseCls:"x-place",id:"app-header-toolbar",items:[{bind:{text:"{currentUser.deptName}"},glyph:Hc.Icon.btnGroup},{bind:{text:"{currentUser.userName}"},glyph:Hc.Icon.btnUser},{text:"通讯录",handler:"onDoing",glyph:Hc.Icon.btnAddressList},{text:"设置",glyph:Hc.Icon.btnSetting,handler:"setUserPassword"},{text:"退出",glyph:Hc.Icon.btnExit,handler:"onExitButtonClick"}]}];this.callParent()}});
Ext.define("Hc_Framework.view.hc.HcSupplierCustomer",{extend:"Hc_Common.view.BaseSimplePage",alias:"widget.hcsuppliercustomer",controller:"hcsuppliercustomercontroller",viewModel:{type:"hcsuppliercustomermodel"},title_:"潜在客户",initComponent:function(){var a=this;Ext.apply(a,{searchItems:[{xtype:"textfield",fieldLabel:"客户编号",name:"storageNo"}],gridModel:"Hc_Framework.model.HcSupplierPurchase",gridSubGrid:"HcSupplierInquiryProduct",gridColumns:[{header:"客户编号",dataIndex:"storageNo",width:"15%",renderer:function(f,d,b,g,e,c){return'<span onclick=""><a href="#">'+f+" </a></span>"}},{header:"客户名称",dataIndex:"supplierName",width:250},{dataIndex:"storageClass",header:"客户电话",width:150},{dataIndex:"register",header:"客户联系人",width:150},{dataIndex:"storageDate",header:"移动电话 ",width:150},{dataIndex:"storageStatus",header:"客户级别",width:150},{dataIndex:"purchaseDate",header:"跟单业务",width:150}],allendflag:false,gridPrimaryKey:"inquiryNo",gridLoadUrl:Hc.basePath+"hc_supplier_inquiry_management_list/list.json",gridLoadSubUrl:Hc.basePath+"hc_supplier_inquiry_management_list/listAll.json",gridSaveUrl:Hc.basePath+"hc_supplier_inquiry_management_list/batchOperate.json",gridExportUrl:Hc.basePath+"hc_supplier_inquiry_management_list/do_export.json",gridDeleteMasterCustomerUrl:Hc.basePath+"hc_supplier_inquiry_management_list/deleteMasterCustomer.json",gridAddMasterCustomerUrl:Hc.basePath+"hc_supplier_inquiry_management_list/addMasterCustomer.json",gridImportUrl:Hc.basePath+"",subWinTableName:"Hc_Framework.view.hc.SubHcSupplierCustomer",subformActivate:false});a.callParent()}});
Ext.define("Hc_Framework.view.hc.HcSupplierCustomerController",{extend:"Hc_Common.view.BaseSimplePageController",alias:"controller.hcsuppliercustomercontroller",init:function(){var a=this;Ext.apply(a,{windowFlag:true,newobj:this.view.subWinTableName});a.callParent()},onEditClick:function(g,a,d,b,f,c){},onEditClick_:function(b,a,h,c,g,i,d,f){var j=Ext.create("Hc_Common.store.Base",{model:"Hc_Framework.model.HcSupplierPurchase",autoLoad:false,groupField:"inquiredQTY_quotedPrice$",proxy:{url:this.view.gridLoadSubUrl}});j.proxy.extraParams.inquiryNo=c.data.inquiryNo;j.load();if(h==0){Ext.create(this.view.subWinTableName,{title:"编辑",record:c,me_:this,store:j}).show();this.view.subformActivate=true;this.onBtnCancelClick()}}});
Ext.define("Hc_Framework.view.hc.HcSupplierCustomerModel",{extend:"Hc_Common.view.BaseSimplePageModel",alias:"viewmodel.hcsuppliercustomermodel"});
Ext.define("Hc_Framework.view.hc.SubHcSupplierCustomer",{extend:"Hc_Common.view.BaseWinPage",alias:"widget.subhcsuppliercustomer",controller:"subhcsuppliercustomercontroller",viewModel:{type:"subhcsuppliercustomermodel"},title:"新增",width:1000,height:620,maxWidth:1000,minWidth:1000,minHeight:620,layout:"border",closeAction:"hide",plain:false,collapsible:false,modal:true,dockedItems:[{xtype:"toolbar",dock:"top",items:[{text:"保存",handler:"onBtnSaveClick",glyph:Hc.Icon.btnSave},{text:"编辑",handler:"onBtnEditClick",glyph:Hc.Icon.btnEdit},{text:"取消",handler:"onBtnCancelClick",glyph:Hc.Icon.btnCancel}]}],listeners:{beforeshow:function(f,e){var b=Ext.create("Hc_Framework.store.CurrentUser");b.load();var a;var c;if(this.title=="新增"){c="PE"+Ext.util.Format.date((new Date()),"Y").substring(2,5)+Ext.util.Format.date((new Date()),"Y").substring(0,2)+Ext.util.Format.date((new Date()),"dmHis")}else{if(this.title=="编辑"){for(i=0;i<this.record.getFields().length;i++){var d=Ext.util.Format.trim(this.record.getFields()[i].getName());if((this.getReferences())[d]){if(this.lookupReference(d).is("combo")){this.lookupReference(d).setRawValue(this.record.get(d))}else{this.lookupReference(d).setValue(this.record.get(d))}this.lookupReference(d).disable()}}}}this.lookupReference("subhcsuppliercustomer").title=">>>>"+this.me_.view.title_}},initComponent:function(){var a=this;Ext.apply(a,{items:[{title:"--->采购管理",xtype:"panel",defaults:{},layout:{type:"absolute"},reference:"subhcsuppliercustomer",region:"north",bodyStyle:"background:#cbdbe0;",padding:"3 0 3 0",items:[{xtype:"fieldset",height:60,width:980,layout:{type:"table",columns:4},x:3,y:3,padding:"3 0 0 10",items:[{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"客户编码",name:"storageNo",reference:"storageNo",listeners:{beforerender:function(b){b.fieldLabel+='<font size="2px" color="red">*</font>'}}},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"客户名称",name:"storageNo",reference:"storageNo"},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"客户电话",name:"storageNo",reference:"storageNo"},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"客户传真",name:"storageNo",reference:"storageNo"},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"网址",name:"storageNo",reference:"storageNo"},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"电子邮件",name:"storageNo",reference:"storageNo"},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"邮编",name:"storageNo",reference:"storageNo"},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"国家",name:"storageNo",reference:"storageNo"}]},{xtype:"fieldset",height:57,width:980,layout:{type:"table",columns:4},x:3,y:70,padding:"3 0 0 10",items:[{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"省份",name:"supplierNo",reference:"supplierNo"},{xtype:"textfield",labelAlign:"right",labelWidth:78,width:313,fieldLabel:"城市",name:"supplierName",reference:"supplierName",colspan:3},{xtype:"textfield",labelAlign:"right",labelWidth:78,width:313,fieldLabel:"详细地址",name:"supplierName",reference:"supplierName",colspan:3}]},{xtype:"fieldset",height:100,width:980,layout:{type:"table",columns:4},x:3,y:133,padding:"3 0 0 10",items:[{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"组织形式",name:"storageClass",reference:"storageClass"},{xtype:"datefield",labelAlign:"right",labelWidth:78,fieldLabel:"创建用户 ",name:"monetaryUnit",reference:"monetaryUnit"},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"营业执照",name:"storageDate",reference:"storageDate",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"行业类型",name:"billNo",reference:"billNo",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"客户级别",name:"register",reference:"register",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"客户来源",name:"whetherProductInspection",reference:"whetherProductInspection",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"客户银行",name:"qualityInspector",reference:"qualityInspector",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"银行帐号",name:"qualityInspector",reference:"qualityInspector",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"联系人",name:"qualityInspector",reference:"qualityInspector",}]},{xtype:"fieldset",height:150,width:980,layout:{type:"table",columns:4},x:3,y:236,padding:"3 0 0 10",items:[{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"信用额度",name:"eExaminationAndApproval",reference:"eExaminationAndApproval",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"共享销售",name:"storageConfirmation",reference:"storageConfirmation",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"采购周期",name:"storageStatus",reference:"storageStatus",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"跟进周期",name:"storageStatus",reference:"storageStatus",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"首次购买",name:"storageStatus",reference:"storageStatus",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"最近购买",name:"storageStatus",reference:"storageStatus",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"首次付款",name:"storageStatus",reference:"storageStatus",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"最近付款",name:"storageStatus",reference:"storageStatus",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"首次跟进",name:"storageStatus",reference:"storageStatus",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"最近跟进",name:"storageStatus",reference:"storageStatus",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"使用货币",name:"storageStatus",reference:"storageStatus",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"纳税编号",name:"storageStatus",reference:"storageStatus",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"付款方式",name:"storageStatus",reference:"storageStatus",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"业务跟单",name:"storageStatus",reference:"storageStatus",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"所在部门",name:"storageStatus",reference:"storageStatus",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"创建日期",name:"storageStatus",reference:"storageStatus",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"修改用户",name:"storageStatus",reference:"storageStatus",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"修改日期",name:"storageStatus",reference:"storageStatus",}]},{xtype:"fieldset",height:130,width:980,layout:{type:"table",columns:4},x:3,y:393,padding:"3 0 0 10",items:[{xtype:"textarea",labelAlign:"right",labelWidth:78,width:800,fieldLabel:"客户简介",name:"approvalOpinion",reference:"approvalOpinion",colspan:4},{xtype:"textarea",labelAlign:"right",labelWidth:78,width:800,fieldLabel:"备&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;注",name:"remark",reference:"remark",colspan:4}]}]}]});a.callParent()}});
Ext.define("Hc_Framework.view.hc.SubHcSupplierCustomerController",{extend:"Hc_Common.view.BaseWinPageController",alias:"controller.subhcsuppliercustomercontroller",flag:false,record_:"",init:function(){var c=this;var a=Ext.create("Hc_Framework.model.HcSupplierBePutInStorage",{});this.record_=a;for(i=0;i<a.getFields().length;i++){var b=Ext.util.Format.trim(a.getFields()[i].getName());if((this.getReferences())[b]){this.lookupReference(b).on("change",c.onBtnchange,c)}}c.callParent()},onBtnEditClick:function(){for(i=0;i<this.record_.getFields().length;i++){var a=Ext.util.Format.trim(this.record_.getFields()[i].getName());if((this.getReferences())[a]){if("contactsName"==a||"contactsTel"==a||"contactsFax"==a||"supplierName"==a){this.lookupReference(a).disable()}else{this.lookupReference(a).enable()}}}},onBtnchange:function(d,c,a,b){var e=this.view.me_.workObject.store;e.beginUpdate();if(d.is("combo")){this.view.record.set(d.name,d.getRawValue())}else{this.view.record.set(d.name,d.getRawValue())}if(this.view.title=="编辑"){this.flag=false}else{if(this.view.title=="新增"){this.flag=true}}e.endUpdate()},onBtnSaveClick:function(){if(this.view.title=="编辑"){this.flag=false}else{if(this.view.title=="新增"){this.flag=true}}for(i=0;i<this.record_.getFields().length-3;i++){if(!this.lookupReference(Ext.util.Format.trim(this.record_.getFields()[i].getName())).isValid()){return}}this.view.me_.workObject.store.add(this.view.record);this.view.me_.onBtnSaveClick(null,this)},onBtnCancelClick:function(){if(this.flag){this.view.me_.workObject.store.removeAt(this.view.me_.workObject.store.getCount()-1);this.view.me_.workObject.view.refresh();this.flag=false}if(this.view.title=="编辑"){this.view.me_.workObject.store.rejectChanges();this.view.me_.workObject.view.refresh()}this.view.me_.view.subformActivate=false;this.view.hide()}});
Ext.define("Hc_Framework.view.hc.SubHcSupplierCustomerModel",{extend:"Hc_Common.view.BaseWinPageModel",alias:"viewmodel.subhcsuppliercustomermodel"});
Ext.define("Hc_Framework.view.hc.HcSupplierCustomerContact",{extend:"Hc_Common.view.BaseSimplePage",alias:"widget.hcsuppliercustomercontact",controller:"hcsuppliercustomercontactcontroller",viewModel:{type:"hcsuppliercustomercontactmodel"},title_:"客户联系人",initComponent:function(){var a=this;Ext.apply(a,{searchItems:[{xtype:"textfield",fieldLabel:"联系人编号",name:"storageNo"}],gridModel:"Hc_Framework.model.HcSupplierPurchase",gridSubGrid:"HcSupplierInquiryProduct",gridColumns:[{header:"联系人编号",dataIndex:"storageNo",width:"15%",renderer:function(f,d,b,g,e,c){return'<span onclick=""><a href="#">'+f+" </a></span>"}},{header:"联系人姓名",dataIndex:"supplierName",width:250},{dataIndex:"storageClass",header:"固定电话",width:150},{dataIndex:"register",header:"移动电话",width:150},{dataIndex:"storageDate",header:"公司名称 ",width:150},{dataIndex:"storageStatus",header:"电子邮件",width:150}],allendflag:false,gridPrimaryKey:"inquiryNo",gridLoadUrl:Hc.basePath+"hc_supplier_inquiry_management_list/list.json",gridLoadSubUrl:Hc.basePath+"hc_supplier_inquiry_management_list/listAll.json",gridSaveUrl:Hc.basePath+"hc_supplier_inquiry_management_list/batchOperate.json",gridExportUrl:Hc.basePath+"hc_supplier_inquiry_management_list/do_export.json",gridDeleteMasterCustomerUrl:Hc.basePath+"hc_supplier_inquiry_management_list/deleteMasterCustomer.json",gridAddMasterCustomerUrl:Hc.basePath+"hc_supplier_inquiry_management_list/addMasterCustomer.json",gridImportUrl:Hc.basePath+"",subWinTableName:"Hc_Framework.view.hc.SubHcSupplierCustomerContact",subformActivate:false});a.callParent()}});
Ext.define("Hc_Framework.view.hc.HcSupplierCustomerContactController",{extend:"Hc_Common.view.BaseSimplePageController",alias:"controller.hcsuppliercustomercontactcontroller",init:function(){var a=this;Ext.apply(a,{windowFlag:true,newobj:this.view.subWinTableName});a.callParent()},onEditClick:function(g,a,d,b,f,c){},onEditClick_:function(b,a,h,c,g,i,d,f){var j=Ext.create("Hc_Common.store.Base",{model:"Hc_Framework.model.HcSupplierPurchase",autoLoad:false,groupField:"inquiredQTY_quotedPrice$",proxy:{url:this.view.gridLoadSubUrl}});j.proxy.extraParams.inquiryNo=c.data.inquiryNo;j.load();if(h==0){Ext.create(this.view.subWinTableName,{title:"编辑",record:c,me_:this,store:j}).show();this.view.subformActivate=true;this.onBtnCancelClick()}}});
Ext.define("Hc_Framework.view.hc.HcSupplierCustomerContactModel",{extend:"Hc_Common.view.BaseSimplePageModel",alias:"viewmodel.hcsuppliercustomercontactmodel"});
Ext.define("Hc_Framework.view.hc.SubHcSupplierCustomerContact",{extend:"Hc_Common.view.BaseWinPage",alias:"widget.subhcsuppliercustomercontact",controller:"subhcsuppliercustomercontactcontroller",viewModel:{type:"subhcsuppliercustomercontactmodel"},title:"新增",width:1000,height:620,maxWidth:1000,minWidth:1000,minHeight:620,layout:"border",closeAction:"hide",plain:false,collapsible:false,modal:true,dockedItems:[{xtype:"toolbar",dock:"top",items:[{text:"保存",handler:"onBtnSaveClick",glyph:Hc.Icon.btnSave},{text:"编辑",handler:"onBtnEditClick",glyph:Hc.Icon.btnEdit},{text:"取消",handler:"onBtnCancelClick",glyph:Hc.Icon.btnCancel}]}],listeners:{beforeshow:function(f,e){var b=Ext.create("Hc_Framework.store.CurrentUser");b.load();var a;var c;if(this.title=="新增"){c="PE"+Ext.util.Format.date((new Date()),"Y").substring(2,5)+Ext.util.Format.date((new Date()),"Y").substring(0,2)+Ext.util.Format.date((new Date()),"dmHis")}else{if(this.title=="编辑"){for(i=0;i<this.record.getFields().length;i++){var d=Ext.util.Format.trim(this.record.getFields()[i].getName());if((this.getReferences())[d]){if(this.lookupReference(d).is("combo")){this.lookupReference(d).setRawValue(this.record.get(d))}else{this.lookupReference(d).setValue(this.record.get(d))}this.lookupReference(d).disable()}}}}this.lookupReference("subhcsuppliercustomer").title=">>>>"+this.me_.view.title_}},initComponent:function(){var a=this;Ext.apply(a,{items:[{title:"--->采购管理",xtype:"panel",defaults:{},layout:{type:"absolute"},reference:"subhcsuppliercustomer",region:"north",bodyStyle:"background:#cbdbe0;",padding:"3 0 3 0",items:[{xtype:"fieldset",height:60,width:980,layout:{type:"table",columns:4},x:3,y:3,padding:"3 0 0 10",items:[{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"联系人编码",name:"storageNo",reference:"storageNo",listeners:{beforerender:function(b){b.fieldLabel+='<font size="2px" color="red">*</font>'}}},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"联系人名称",name:"storageNo",reference:"storageNo"},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"联系人电话",name:"storageNo",reference:"storageNo"},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"固定电话",name:"storageNo",reference:"storageNo"},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"出生日期",name:"storageNo",reference:"storageNo"},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"电子邮件",name:"storageNo",reference:"storageNo"},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"部门",name:"storageNo",reference:"storageNo"},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"籍贯",name:"storageNo",reference:"storageNo"}]},{xtype:"fieldset",height:57,width:980,layout:{type:"table",columns:4},x:3,y:70,padding:"3 0 0 10",items:[{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"省份",name:"supplierNo",reference:"supplierNo"},{xtype:"textfield",labelAlign:"right",labelWidth:78,width:313,fieldLabel:"城市",name:"supplierName",reference:"supplierName",colspan:3},{xtype:"textfield",labelAlign:"right",labelWidth:78,width:313,fieldLabel:"详细地址",name:"supplierName",reference:"supplierName",colspan:3}]},{xtype:"fieldset",height:100,width:980,layout:{type:"table",columns:4},x:3,y:133,padding:"3 0 0 10",items:[{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"职位",name:"storageClass",reference:"storageClass"},{xtype:"datefield",labelAlign:"right",labelWidth:78,fieldLabel:"部门 ",name:"monetaryUnit",reference:"monetaryUnit"},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"毕业院校",name:"storageDate",reference:"storageDate",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"最高学历",name:"billNo",reference:"billNo",}]},{xtype:"fieldset",height:150,width:980,layout:{type:"table",columns:4},x:3,y:236,padding:"3 0 0 10",items:[{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"公司编码",name:"eExaminationAndApproval",reference:"eExaminationAndApproval",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"公司名称",name:"storageConfirmation",reference:"storageConfirmation",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"公司名称",name:"storageStatus",reference:"storageStatus",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"公司传真",name:"storageStatus",reference:"storageStatus",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"公司地址",name:"storageStatus",reference:"storageStatus",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"QQ号码",name:"storageStatus",reference:"storageStatus",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"移动电话",name:"storageStatus",reference:"storageStatus",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"是否共享",name:"storageStatus",reference:"storageStatus",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"创建人",name:"storageStatus",reference:"storageStatus",}]},{xtype:"fieldset",height:130,width:980,layout:{type:"table",columns:4},x:3,y:393,padding:"3 0 0 10",items:[{xtype:"textarea",labelAlign:"right",labelWidth:78,width:800,fieldLabel:"兴趣爱好",name:"approvalOpinion",reference:"approvalOpinion",colspan:4},{xtype:"textarea",labelAlign:"right",labelWidth:78,width:800,fieldLabel:"印象评价",name:"approvalOpinion",reference:"approvalOpinion",colspan:4},{xtype:"textarea",labelAlign:"right",labelWidth:78,width:800,fieldLabel:"往来策略",name:"approvalOpinion",reference:"approvalOpinion",colspan:4},{xtype:"textarea",labelAlign:"right",labelWidth:78,width:800,fieldLabel:"备&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;注",name:"remark",reference:"remark",colspan:4}]}]}]});a.callParent()}});
Ext.define("Hc_Framework.view.hc.SubHcSupplierCustomerContactController",{extend:"Hc_Common.view.BaseWinPageController",alias:"controller.subhcsuppliercustomercontactcontroller",flag:false,record_:"",init:function(){var c=this;var a=Ext.create("Hc_Framework.model.HcSupplierBePutInStorage",{});this.record_=a;for(i=0;i<a.getFields().length;i++){var b=Ext.util.Format.trim(a.getFields()[i].getName());if((this.getReferences())[b]){this.lookupReference(b).on("change",c.onBtnchange,c)}}c.callParent()},onBtnEditClick:function(){for(i=0;i<this.record_.getFields().length;i++){var a=Ext.util.Format.trim(this.record_.getFields()[i].getName());if((this.getReferences())[a]){if("contactsName"==a||"contactsTel"==a||"contactsFax"==a||"supplierName"==a){this.lookupReference(a).disable()}else{this.lookupReference(a).enable()}}}},onBtnchange:function(d,c,a,b){var e=this.view.me_.workObject.store;e.beginUpdate();if(d.is("combo")){this.view.record.set(d.name,d.getRawValue())}else{this.view.record.set(d.name,d.getRawValue())}if(this.view.title=="编辑"){this.flag=false}else{if(this.view.title=="新增"){this.flag=true}}e.endUpdate()},onBtnSaveClick:function(){if(this.view.title=="编辑"){this.flag=false}else{if(this.view.title=="新增"){this.flag=true}}for(i=0;i<this.record_.getFields().length-3;i++){if(!this.lookupReference(Ext.util.Format.trim(this.record_.getFields()[i].getName())).isValid()){return}}this.view.me_.workObject.store.add(this.view.record);this.view.me_.onBtnSaveClick(null,this)},onBtnCancelClick:function(){if(this.flag){this.view.me_.workObject.store.removeAt(this.view.me_.workObject.store.getCount()-1);this.view.me_.workObject.view.refresh();this.flag=false}if(this.view.title=="编辑"){this.view.me_.workObject.store.rejectChanges();this.view.me_.workObject.view.refresh()}this.view.me_.view.subformActivate=false;this.view.hide()}});
Ext.define("Hc_Framework.view.hc.SubHcSupplierCustomerContactModel",{extend:"Hc_Common.view.BaseWinPageModel",alias:"viewmodel.subhcsuppliercustomercontactmodel"});
Ext.define("Hc_Framework.view.hc.HcSupplierMarketingPlan",{extend:"Hc_Common.view.BaseSimplePage",alias:"widget.hcsuppliermarketingplan",controller:"hcsuppliermarketingplancontroller",viewModel:{type:"hcsuppliermarketingplanmodel"},title_:"销售计划",initComponent:function(){var a=this;Ext.apply(a,{searchItems:[{xtype:"textfield",fieldLabel:"计划编码",name:"storageNo"}],gridModel:"Hc_Framework.model.HcSupplierPurchase",gridSubGrid:"HcSupplierInquiryProduct",gridColumns:[{header:"计划编码",dataIndex:"storageNo",width:"15%",renderer:function(f,d,b,g,e,c){return'<span onclick=""><a href="#">'+f+" </a></span>"}},{header:"计划部门",dataIndex:"supplierName",width:250},{dataIndex:"storageClass",header:"年月",width:150},{dataIndex:"register",header:"预计销售量",width:150},{dataIndex:"storageDate",header:"预计销售额(元)",width:150},{dataIndex:"storageStatus",header:"计划员工",width:150},{dataIndex:"storageStatus",header:"计划日期",width:150},{dataIndex:"storageStatus",header:"审核领导",width:150},{dataIndex:"storageStatus",header:"当前状态",width:150}],allendflag:false,gridPrimaryKey:"inquiryNo",gridLoadUrl:Hc.basePath+"hc_supplier_inquiry_management_list/list.json",gridLoadSubUrl:Hc.basePath+"hc_supplier_inquiry_management_list/listAll.json",gridSaveUrl:Hc.basePath+"hc_supplier_inquiry_management_list/batchOperate.json",gridExportUrl:Hc.basePath+"hc_supplier_inquiry_management_list/do_export.json",gridDeleteMasterCustomerUrl:Hc.basePath+"hc_supplier_inquiry_management_list/deleteMasterCustomer.json",gridAddMasterCustomerUrl:Hc.basePath+"hc_supplier_inquiry_management_list/addMasterCustomer.json",gridImportUrl:Hc.basePath+"",subWinTableName:"Hc_Framework.view.hc.SubHcSupplierMarketingPlan",subformActivate:false});a.callParent()}});
Ext.define("Hc_Framework.view.hc.HcSupplierMarketingPlanController",{extend:"Hc_Common.view.BaseSimplePageController",alias:"controller.hcsuppliermarketingplancontroller",init:function(){var a=this;Ext.apply(a,{windowFlag:true,newobj:this.view.subWinTableName});a.callParent()},onEditClick:function(g,a,d,b,f,c){},onEditClick_:function(b,a,h,c,g,i,d,f){var j=Ext.create("Hc_Common.store.Base",{model:"Hc_Framework.model.HcSupplierPurchase",autoLoad:false,groupField:"inquiredQTY_quotedPrice$",proxy:{url:this.view.gridLoadSubUrl}});j.proxy.extraParams.inquiryNo=c.data.inquiryNo;j.load();if(h==0){Ext.create(this.view.subWinTableName,{title:"编辑",record:c,me_:this,store:j}).show();this.view.subformActivate=true;this.onBtnCancelClick()}}});
Ext.define("Hc_Framework.view.hc.HcSupplierMarketingPlanModel",{extend:"Hc_Common.view.BaseSimplePageModel",alias:"viewmodel.hcsuppliermarketingplanmodel"});
Ext.define("Hc_Framework.view.hc.SubHcSupplierMarketingPlan",{extend:"Hc_Common.view.BaseWinPage",alias:"widget.subhcsuppliermarketingplan",controller:"subhcsuppliermarketingplancontroller",viewModel:{type:"subhcsuppliermarketingplanmodel"},title:"新增",width:1000,height:620,maxWidth:1000,minWidth:1000,minHeight:620,layout:"border",closeAction:"hide",plain:false,collapsible:false,modal:true,dockedItems:[{xtype:"toolbar",dock:"top",items:[{text:"保存",handler:"onBtnSaveClick",glyph:Hc.Icon.btnSave},{text:"编辑",handler:"onBtnEditClick",glyph:Hc.Icon.btnEdit},{text:"取消",handler:"onBtnCancelClick",glyph:Hc.Icon.btnCancel}]}],listeners:{beforeshow:function(f,e){var b=Ext.create("Hc_Framework.store.CurrentUser");b.load();var a;var c;if(this.title=="新增"){c="PE"+Ext.util.Format.date((new Date()),"Y").substring(2,5)+Ext.util.Format.date((new Date()),"Y").substring(0,2)+Ext.util.Format.date((new Date()),"dmHis")}else{if(this.title=="编辑"){for(i=0;i<this.record.getFields().length;i++){var d=Ext.util.Format.trim(this.record.getFields()[i].getName());if((this.getReferences())[d]){if(this.lookupReference(d).is("combo")){this.lookupReference(d).setRawValue(this.record.get(d))}else{this.lookupReference(d).setValue(this.record.get(d))}this.lookupReference(d).disable()}}}}this.lookupReference("subhcsuppliercustomer").title=">>>>"+this.me_.view.title_}},initComponent:function(){var a=this;Ext.apply(a,{items:[{title:"--->采购管理",xtype:"panel",defaults:{},layout:{type:"absolute"},reference:"subhcsuppliercustomer",region:"north",bodyStyle:"background:#cbdbe0;",padding:"3 0 3 0",items:[{xtype:"fieldset",height:60,width:980,layout:{type:"table",columns:4},x:3,y:3,padding:"3 0 0 10",items:[{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"计划编码",name:"storageNo",reference:"storageNo",listeners:{beforerender:function(b){b.fieldLabel+='<font size="2px" color="red">*</font>'}}},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"计划部门",name:"storageNo",reference:"storageNo"},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"年月",name:"storageNo",reference:"storageNo"},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"登记日期",name:"storageNo",reference:"storageNo"},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"任务量",name:"storageNo",reference:"storageNo"},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"任务金额",name:"storageNo",reference:"storageNo"},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"计划人",name:"storageNo",reference:"storageNo"}]},{xtype:"fieldset",height:30,width:980,layout:{type:"table",columns:4},x:3,y:70,padding:"3 0 0 10",items:[{xtype:"combobox",labelAlign:"right",labelWidth:78,fieldLabel:"审核领导",name:"storageNo",reference:"storageNo"}]},{xtype:"fieldset",height:443,width:980,layout:{type:"fit",columns:4},x:3,y:100,title:"计划内容",padding:"0 0 0 0",items:[{xtype:"htmleditor",labelAlign:"right",labelWidth:78,width:900,height:400,name:"approvalOpinion",reference:"approvalOpinion",colspan:4}]}]}]});a.callParent()}});
Ext.define("Hc_Framework.view.hc.SubHcSupplierMarketingPlanController",{extend:"Hc_Common.view.BaseWinPageController",alias:"controller.subhcsuppliermarketingplancontroller",flag:false,record_:"",init:function(){var c=this;var a=Ext.create("Hc_Framework.model.HcSupplierBePutInStorage",{});this.record_=a;for(i=0;i<a.getFields().length;i++){var b=Ext.util.Format.trim(a.getFields()[i].getName());if((this.getReferences())[b]){this.lookupReference(b).on("change",c.onBtnchange,c)}}c.callParent()},onBtnEditClick:function(){for(i=0;i<this.record_.getFields().length;i++){var a=Ext.util.Format.trim(this.record_.getFields()[i].getName());if((this.getReferences())[a]){if("contactsName"==a||"contactsTel"==a||"contactsFax"==a||"supplierName"==a){this.lookupReference(a).disable()}else{this.lookupReference(a).enable()}}}},onBtnchange:function(d,c,a,b){var e=this.view.me_.workObject.store;e.beginUpdate();if(d.is("combo")){this.view.record.set(d.name,d.getRawValue())}else{this.view.record.set(d.name,d.getRawValue())}if(this.view.title=="编辑"){this.flag=false}else{if(this.view.title=="新增"){this.flag=true}}e.endUpdate()},onBtnSaveClick:function(){if(this.view.title=="编辑"){this.flag=false}else{if(this.view.title=="新增"){this.flag=true}}for(i=0;i<this.record_.getFields().length-3;i++){if(!this.lookupReference(Ext.util.Format.trim(this.record_.getFields()[i].getName())).isValid()){return}}this.view.me_.workObject.store.add(this.view.record);this.view.me_.onBtnSaveClick(null,this)},onBtnCancelClick:function(){if(this.flag){this.view.me_.workObject.store.removeAt(this.view.me_.workObject.store.getCount()-1);this.view.me_.workObject.view.refresh();this.flag=false}if(this.view.title=="编辑"){this.view.me_.workObject.store.rejectChanges();this.view.me_.workObject.view.refresh()}this.view.me_.view.subformActivate=false;this.view.hide()}});
Ext.define("Hc_Framework.view.hc.SubHcSupplierMarketingPlanModel",{extend:"Hc_Common.view.BaseWinPageModel",alias:"viewmodel.subhcsuppliermarketingplanmodel"});
Ext.define("Hc_Framework.view.hc.HcSupplierProductList",{extend:"Hc_Common.view.BaseSimplePage",alias:"widget.hcsupplierproductlist",controller:"hcsupplierproductlistcontroller",viewModel:{type:"hcsupplierproductlistmodel"},title_:"产品列表",initComponent:function(){var a=this;Ext.apply(a,{searchItems:[{xtype:"textfield",fieldLabel:"产品编号",name:"storageNo"}],gridModel:"Hc_Framework.model.HcSupplierPurchase",gridSubGrid:"HcSupplierInquiryProduct",gridColumns:[{header:"产品编号",dataIndex:"storageNo",width:"15%",renderer:function(f,d,b,g,e,c){return'<span onclick=""><a href="#">'+f+" </a></span>"}},{header:"型号规格",dataIndex:"supplierName",width:250},{dataIndex:"storageClass",header:"产品名称",width:150},{dataIndex:"register",header:"产品规格",width:150},{dataIndex:"storageDate",header:"当前库存 ",width:150},{dataIndex:"storageStatus",header:"可供数量",width:150},{dataIndex:"purchaseDate",header:"在途数量",width:150},{dataIndex:"purchaseDate",header:"公开报价",width:150},{dataIndex:"purchaseDate",header:"建议售价",width:150},{dataIndex:"purchaseDate",header:"最低限价",width:150},{dataIndex:"purchaseDate",header:"仓库名称",width:150}],allendflag:false,gridPrimaryKey:"inquiryNo",gridLoadUrl:Hc.basePath+"hc_supplier_inquiry_management_list/list.json",gridLoadSubUrl:Hc.basePath+"hc_supplier_inquiry_management_list/listAll.json",gridSaveUrl:Hc.basePath+"hc_supplier_inquiry_management_list/batchOperate.json",gridExportUrl:Hc.basePath+"hc_supplier_inquiry_management_list/do_export.json",gridDeleteMasterCustomerUrl:Hc.basePath+"hc_supplier_inquiry_management_list/deleteMasterCustomer.json",gridAddMasterCustomerUrl:Hc.basePath+"hc_supplier_inquiry_management_list/addMasterCustomer.json",gridImportUrl:Hc.basePath+"",subWinTableName:"Hc_Framework.view.hc.SubHcSupplierProductList",subformActivate:false});a.callParent()}});
Ext.define("Hc_Framework.view.hc.HcSupplierProductListController",{extend:"Hc_Common.view.BaseSimplePageController",alias:"controller.hcsupplierproductlistcontroller",init:function(){var a=this;Ext.apply(a,{windowFlag:true,newobj:this.view.subWinTableName});a.callParent()},onEditClick:function(g,a,d,b,f,c){},onEditClick_:function(b,a,h,c,g,i,d,f){var j=Ext.create("Hc_Common.store.Base",{model:"Hc_Framework.model.HcSupplierPurchase",autoLoad:false,groupField:"inquiredQTY_quotedPrice$",proxy:{url:this.view.gridLoadSubUrl}});j.proxy.extraParams.inquiryNo=c.data.inquiryNo;j.load();if(h==0){Ext.create(this.view.subWinTableName,{title:"编辑",record:c,me_:this,store:j}).show();this.view.subformActivate=true;this.onBtnCancelClick()}}});
Ext.define("Hc_Framework.view.hc.HcSupplierProductListModel",{extend:"Hc_Common.view.BaseSimplePageModel",alias:"viewmodel.hcsupplierproductlistmodel"});
Ext.define("Hc_Framework.view.hc.SubHcSupplierProductList",{extend:"Hc_Common.view.BaseWinPage",alias:"widget.subhcsupplierproductlist",controller:"subhcsupplierproductlistcontroller",viewModel:{type:"subhcsupplierproductlistmodel"},title:"新增",width:1000,height:620,maxWidth:1000,minWidth:1000,minHeight:620,layout:"border",closeAction:"hide",plain:false,collapsible:false,modal:true,dockedItems:[{xtype:"toolbar",dock:"top",items:[{text:"保存",handler:"onBtnSaveClick",glyph:Hc.Icon.btnSave},{text:"编辑",handler:"onBtnEditClick",glyph:Hc.Icon.btnEdit},{text:"取消",handler:"onBtnCancelClick",glyph:Hc.Icon.btnCancel}]}],listeners:{beforeshow:function(f,e){var b=Ext.create("Hc_Framework.store.CurrentUser");b.load();var a;var c;if(this.title=="新增"){c="PE"+Ext.util.Format.date((new Date()),"Y").substring(2,5)+Ext.util.Format.date((new Date()),"Y").substring(0,2)+Ext.util.Format.date((new Date()),"dmHis")}else{if(this.title=="编辑"){for(i=0;i<this.record.getFields().length;i++){var d=Ext.util.Format.trim(this.record.getFields()[i].getName());if((this.getReferences())[d]){if(this.lookupReference(d).is("combo")){this.lookupReference(d).setRawValue(this.record.get(d))}else{this.lookupReference(d).setValue(this.record.get(d))}this.lookupReference(d).disable()}}}}this.lookupReference("subhcsuppliercustomer").title=">>>>"+this.me_.view.title_}},initComponent:function(){var a=this;Ext.apply(a,{items:[{title:"--->采购管理",xtype:"panel",defaults:{},layout:{type:"absolute"},reference:"subhcsuppliercustomer",region:"north",bodyStyle:"background:#cbdbe0;",padding:"3 0 3 0",items:[{xtype:"fieldset",height:60,width:980,layout:{type:"table",columns:4},x:3,y:3,padding:"3 0 0 10",items:[{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"产品编号",name:"storageNo",reference:"storageNo",listeners:{beforerender:function(b){b.fieldLabel+='<font size="2px" color="red">*</font>'}}},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"型号规格",name:"storageNo",reference:"storageNo"},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"产品名称",name:"storageNo",reference:"storageNo"},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"产品类别",name:"storageNo",reference:"storageNo"}]},{xtype:"fieldset",height:57,width:980,layout:{type:"table",columns:4},x:3,y:70,padding:"3 0 0 10",items:[{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"品　　牌",name:"supplierNo",reference:"supplierNo"},{xtype:"textfield",labelAlign:"right",labelWidth:78,width:313,fieldLabel:"仓库名称",name:"supplierName",reference:"supplierName",colspan:3},{xtype:"textfield",labelAlign:"right",labelWidth:78,width:313,fieldLabel:"负 责 人",name:"supplierName",reference:"supplierName",colspan:3}]},{xtype:"fieldset",height:100,width:980,layout:{type:"table",columns:4},x:3,y:133,padding:"3 0 0 10",items:[{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"期初库存",name:"storageClass",reference:"storageClass"},{xtype:"datefield",labelAlign:"right",labelWidth:78,fieldLabel:"当前库存 ",name:"monetaryUnit",reference:"monetaryUnit"},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"最少存量",name:"storageDate",reference:"storageDate",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"最多存量",name:"billNo",reference:"billNo",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"销售提成",name:"register",reference:"register",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"公开报价",name:"whetherProductInspection",reference:"whetherProductInspection",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"建议售价",name:"qualityInspector",reference:"qualityInspector",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"最低限价",name:"qualityInspector",reference:"qualityInspector",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"销售折扣",name:"qualityInspector",reference:"qualityInspector",}]},{xtype:"fieldset",height:150,width:980,layout:{type:"table",columns:4},x:3,y:236,padding:"3 0 0 10",items:[{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"销售状态",name:"eExaminationAndApproval",reference:"eExaminationAndApproval",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"修改日期",name:"storageConfirmation",reference:"storageConfirmation",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"首次销售日期",name:"storageStatus",reference:"storageStatus",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"首次销售单价",name:"storageStatus",reference:"storageStatus",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"最近销售日期",name:"storageStatus",reference:"storageStatus",},{xtype:"textfield",labelAlign:"right",labelWidth:78,fieldLabel:"最近销售单价",name:"storageStatus",reference:"storageStatus",}]},{xtype:"fieldset",height:130,width:980,layout:{type:"table",columns:4},x:3,y:393,padding:"3 0 0 10",items:[{xtype:"textarea",labelAlign:"right",labelWidth:78,width:800,fieldLabel:"产品描述",name:"approvalOpinion",reference:"approvalOpinion",colspan:4},{xtype:"textarea",labelAlign:"right",labelWidth:78,width:800,fieldLabel:"技术特性",name:"approvalOpinion",reference:"approvalOpinion",colspan:4},{xtype:"textarea",labelAlign:"right",labelWidth:78,width:800,fieldLabel:"应用范围",name:"approvalOpinion",reference:"approvalOpinion",colspan:4},{xtype:"textarea",labelAlign:"right",labelWidth:78,width:800,fieldLabel:"备&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;注",name:"remark",reference:"remark",colspan:4}]}]}]});a.callParent()}});
Ext.define("Hc_Framework.view.hc.SubHcSupplierProductListController",{extend:"Hc_Common.view.BaseWinPageController",alias:"controller.subhcsupplierproductlistcontroller",flag:false,record_:"",init:function(){var c=this;var a=Ext.create("Hc_Framework.model.HcSupplierBePutInStorage",{});this.record_=a;for(i=0;i<a.getFields().length;i++){var b=Ext.util.Format.trim(a.getFields()[i].getName());if((this.getReferences())[b]){this.lookupReference(b).on("change",c.onBtnchange,c)}}c.callParent()},onBtnEditClick:function(){for(i=0;i<this.record_.getFields().length;i++){var a=Ext.util.Format.trim(this.record_.getFields()[i].getName());if((this.getReferences())[a]){if("contactsName"==a||"contactsTel"==a||"contactsFax"==a||"supplierName"==a){this.lookupReference(a).disable()}else{this.lookupReference(a).enable()}}}},onBtnchange:function(d,c,a,b){var e=this.view.me_.workObject.store;e.beginUpdate();if(d.is("combo")){this.view.record.set(d.name,d.getRawValue())}else{this.view.record.set(d.name,d.getRawValue())}if(this.view.title=="编辑"){this.flag=false}else{if(this.view.title=="新增"){this.flag=true}}e.endUpdate()},onBtnSaveClick:function(){if(this.view.title=="编辑"){this.flag=false}else{if(this.view.title=="新增"){this.flag=true}}for(i=0;i<this.record_.getFields().length-3;i++){if(!this.lookupReference(Ext.util.Format.trim(this.record_.getFields()[i].getName())).isValid()){return}}this.view.me_.workObject.store.add(this.view.record);this.view.me_.onBtnSaveClick(null,this)},onBtnCancelClick:function(){if(this.flag){this.view.me_.workObject.store.removeAt(this.view.me_.workObject.store.getCount()-1);this.view.me_.workObject.view.refresh();this.flag=false}if(this.view.title=="编辑"){this.view.me_.workObject.store.rejectChanges();this.view.me_.workObject.view.refresh()}this.view.me_.view.subformActivate=false;this.view.hide()}});
Ext.define("Hc_Framework.view.hc.SubHcSupplierProductListModel",{extend:"Hc_Common.view.BaseWinPageModel",alias:"viewmodel.subhcsupplierproductlistmodel"});
Ext.application({extend:"Hc_Framework.Application",appFolder:"resources/app",name:"Hc_Framework"});
